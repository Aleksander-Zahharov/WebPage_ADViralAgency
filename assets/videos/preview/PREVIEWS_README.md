# Превью для ленты «Наши работы»

## Текущие параметры (после обновления)

- **Вертикальные:** 288×512 px, 24 fps, длительность как у оригинала (16–30 с).
- **Горизонтальные:** 432×243 px, 24 fps, длительность как у оригинала.

Разрешения подобраны с запасом под увеличение при наведении (scale 1.4). Имена файлов не менялись — в коде правки не нужны.

## Оценка прироста производительности

### Пиксели на кадр

| Тип        | Было (типично) | Стало   | Изменение   |
|-----------|----------------|---------|-------------|
| Вертикаль | 360×512 = 184 320 | 288×512 = 147 456 | **−20%** пикселей |
| Горизонталь | 800×360 = 288 000 | 432×242 ≈ 104 544 | **−64%** пикселей |

### Нагрузка на декодирование и рендер (пиксели × FPS)

- **Вертикаль:** было 184k × (25–50 fps), стало 147k × 24 fps → примерно **−30…−50%** нагрузки на кадр (плюс единый 24 fps вместо 25/30/50).
- **Горизонталь:** было 288k × (25–30 fps), стало 104k × 24 fps → примерно **−65…−70%** нагрузки.

### Размер файлов и трафик

- Меньше разрешение и фиксированный 24 fps при том же CRF → типично **−30…−50%** размера вертикальных превью, **−50…−70%** горизонтальных.
- Меньший трафик и быстрее загрузка ленты, особенно на слабых сетях.

### Итог

- **Декод/рендер:** ожидаемо **≈30–70%** меньше работы в зависимости от типа превью и бывшего FPS.
- **Память GPU/буферы:** меньше из‑за меньшего разрешения.
- **FPS страницы:** меньше рывков за счёт единого 24 fps (в т.ч. без 50 fps у Styleva_Battles).
- **Загрузка:** быстрее за счёт меньшего объёма превью.

Перекодирование: ffmpeg из оригиналов (vertical/ и Horizontal/), скрипт `encode_previews.ps1` в `assets/videos/`.

### Быстрый старт (fast start)

Превью кодируются с `-movflags +faststart`: метаданные (moov) в начале файла. Браузер может показать первый кадр и начать воспроизведение уже после загрузки первых килобайт, без ожидания конца файла. При перекодировании превью обязательно сохраняйте этот флаг в скрипте.
