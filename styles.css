/* Скрытие только для скринридеров */
.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* =========================
  Базовая тема и типографика
========================= */
:root {
  /* Шрифтовые переменные для глобальной смены гарнитур */
  --primary-font-family: "Sansation-Light";
  --secondary-font-family: "Sansation-Regular";

  /* Готовые стековые значения шрифтов */
  --primary-font: var(--primary-font-family), sans-serif;
  --secondary-font: var(--secondary-font-family);
  /* Путь к основному файлу шрифта для @font-face */
  --primary-font-url: url("./assets/fonts/Sansation-Light.ttf");

  --bg-page: #121214; /* сплошной темно-серый фон сайта */
  --bg-1: #0a0a0b;
  --bg-2: #17171a;
  --text: #ffffff;
  --muted: #c9c9d1;

  --primary-1: #6a11cb; /* основной фиолетовый оттенок */
  --primary-2: #b086f9; /* дополнительный сиреневый оттенок */
  --selection-bg: var(--primary-1); /* фиолетовый цвет для выделения текста */

  --card: rgba(255,255,255,0.06);
  --card-border: rgba(255,255,255,0.12);
  /* Непрозрачный аналог --card-border для текстовых заливок */
  --card-border-solid: #1f1f1f;
  --radius-sm: 10px;

  --container: 1160px;
  /* Единый шаг сетки: используйте для padding внешних блоков и margin внутренних элементов */
  --gap: 24px;
  --spacing: var(--gap);
  --z-hero: 1;
  --z-overlay: 2;
  --z-header: 10;
  --z-arrows: 5;
  --header-h: 72px;
  --blur: 6px; /* единое значение блюра для всех backdrop-filter на странице */
  /* Общая анимация стрелок: увеличение при hover, вдавливание при active */
  --arrow-hover-scale: 1.2;
  --arrow-active-scale: 0.85;
  /* Кнопки fixed-actions (тема + вверх) */
  --fixed-btn-color: #fff;
  --fixed-btn-bg: rgba(255,255,255,.07);
  --fixed-btn-border: rgba(255,255,255,.18);
  --fixed-btn-shadow: none;
  --fixed-btn-hover-bg: rgba(255,255,255,.10);
  --fixed-btn-hover-border: rgba(255,255,255,.28);
}

@media (max-width: 768px) {
  :root {
    --gap: 18px;
    --header-h: 64px;
  }
}

@media (max-width: 480px) {
  :root {
    --gap: 14px;
  }
}

/* =========================
  Светлая тема
========================= */
[data-theme="light"] {
  --primary-1: #c2410c; /* тёмный оранжевый (вместо фиолетового) */
  --primary-2: #fb923c; /* светлый оранжевый */
  --bg-page: #f5f5f7;
  --bg-1: #ffffff;
  --bg-2: #ebebed;
  --text: #1d1d1f;
  --muted: #6e6e73;
  --card: rgba(0,0,0,0.06);
  --card-border: rgba(0,0,0,0.12);
  --card-border-solid: #d2d2d7;
  --selection-bg: var(--primary-1);
  --fixed-btn-color: #1d1d1f;
  --fixed-btn-bg: rgba(255,255,255,.9);
  --fixed-btn-border: rgba(0,0,0,.12);
  --fixed-btn-shadow: none;
  --fixed-btn-hover-bg: rgba(255,255,255,1);
  --fixed-btn-hover-border: rgba(0,0,0,.2);
}

[data-theme="light"] ::selection {
  background-color: rgba(194, 65, 12, 0.2);
  color: #1d1d1f;
}
[data-theme="light"] ::-moz-selection {
  background-color: rgba(194, 65, 12, 0.2);
  color: #1d1d1f;
}

[data-theme="light"] .site-header {
  background: rgba(255,255,255,.85);
  border-bottom-color: rgba(0,0,0,.08);
}
[data-theme="light"] .header-nav a,
[data-theme="light"] .menu-toggle,
[data-theme="light"] .lang-switcher__toggle {
  color: #1d1d1f;
}
[data-theme="light"] .header-nav a.active {
  color: #1d1d1f;
  font-weight: 400; /* без подсветки активной секции — как обычная ссылка */
}
[data-theme="light"] .menu-toggle {
  border-color: rgba(0,0,0,.14);
}
[data-theme="light"] .menu-toggle__bar {
  background: #1d1d1f;
}
[data-theme="light"] .menu-open #menu-toggle {
  border-color: rgba(251, 146, 60, 0.8);
  box-shadow: 0 0 0 3px rgba(251, 146, 60, 0.35);
}
[data-theme="light"] .lang-switcher__toggle {
  border-color: rgba(0,0,0,.14);
  color: #1d1d1f;
}
[data-theme="light"] .btn-ghost {
  color: #1d1d1f;
  background-color: rgba(0,0,0,.06);
  border-color: rgba(0,0,0,.14);
}
[data-theme="light"] .btn-ghost:hover {
  background-color: rgba(0,0,0,.10);
  border-color: rgba(0,0,0,.22);
}
[data-theme="light"] .hero-overlay {
  /* Затемнение как в тёмной теме */
  background: linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.5));
}
[data-theme="light"] .hero-content h1,
[data-theme="light"] .hero-content p,
[data-theme="light"] .hero-content .muted {
  color: #fff;
}
/* Все параграфы в светлой теме — цвет как у заголовка «Кто мы» (кроме hero подзаголовка, он белый выше) */
[data-theme="light"] p {
  color: #1d1d1f;
}
[data-theme="light"] .hero .btn-primary {
  color: #fff;
}
/* Все стрелки в светлой теме — чёрные */
[data-theme="light"] .scroll-to-top span {
  filter: brightness(0) saturate(100%);
}
[data-theme="light"] #works .ig-arrow::before,
[data-theme="light"] .modal-arrow::before,
[data-theme="light"] .service-popup-arrow::before {
  filter: brightness(0) saturate(100%);
}
[data-theme="light"] .scroll-to-top.hover-tap-active {
  background-color: var(--fixed-btn-hover-bg);
  border-color: var(--fixed-btn-hover-border);
}

[data-theme="light"] .site-footer {
  background: #ffffff;
  border-top-color: rgba(0,0,0,.08);
  color: #1d1d1f;
}
[data-theme="light"] .footer-left,
[data-theme="light"] .footer-left .author-email-link,
[data-theme="light"] .footer-author,
[data-theme="light"] .footer-author-label,
[data-theme="light"] .footer-center a,
[data-theme="light"] .footer-right a,
[data-theme="light"] .site-footer .footer-hours,
[data-theme="light"] .site-footer .footer-email,
[data-theme="light"] .site-footer .footer-social a {
  color: #1d1d1f;
}
@media (hover: hover) {
  [data-theme="light"] .footer-left .author-email-link:hover,
  [data-theme="light"] .footer-center a:hover,
  [data-theme="light"] .footer-right a:hover {
    color: #1d1d1f;
  }
}
[data-theme="light"] .footer-right .social-icon {
  filter: brightness(0) saturate(100%);
  opacity: 0.75;
}
[data-theme="light"] .footer-left .author-email-link.hover-tap-active,
[data-theme="light"] .footer-center a.hover-tap-active,
[data-theme="light"] .footer-right a.hover-tap-active,
[data-theme="light"] .site-footer .footer-social a.hover-tap-active {
  color: #1d1d1f;
}

[data-theme="light"] .lang-switcher__chevron {
  border-color: rgba(0,0,0,.5);
}
[data-theme="light"] .lang-switcher[data-open="true"] .lang-switcher__chevron {
  border-color: #1d1d1f;
}
[data-theme="light"] .lang-switcher__menu {
  background: rgba(255,255,255,.95);
  border-color: rgba(0,0,0,.12);
  box-shadow: none;
}
[data-theme="light"] .lang-switcher__option {
  color: #1d1d1f;
}
[data-theme="light"] .lang-switcher__option:hover,
[data-theme="light"] .lang-switcher__option.is-active {
  color: #1d1d1f;
}
/* Карточки услуг в светлой теме — светло-серый фон по умолчанию, при наведении фон белый; граница 1px всегда — при ховере меняется только цвет */
[data-theme="light"] #services .cards .card {
  background: rgba(0,0,0,0.05); /* чуть темнее серый по умолчанию (без наведения) */
  border: 1px solid transparent;
  -webkit-font-smoothing: subpixel-antialiased;
  transition: background 0.25s ease-in-out, transform 0.25s ease-in-out, box-shadow 0.25s ease-in-out, border-color 0.25s ease-in-out;
}
[data-theme="light"] #services .cards .card.card-scale-on {
  transition: background 0.25s ease-in-out, transform 0.25s ease-in-out, box-shadow 0.25s ease-in-out;
}
[data-theme="light"] #services .cards .card:hover,
[data-theme="light"] #services .cards .card:focus-within,
[data-theme="light"] #services .cards .card.icon-animating:not(.wave-active) {
  background: #fff;
  border-color: var(--service-border-color, transparent); /* только цветная граница, без светло-серой */
}
[data-theme="light"] #services .cards .card.wave-active,
[data-theme="light"] #services .cards .card.icon-animating.wave-active {
  background: rgba(0,0,0,0.05); /* тот же серый, что по умолчанию */
  border-color: transparent; /* без светло-серой границы после ховера/волны */
  box-shadow: none;
}
/* Услуги: текст карточек такой же чёрный, как заголовок секции (без «мыльного» оттенка) */
[data-theme="light"] #services h2,
[data-theme="light"] #services .section-sub {
  color: #1d1d1f;
}
[data-theme="light"] #services .cards .card h3,
[data-theme="light"] #services .cards .card p {
  color: #000;
  -webkit-font-smoothing: subpixel-antialiased;
}
[data-theme="light"] #about h2,
[data-theme="light"] #about .content p,
[data-theme="light"] #about .text-scroll p {
  color: #1d1d1f;
}
/* Секция «Кто мы»: фоновая иконка за текстом — ещё более светло-серой в светлой теме */
[data-theme="light"] #about .content::before {
  background-color: #d8d8dc;
  opacity: 0.28;
}
/* Контакты: заголовок белый */
[data-theme="light"] #contact .contact-content h2 {
  color: #fff;
}
/* Панель «Интересующие услуги» в светлой теме — тот же дизайн, что в тёмной (тёмная панель, белый текст) */
[data-theme="light"] .services-dropdown-panel {
  background: rgba(28, 28, 32, 0.45);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 20px;
  box-shadow: none;
  padding: 10px;
}
[data-theme="light"] .services-dropdown-panel .services-dropdown-option,
[data-theme="light"] .services-dropdown-panel .services-dropdown-option > span {
  color: #fff;
}
[data-theme="light"] .services-dropdown-option {
  border-radius: 20px;
  border-bottom-color: rgba(255, 255, 255, 0.06);
  padding: 8px 10px;
}
[data-theme="light"] .services-dropdown-option.selected {
  background: rgba(255, 255, 255, 0.16);
  box-shadow: none;
}
[data-theme="light"] .services-dropdown-option.selected:hover {
  background: rgba(255, 255, 255, 0.2);
}
/* В панели контактов в светлой теме — те же цвета hover и иконок, что в тёмной */
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="analysis"]:hover,
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="analysis"].hover-tap-active { --option-hover-border: #6a11cb; }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="strategy"]:hover,
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="strategy"].hover-tap-active { --option-hover-border: #8b5cf6; }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="ads"]:hover,
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="ads"].hover-tap-active { --option-hover-border: #b086f9; }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="content"]:hover,
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="content"].hover-tap-active { --option-hover-border: #22c55e; }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="social"]:hover,
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="social"].hover-tap-active { --option-hover-border: #65d94f; }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="community"]:hover,
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="community"].hover-tap-active { --option-hover-border: #a3e635; }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="video"]:hover,
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="video"].hover-tap-active { --option-hover-border: #9e1a47; }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="design"]:hover,
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="design"].hover-tap-active { --option-hover-border: #dc2626; }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="web"]:hover,
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="web"].hover-tap-active { --option-hover-border: #fb923c; }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="analysis"] img { filter: brightness(0) saturate(100%) invert(30%) sepia(95%) saturate(2000%) hue-rotate(240deg) brightness(0.65) contrast(1.1); }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="strategy"] img { filter: brightness(0) saturate(100%) invert(52%) sepia(90%) saturate(1800%) hue-rotate(250deg) brightness(0.75) contrast(1.05); }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="ads"] img { filter: brightness(0) saturate(100%) invert(42%) sepia(95%) saturate(2000%) hue-rotate(250deg) brightness(0.68) contrast(1.1); }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="content"] img { filter: brightness(0) saturate(100%) invert(60%) sepia(90%) saturate(2000%) hue-rotate(100deg) brightness(0.72) contrast(1.1); }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="social"] img { filter: brightness(0) saturate(100%) invert(63%) sepia(93%) saturate(2000%) hue-rotate(72deg) brightness(0.82) contrast(1.08); }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="community"] img { filter: brightness(0) saturate(100%) invert(65%) sepia(95%) saturate(2000%) hue-rotate(75deg) brightness(0.88) contrast(1.05); }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="video"] img { filter: brightness(0) saturate(100%) invert(22%) sepia(95%) saturate(2000%) hue-rotate(328deg) brightness(0.75) contrast(1.1); }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="design"] img { filter: brightness(0) saturate(100%) invert(25%) sepia(95%) saturate(2000%) hue-rotate(350deg) brightness(0.68) contrast(1.1); }
[data-theme="light"] .services-dropdown-panel .services-dropdown-option[data-value="web"] img { filter: brightness(0) saturate(100%) invert(60%) sepia(95%) saturate(2000%) hue-rotate(-15deg) brightness(0.88) contrast(1.05); }

@media (max-width: 820px) {
  [data-theme="light"] .header-nav {
    border-top-color: rgba(0,0,0,.08);
  }
  [data-theme="light"] .header-nav::before {
    background: rgba(255,255,255,.9);
    -webkit-backdrop-filter: blur(var(--blur));
    backdrop-filter: blur(var(--blur));
  }
  [data-theme="light"] .header-nav a {
    color: #1d1d1f;
  }
  [data-theme="light"].menu-open body::before {
    background: transparent;
  }
  [data-theme="light"] .services-dropdown-panel:not([hidden])::before {
    background: rgba(0, 0, 0, 0.5);
  }
}

/* Светлая тема: затемнения → засветления для медиа-блоков (hero и contact остаются затемнёнными как в тёмной) */
[data-theme="light"] .media::after {
  background: linear-gradient(180deg, transparent 60%, rgba(255,255,255,.35));
}
[data-theme="light"] .contact-overlay {
  /* Затемнение как в тёмной теме */
  background: linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.5));
}
[data-theme="light"] .service-popup-overlay {
  background: rgba(255, 255, 255, 0.75);
}
/* Попап услуги в светлой теме — светлый контейнер, крестик и текст */
[data-theme="light"] .service-popup-container {
  background: #ffffff;
  border-color: rgba(0, 0, 0, 0.12);
  box-shadow: none;
}
[data-theme="light"] .service-popup-close {
  background: rgba(255, 255, 255, 0.95);
  border-color: rgba(0, 0, 0, 0.2);
  color: #1d1d1f;
}
[data-theme="light"] .service-popup-close:hover {
  background: #fff;
  border-color: rgba(0, 0, 0, 0.35);
}
[data-theme="light"] .service-popup-title {
  color: #1d1d1f;
}
[data-theme="light"] .service-popup-text-content {
  color: var(--muted);
}
[data-theme="light"] .service-popup-text-content p,
[data-theme="light"] .service-popup-text-content li {
  color: var(--muted);
}
[data-theme="light"] .service-popup-inline-video {
  background: rgba(0, 0, 0, 0.08);
}
[data-theme="light"] .service-popup-inline-video-placeholder {
  background: rgba(0, 0, 0, 0.12);
}
[data-theme="light"] .service-popup-inline-video-play-icon {
  border-color: rgba(0, 0, 0, 0.25);
  background: rgba(255, 255, 255, 0.9);
  color: #1d1d1f;
}
[data-theme="light"] .service-popup-inline-video-placeholder:hover .service-popup-inline-video-play-icon {
  background: #fff;
  border-color: rgba(0, 0, 0, 0.35);
}

[data-theme="light"] .video-modal-overlay {
  background: rgba(255, 255, 255, 0.65);
}
[data-theme="light"] .video-modal-content {
  box-shadow: none;
}
/* Крестик закрытия видеоплеера в светлой теме — светлый стиль */
[data-theme="light"] .video-modal-close {
  background: rgba(255, 255, 255, 0.95);
  border-color: rgba(0, 0, 0, 0.2);
  color: #1d1d1f;
}
[data-theme="light"] .video-modal-close:hover {
  background: #fff;
  border-color: rgba(0, 0, 0, 0.35);
}

/* Светлая тема: без белых/чёрных теней */
[data-theme="light"] .service-popup-container[data-service-type] {
  box-shadow: none;
}
[data-theme="light"] .email-copy-notification {
  box-shadow: none;
}
[data-theme="light"] section#contact textarea:focus {
  box-shadow: 0 0 0 2px rgba(251, 146, 60, 0.3);
}
[data-theme="light"] section#contact input:focus,
[data-theme="light"] section#contact textarea:focus {
  border-color: rgba(251, 146, 60, 0.8);
  box-shadow: 0 0 0 2px rgba(251, 146, 60, 0.3);
}
[data-theme="light"] .services-dropdown-trigger:focus-visible {
  border-color: rgba(251, 146, 60, 0.8);
  box-shadow: 0 0 0 2px rgba(251, 146, 60, 0.3);
}
[data-theme="light"] .services-dropdown-trigger[aria-expanded="true"] {
  border-color: rgba(251, 146, 60, 0.8);
}
[data-theme="light"] .services-dropdown-option[data-value="analysis"]:hover,
[data-theme="light"] .services-dropdown-option[data-value="analysis"].hover-tap-active { --option-hover-border: #c2410c; }
[data-theme="light"] .services-dropdown-option[data-value="strategy"]:hover,
[data-theme="light"] .services-dropdown-option[data-value="strategy"].hover-tap-active { --option-hover-border: #ea580c; }
[data-theme="light"] .services-dropdown-option[data-value="ads"]:hover,
[data-theme="light"] .services-dropdown-option[data-value="ads"].hover-tap-active { --option-hover-border: #fb923c; }
[data-theme="light"] .services-dropdown-option[data-value="analysis"] img {
  filter: brightness(0) saturate(100%) invert(28%) sepia(95%) saturate(2000%) hue-rotate(20deg) brightness(0.9) contrast(1.1);
}
[data-theme="light"] .services-dropdown-option[data-value="strategy"] img {
  filter: brightness(0) saturate(100%) invert(38%) sepia(95%) saturate(1800%) hue-rotate(25deg) brightness(0.9) contrast(1.05);
}
[data-theme="light"] .services-dropdown-option[data-value="ads"] img {
  filter: brightness(0) saturate(100%) invert(55%) sepia(90%) saturate(1500%) hue-rotate(25deg) brightness(0.95) contrast(1.05);
}
[data-theme="light"] .pkg.hover-tap-active .pkg-body,
[data-theme="light"] .pkg input:checked + .pkg-body.hover-tap-active {
  box-shadow: 0 0 20px rgba(251, 146, 60, 0.5);
}
[data-theme="light"] .pkg .pkg-body:hover,
[data-theme="light"] .pkg input:checked + .pkg-body:hover {
  box-shadow: 0 0 20px rgba(251, 146, 60, 0.5);
}
/* Плеер в светлой теме остаётся таким же — фиолетовые элементы не перекрашиваем в оранжевый */
[data-theme="light"] .video-modal-content .plyr__control--overlaid:hover,
[data-theme="light"] .video-modal-content .plyr__control--overlaid:active,
[data-theme="light"] .video-modal-content .plyr__control--overlaid:focus-visible,
[data-theme="light"] .AdviralPlayer .plyr__control--overlaid:hover,
[data-theme="light"] .AdviralPlayer .plyr__control--overlaid:active,
[data-theme="light"] .AdviralPlayer .plyr__control--overlaid:focus-visible {
  background: rgba(139, 92, 246, 0.2) !important;
  border-color: rgba(139, 92, 246, 0.4) !important;
}
[data-theme="light"] .video-modal-content .plyr__control:hover,
[data-theme="light"] .AdviralPlayer .plyr__control:hover {
  background: rgba(139, 92, 246, 0.2) !important;
}
[data-theme="light"] .video-modal-content .plyr__progress input[type=range]::-moz-range-thumb,
[data-theme="light"] .AdviralPlayer .plyr__progress input[type=range]::-moz-range-thumb {
  background: #8B5CF6 !important;
}
[data-theme="light"] .video-modal-content .plyr__progress input[type=range]::-webkit-slider-thumb,
[data-theme="light"] .AdviralPlayer .plyr__progress input[type=range]::-webkit-slider-thumb {
  background: #8B5CF6 !important;
}
[data-theme="light"] .video-modal-content .plyr__progress input[type=range],
[data-theme="light"] .AdviralPlayer .plyr__progress input[type=range] {
  color: #8B5CF6 !important;
}
/* Пройденный путь прогресс-бара в светлой теме — фиолетовый (как в тёмной) */
[data-theme="light"] .video-modal-content .plyr__progress input[type=range]::-webkit-slider-runnable-track,
[data-theme="light"] .AdviralPlayer .plyr__progress input[type=range]::-webkit-slider-runnable-track {
  background: linear-gradient(to right, #8B5CF6 0%, #8B5CF6 var(--value, 0%), rgba(255, 255, 255, 0.2) var(--value, 0%), rgba(255, 255, 255, 0.2) 100%) !important;
}
[data-theme="light"] .video-modal-content .plyr__progress input[type=range]::-moz-range-progress,
[data-theme="light"] .AdviralPlayer .plyr__progress input[type=range]::-moz-range-progress {
  background: #8B5CF6 !important;
}
/* Кнопки .btn-primary в светлой теме — оранжевый градиент */
[data-theme="light"] .btn-primary:hover {
  background: linear-gradient(135deg, #c2410c, #fb923c);
}
[data-theme="light"] .btn-primary:focus-visible {
  box-shadow: 0 0 0 3px rgba(251, 146, 60, 0.32), 0 8px 24px rgba(251, 146, 60, 0.35);
}
[data-theme="light"] .hero .btn-primary {
  background: linear-gradient(135deg, rgba(194, 65, 12, 0.5), rgba(251, 146, 60, 0.5));
}
[data-theme="light"] .hero .btn-primary:hover {
  background: linear-gradient(135deg, rgba(234, 88, 12, 0.5), rgba(251, 146, 60, 0.5));
}
[data-theme="light"] .hero .btn-primary:focus-visible {
  box-shadow: 0 0 0 3px rgba(251, 146, 60, 0.25);
}
[data-theme="light"] .contact-form .btn.full.btn-primary,
[data-theme="light"] .contact-form .btn-primary.full {
  background: linear-gradient(135deg, rgba(194, 65, 12, 0.5), rgba(251, 146, 60, 0.5));
}
[data-theme="light"] .contact-form .btn.full.btn-primary:hover,
[data-theme="light"] .contact-form .btn-primary.full:hover {
  background: linear-gradient(135deg, rgba(234, 88, 12, 0.5), rgba(251, 146, 60, 0.5));
}
[data-theme="light"] .contact-form .btn.full.btn-primary:focus-visible,
[data-theme="light"] .contact-form .btn-primary.full:focus-visible {
  box-shadow: 0 0 0 3px rgba(251, 146, 60, 0.25), 0 8px 24px rgba(251, 146, 60, 0.28);
}
/* Светлый фон полей контактов при выделении в светлой теме */
[data-theme="light"] section#contact input[type="text"]:focus,
[data-theme="light"] section#contact input[type="email"]:focus,
[data-theme="light"] section#contact textarea:focus {
  background: rgba(255, 255, 255, 0.98);
}
[data-theme="light"] section#contact input,
[data-theme="light"] section#contact textarea {
  color: rgba(255, 255, 255, 0.9); /* без фокуса — светлым (и плейсхолдер, и введённое) */
}
[data-theme="light"] section#contact input:focus,
[data-theme="light"] section#contact textarea:focus {
  color: #1d1d1f; /* при фокусе — тёмным, чтобы то что пишет юзер было читаемо */
}
/* Фоновый текст в контактах (светлая тема) — тот же оттенок, что у .services-dropdown-placeholder */
[data-theme="light"] section#contact .services-dropdown-placeholder {
  color: rgba(255, 255, 255, 0.55);
}
[data-theme="light"] section#contact input::placeholder,
[data-theme="light"] section#contact textarea::placeholder {
  color: rgba(255, 255, 255, 0.55);
}
[data-theme="light"] .btn-primary.hover-tap-active {
  background: linear-gradient(135deg, #c2410c, #fb923c);
}
[data-theme="light"] .header-nav a[href="#contact"].btn-primary.hover-tap-active {
  background: linear-gradient(135deg, #c2410c, #fb923c);
}
/* Контакты в шапке: при наведении в светлой теме — оранжевое свечение (как фиолетовое в тёмной) */
@media (hover: hover) {
  [data-theme="light"] .header-nav a[href="#contact"].btn:hover,
  [data-theme="light"] .header-nav a[href="#contact"].btn-primary:hover {
    background: linear-gradient(135deg, #ea580c, #fb923c);
    -webkit-background-clip: text;
    background-clip: text;
    border: none;
  }
}
[data-theme="light"] .header-nav a[href="#contact"].btn:focus-visible,
[data-theme="light"] .header-nav a[href="#contact"].btn-primary:focus-visible {
  box-shadow: 0 0 0 3px rgba(251, 146, 60, 0.25);
}
[data-theme="light"] .hero .btn-primary.hover-tap-active {
  background: linear-gradient(135deg, rgba(194, 65, 12, 0.5), rgba(251, 146, 60, 0.5));
}
[data-theme="light"] .contact-form .btn.full.btn-primary.hover-tap-active,
[data-theme="light"] .contact-form .btn-primary.full.hover-tap-active {
  background: linear-gradient(135deg, rgba(194, 65, 12, 0.5), rgba(251, 146, 60, 0.5));
}
[data-theme="light"] #works .ig-item:hover,
[data-theme="light"] #works .ig-item.hover-tap-active {
  box-shadow: none;
}

@media (min-width: 1600px) {
  :root {
    --container: 1360px;
    --gap: 32px;
    --header-h: 84px;
  }

  body {
    font-size: 18px;
  }

  h1 {
    font-size: clamp(56px, 4.5vw, 96px);
  }

  h2 {
    font-size: clamp(40px, 3.6vw, 72px);
  }

  h3 {
    font-size: clamp(24px, 2.4vw, 36px);
  }

  .logo {
    font-size: 2.6rem;
  }

  .btn {
    height: 52px;
    padding: 0 26px;
    font-size: 17px;
  }

  .header-nav a {
    height: 52px;
    font-size: 17px;
  }

  .lang-switcher__toggle {
    height: 44px;
    padding: 0 52px 0 20px;
    font-size: 14px;
  }

  .hero .cta-row {
    gap: 18px;
  }

  .cards {
    gap: 22px;
  }

  .card {
    padding: 26px;
  }

  .packages {
    gap: 18px;
  }

  .pkg-body {
    padding: 22px;
  }
}

/* Подключаем основной шрифт Sansation-Light */
@font-face {
  font-family: "Sansation-Light";
  src: url("./assets/fonts/Sansation-Light.ttf") format("truetype");
  font-weight: 300;
  font-style: normal;
  font-display: swap;
}

/* Подключаем вторичный шрифт Sansation-Regular */
@font-face {
  font-family: "Sansation-Regular";
  src: url("./assets/fonts/Sansation-Regular.ttf") format("truetype");
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

*,
*::before,
*::after { box-sizing: border-box; }

html {
  overflow-x: hidden; /* убираем горизонтальный скролл и пустое пространство справа */
  scroll-behavior: smooth;
  /* Используем ровный темный фон вместо градиента */
  background: var(--bg-page);
}

body {
  margin: 0;
  color: var(--text);
  font: 400 16px/1.55 var(--secondary-font);
  overflow-x: hidden;
  width: 100%;
  /* Смягчаем вертикальный скролл, отключая snap по умолчанию */
  scroll-snap-type: none;
  padding-top: 0; /* хедер поверх героя, без пустого пространства сверху */
  padding-bottom: 0; /* Убираем нижний отступ */
}

/* Стили выделения текста - белый фон с черным текстом */
::selection {
  background-color: #c9c9d1; /* светло-серый фон */
  color: #000000; /* черный текст */
}

::-moz-selection {
  background-color: #c9c9d1; /* для Firefox */
  color: #000000;
}

/* Включаем плавный snap только на больших экранах */
@media (min-width: 1200px) {
  body { scroll-snap-type: y proximity; }
  .section { scroll-snap-align: start; }
  /* Гарантируем остановку якоря на секции Services, а не выше */
  #services { scroll-snap-stop: always; }
}

a { color: inherit; text-decoration: none; }

img, video { max-width: 100%; display: block; }

.container {
  width: 100%;
  max-width: calc(var(--container) + 2 * var(--gap));
  margin: 0 auto;
  padding: 0 var(--gap);
}

@media (max-width: 600px) {
  .container {
    padding: 0 16px;
  }
}

h1, h2, h3 {
  font-family: var(--primary-font);
  letter-spacing: 0.03em;
  margin: 0 0 12px;
  line-height: 1.1;
}

h1 { font-size: clamp(38px, 6vw, 72px); }
h2 { font-size: clamp(28px, 4vw, 44px); }
h3 { font-size: clamp(18px, 2.2vw, 22px); }

p { color: var(--muted); margin: 0 0 12px; }

/* Кнопки */
/* === Сброс стилей кнопок, убираем артефакт слева === */
.btn {
  -webkit-appearance: none;
  appearance: none;
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 44px;
  padding: 0 18px;
  border-radius: 20px;
  line-height: 1;
  font-weight: 600;
  white-space: nowrap;
  cursor: pointer;
  border: 0; /* убираем светящийся ореол от border */
  outline: none;
  background: none; /* фон задается в конкретных модификаторах */
  overflow: hidden; /* обрезаем субпиксельные артефакты */
  transition: transform .2s ease, box-shadow .3s ease, opacity .2s ease, background-color .2s ease;
  -webkit-tap-highlight-color: transparent;
  backface-visibility: hidden;
  transform: translateZ(0); /* устраняем артефакты сглаживания */
  -webkit-font-smoothing: antialiased;
  background-clip: padding-box;
}

.btn-primary {
  color: #fff;
  background: linear-gradient(135deg, var(--primary-1), var(--primary-2));
  box-shadow: none;
  transition: background 0.2s;
}
@media (hover: hover) {
  .btn-primary:hover {
    /* Убираем зеркалирование цветов, делаем фон чуть светлее */
    background: linear-gradient(135deg, #7a21db, #c096f9);
  }
}
.btn-primary:focus-visible {
  box-shadow: 0 0 0 3px rgba(138,88,255,.32), 0 8px 24px rgba(138, 88, 255, .35);
}

/* Делаем кнопку-призрак плотнее, чтобы не было ореола на размытом фоне */
.btn-ghost {
  color: #fff;
  background-color: rgba(255,255,255,.07);
  border: 1px solid rgba(255,255,255,.18);
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
}
@media (hover: hover) {
  .btn-ghost:hover { background-color: rgba(255,255,255,.10); border-color: rgba(255,255,255,.28); }
}
.btn-ghost:focus-visible { box-shadow: 0 0 0 3px rgba(138,88,255,.25); }

/* Элементы шапки тянутся по высоте кнопки без артефактов */
.header-nav a.btn { height: 44px; padding: 0 18px; }

/* =========================
  Шапка
========================= */
.site-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: var(--z-header);
  background: rgba(10,10,11,.5);
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
  border-bottom: 1px solid rgba(255,255,255,.08);
  font-family: var(--primary-font); /* подключаем основной шрифт для шапки */
  transition: transform .24s ease;
}
.site-header.header--hidden {
  transform: translateY(-100%);
}
.header-inner {
  height: var(--header-h);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}
.logo {
  font-family: var(--primary-font); /* используем основной шрифт в логотипе */
  font-size: 1.8rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  height: 100%; /* выравниваем по высоте с остальными элементами шапки */
  margin-top: -2px; /* легкая коррекция для визуального выравнивания */
}
.header-nav {
  display: flex;
  align-items: center;
  gap: 18px;
}
/* Выравниваем ссылки навигации по центру кнопок */
.header-nav a {
  display: inline-flex;
  align-items: center;
  height: 44px; /* та же высота, что и у кнопок */
  margin: 0 5px; /* добавляем промежуток между кнопками */
}
.header-nav a, .header-nav .btn { line-height: 1; }
.header-nav a { align-items: center; }
.header-nav a { opacity: .9; }
@media (hover: hover) {
  .header-nav a:hover { opacity: 1; }
}

/* Подчёркивание при наведении (анимация слева направо) — только у текстовых ссылок */
.header-nav a:not(.btn) {
  position: relative;
}
.header-nav a:not(.btn)::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: 8px;
  width: 100%;
  height: 1px;
  background: currentColor;
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.25s ease;
}
@media (hover: hover) {
  .header-nav a:not(.btn):hover::after {
    transform: scaleX(1);
  }
}
/* Стили активной ссылки в шапке */
.header-nav a.active {
  color: white; /* активный пункт всегда белый */
  transition: color 0.3s ease;
}

/* Кнопка-гамбургер: скрыта на десктопе */
.menu-toggle {
  display: none;
  width: 44px;
  height: 38px;
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,.14);
  background: transparent; /* Прозрачный фон, оставляем только stroke */
  color: #fff;
  align-items: center;
  justify-content: center;
  gap: 5px;
  flex-direction: column; /* Полоски в столбик */
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
}
.menu-toggle__bar {
  display: block;
  width: 20px;
  height: 2px;
  background: #fff;
  border-radius: 20px;
  transition: transform .22s ease, opacity .22s ease;
}
/* При открытом меню полоски не меняются */

/* Подсветка кнопки бургера при открытом меню — оранжевые границы и свечение */
.menu-open #menu-toggle {
  border-color: rgba(251, 146, 60, 0.8);
  background: transparent; /* Фон остается прозрачным даже при открытом меню */
  box-shadow: 0 0 0 3px rgba(251, 146, 60, 0.35);
}

/* Текстовый градиентный стиль для кнопки «Контакты» в шапке */
.header-nav a[href="#contact"].btn,
.header-nav a[href="#contact"].btn-primary {
  color: transparent;
  background: linear-gradient(135deg, var(--primary-1), var(--primary-2));
  -webkit-background-clip: text;
  background-clip: text;
  border: none;
  -webkit-backdrop-filter: none;
  backdrop-filter: none;
  padding: 0; /* Убираем padding для одинакового расстояния */
  font-weight: 900; /* Очень жирный шрифт */
}
@media (hover: hover) {
  .header-nav a[href="#contact"].btn:hover,
  .header-nav a[href="#contact"].btn-primary:hover {
    background: linear-gradient(135deg, #7a21db, #c096f9);
    -webkit-background-clip: text;
    background-clip: text;
    border: none;
  }
}
.header-nav a[href="#contact"].btn:focus-visible,
.header-nav a[href="#contact"].btn-primary:focus-visible {
  box-shadow: 0 0 0 3px rgba(138,88,255,.25);
}

.lang-switcher {
  position: relative;
  display: inline-flex;
  align-items: center;
  margin-left: 12px;
  min-width: 0;
}

.lang-switcher__toggle {
  -webkit-appearance: none;
  appearance: none;
  height: 44px;
  padding: 0 44px 0 16px;
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,.14);
  background: transparent; /* Убираем фон, оставляем только stroke */
  color: #f5f6ff;
  font-weight: 600;
  font-size: 13px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  cursor: pointer;
  outline: none;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  line-height: 1;
  box-shadow: none; /* Убираем тень */
  transition: border-color .25s ease, box-shadow .25s ease, transform .25s ease;
  position: relative;
  font-family: var(--primary-font);
  -webkit-tap-highlight-color: transparent;
}

@media (hover: hover) {
  .lang-switcher__toggle:hover {
    border-color: rgba(255,255,255,.26);
    box-shadow: none; /* Убираем тень */
  }
}

.lang-switcher__toggle:focus-visible {
  border-color: rgba(176,134,249,.65);
  box-shadow: 0 0 0 3px rgba(138,88,255,.32); /* Оставляем только внешнее свечение при фокусе */
}

.lang-switcher[data-open="true"] .lang-switcher__toggle {
  border-color: rgba(176,134,249,.58);
  box-shadow: none; /* Убираем тень */
}

.lang-switcher__value {
  pointer-events: none;
}

.lang-switcher__chevron {
  position: absolute;
  right: 18px;
  top: 50%;
  width: 10px;
  height: 10px;
  border-right: 2px solid rgba(255,255,255,.72);
  border-bottom: 2px solid rgba(255,255,255,.72);
  transform: translateY(-50%) rotate(45deg);
  transition: transform .22s ease, border-color .22s ease;
  pointer-events: none;
}

.lang-switcher[data-open="true"] .lang-switcher__chevron {
  transform: translateY(-50%) rotate(-135deg);
  border-color: #fff;
}

.lang-switcher__menu {
  position: absolute;
  right: 0;
  top: calc(100% + 10px);
  width: 100%;
  min-width: 100%;
  padding: 8px;
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(24,24,28,.92);
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
  box-shadow: none;
  list-style: none;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
  opacity: 0;
  transform: translateY(-6px);
  pointer-events: none;
  transition: opacity .22s ease, transform .22s ease;
  z-index: 32;
  will-change: opacity, transform;
}

.lang-switcher[data-open="true"] .lang-switcher__menu {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.lang-switcher__option {
  padding: 10px 12px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: rgba(240,241,255,.92);
  cursor: pointer;
  transition: background .22s ease, color .22s ease, transform .22s ease;
  outline: none;
}

@media (hover: hover) {
  .lang-switcher__option:hover {
    background: transparent; /* Убираем фон */
    color: #ffffff;
    transform: translateX(-2px);
  }
}

.lang-switcher__option:focus-visible {
  background: transparent; /* Убираем фон */
  color: #ffffff;
  box-shadow: 0 0 0 2px rgba(176,134,249,.45);
}

.lang-switcher__option.is-active {
  background: transparent; /* Убираем фон */
  color: #ffffff;
  box-shadow: none; /* Убираем тень */
}

@media (max-width: 820px) {
  .header-inner {
    flex-wrap: nowrap;
    justify-content: space-between;
    gap: 12px;
  }

  /* Мобильное меню: блюр через ::before (отдельный слой), чтобы backdrop-filter работал */
  .header-nav {
    position: fixed;
    inset: var(--header-h) 0 auto 0;
    height: calc(100vh - var(--header-h));
    background: transparent;
    border-top: 1px solid rgba(255,255,255,.08);
    display: grid;
    grid-auto-rows: min-content;
    align-content: start;
    gap: 8px;
    padding: var(--gap);
    padding-right: calc(var(--gap) + env(safe-area-inset-right));
    padding-left: calc(var(--gap) + env(safe-area-inset-left));
    transform: translateY(-8px);
    opacity: 0;
    pointer-events: none;
    transition: transform .22s ease, opacity .22s ease;
    overflow: hidden;
  }
  .header-nav::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -1;
    background: rgba(10,10,11,.5);
    -webkit-backdrop-filter: blur(var(--blur));
    backdrop-filter: blur(var(--blur));
  }
  .menu-open .header-nav {
    transform: translateY(0);
    opacity: 1;
    pointer-events: auto;
  }

  .header-nav a {
    display: flex;
    justify-content: center;
    height: 48px;
    font-size: 16px;
    background: transparent; /* убираем серый фон у ссылок */
    border: none; /* убираем рамку у ссылок */
    border-radius: 20px;
    margin: 0;
  }
  .header-nav a.btn {
    height: 52px;
  }

  /* Переключатель языка теперь внутри меню */
  .lang-switcher {
    position: relative;
    right: auto;
    top: auto;
    z-index: auto;
    order: 0;
    width: auto;
    margin-top: 16px;
    display: inline-flex;
    justify-content: center;
    padding: 0;
    justify-self: center;
  }

  .lang-switcher__toggle {
    width: auto;
    max-width: none;
    justify-content: center;
  }

  .lang-switcher__menu {
    left: 50%;
    right: auto;
    transform: translate(-50%, -6px);
  }
  .lang-switcher[data-open="true"] .lang-switcher__menu {
    transform: translate(-50%, 0);
  }

  /* Показываем кнопку меню на мобильных */
  .menu-toggle {
    display: inline-flex;
    position: fixed;
    right: calc(var(--gap) + env(safe-area-inset-right));
    top: calc((var(--header-h) - 38px) / 2);
    z-index: 12;
  }
  /* Отступы справа у меню и переключателя языка совпадают с var(--gap) */
  .lang-switcher { margin-right: 0; }
}

@media (max-width: 520px) {
  .logo {
    font-size: 1.4rem;
  }
}

/* Якоря: отступ сверху под фиксированный хедер, чтобы заголовок секции не уходил под шапку */
section[id] { scroll-margin-top: var(--header-h); }


/* =========================
  Герой (баннер)
========================= */
.hero {
  position: relative;
  min-height: 100vh; /* на всю высоту экрана, хедер поверх видео */
  display: grid;
  place-items: center;
  overflow: hidden;
  scroll-snap-align: start;
}

@media (max-width: 768px) {
  .hero {
    min-height: 100vh; /* на мобильных тоже на весь экран */
  }

  .hero-content {
    padding: 56px 0 72px;
  }

  .hero .cta-row {
    justify-content: center;
  }
}
.hero-media {
  position: absolute; inset: 0;
  background: center / cover no-repeat;
  background-image: url("https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?q=80&w=2070&auto=format&fit=crop");
  filter: saturate(0.8) contrast(1.05) brightness(.6);
  z-index: 0;
  transform: scale(1.03);
}
.hero-overlay { /* Затемнение фона без фиолетового пятна */
  position: absolute; inset: 0;
  background: linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.5));
  z-index: 1;
  will-change: opacity, transform;
}
.hero-content {
  position: relative;
  z-index: 2;
  text-align: center;
  padding: 72px 0;
}
.hero-content h1 {
  position: relative;
  display: inline-block; /* область подсветки совпадает с глифами текста */
  color: transparent; /* текст заливаем фоновым градиентом */
  line-height: 1.28; /* даем запас высоты без внешних отступов */
  background-image:
    radial-gradient(
      100rem 100rem at var(--x, 50%) var(--y, 50%),
      rgb(255 255 255 / calc(var(--spot-o, 0) * 0.60)) 0%,
      rgb(255 255 255 / calc(var(--spot-o, 0) * 0.60)) 28%,
      rgb(255 255 255 / calc(var(--spot-o, 0) * 0.28)) 41%,
      rgb(255 255 255 / 0) 54%,
      rgb(255 255 255 / 0) 100%
    ),
  linear-gradient(var(--muted), var(--muted)); /* базовый спокойный цвет текста */
  -webkit-background-clip: text;
  background-clip: text;
  transition: background-image .2s ease;
}
.hero .cta-row {
  margin-top: 22px;
  display: inline-flex;
  gap: 12px;
  flex-wrap: wrap;
}
.hero .btn-primary {
  /* Стеклянный эффект: 50% непрозрачности, блюр 6px */
  background: linear-gradient(135deg, rgba(107, 17, 203, 0.5), rgba(176, 134, 249, 0.5));
  border: 1px solid rgba(255,255,255,.18);
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
  box-shadow: none;
}
@media (hover: hover) {
  .hero .btn-primary:hover {
    background: linear-gradient(135deg, rgba(123, 33, 219, 0.5), rgba(191, 150, 249, 0.5));
    border-color: rgba(255,255,255,.28);
    box-shadow: none;
  }
}
.hero .btn-primary:focus-visible {
  box-shadow: 0 0 0 3px rgba(138,88,255,.25);
}

/* Кнопка отправки формы: стеклянный фиолетовый, 50% непрозрачности, блюр 6px */
.contact-form .btn.full.btn-primary,
.contact-form .btn-primary.full {
  color: #fff;
  background: linear-gradient(135deg, rgba(107, 17, 203, 0.5), rgba(176, 134, 249, 0.5));
  border: 1px solid rgba(255,255,255,.18);
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
  box-shadow: none;
}
@media (hover: hover) {
  .contact-form .btn.full.btn-primary:hover,
  .contact-form .btn-primary.full:hover {
    background: linear-gradient(135deg, rgba(123, 33, 219, 0.5), rgba(191, 150, 249, 0.5));
    border-color: rgba(255,255,255,.28);
  }
}
.contact-form .btn.full.btn-primary:focus-visible,
.contact-form .btn-primary.full:focus-visible {
  box-shadow: 0 0 0 3px rgba(138,88,255,.25), 0 8px 24px rgba(138, 88, 255, .28);
}
.hero-video {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 0;
  filter: saturate(0.9) contrast(1.05) brightness(.7);
  will-change: transform;
}

/* =========================
  Общие секции
========================= */
.section {
  position: relative;
  padding: calc(var(--header-h) + 20px) 0 clamp(64px, 8vw, 120px);
  /* сверху: хедер + 20px (как расстояние между фотками в «Кто мы») */
  scroll-snap-align: none;
  overflow-x: visible;
}

@media (max-width: 768px) {
  .section {
    padding: calc(var(--header-h) + 16px) 0 clamp(40px, 6vw, 64px);
  }
}
@media (max-width: 600px) {
  .section {
    padding: calc(var(--header-h) + 12px) 0 clamp(32px, 5vw, 48px);
  }
}

/* Секция услуг: отступы от краёв чуть меньше — карточки шире на десктопе */
#services .container {
  max-width: calc(var(--container) + 2 * var(--gap));
  padding-left: 2.25%;
  padding-right: 2.25%;
}
#services.section {
  padding-top: calc(var(--header-h) + 12px);
  padding-bottom: clamp(24px, 4vw, 48px);
  margin-bottom: clamp(32px, 6vw, 64px); /* отступ до секции «Наши клиенты» */
}

/* Услуги: хедер и параграф слева */
#services h2,
#services .section-sub {
  text-align: left;
}
/* Наши клиенты: хедер и параграф справа */
#partners h2,
#partners .section-sub {
  text-align: right;
}

/* Секция Наши клиенты: без лишнего пространства снизу; верхний отступ как у остальных секций */
#partners .container {
  min-height: 0; /* не растягивать по flex/grid */
}
#partners.section {
  padding-top: calc(var(--header-h) + 20px); /* как у .section по умолчанию */
}

/* Ноутбук 769–1024px: выровнять отступы между секциями (меньше пропасть после «Наши работы», больше после «Услуги») */
@media (min-width: 769px) and (max-width: 1024px) {
  #works.section {
    padding-bottom: clamp(16px, 2.5vw, 28px);
  }
  #services.section {
    padding-bottom: clamp(48px, 6vw, 72px);
  }
}
/* Десктоп 1025px+: приличное расстояние между «Наши работы» и «Услуги» (паддинг сверху у Услуг), расстояние между Услуги и Клиенты как на планшете */
@media (min-width: 1025px) {
  #services.section {
    padding-top: calc(var(--header-h) + clamp(80px, 10vw, 160px));
    padding-bottom: clamp(48px, 5vw, 64px);
  }
}
/* 4K 2560px+: ещё больше расстояние между «Наши работы» и «Услуги» */
@media (min-width: 2560px) {
  #services.section {
    padding-top: calc(var(--header-h) + clamp(160px, 12vw, 240px));
  }
}

/* Хедеры и параграфы карточек Услуги начинаются слева */
#services .card h3,
#services .card p {
  text-align: left;
}

/* Наши работы: хедер и параграф начинаются справа (инверсировано) */
#works h2,
#works .section-sub {
  text-align: right;
}

/* Анимация появления при прокрутке: reveal-left = слева направо; reveal-right = справа налево (инверсировано) */
.reveal {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.75s cubic-bezier(0.22, 1, 0.36, 1), transform 0.75s cubic-bezier(0.22, 1, 0.36, 1);
}
.reveal.reveal-left { transform: translateX(-40px); }  /* слева направо */
.reveal.reveal-right { transform: translateX(40px); }   /* справа налево */
/* Допускаем классы, которые добавляет скрипт */
.reveal.in-view,
.reveal.visible,
.reveal.show,
.reveal.active { opacity: 1; transform: none; }

/* Двухколоночная сетка */
.grid-2 {
  display: grid;
  grid-template-columns: 1.1fr 1fr;
  gap: clamp(20px, 4vw, 48px);
  align-items: start; /* Выравнивание по верхнему краю для одинаковой высоты */
}
@media (max-width: 900px) {
  .grid-2 { grid-template-columns: 1fr; }
}

/* Фиксированные размеры для секции "Кто мы" */
#about .container {
  max-width: none; /* Убираем ограничение максимальной ширины контейнера */
  width: auto; /* Автоматическая ширина */
  padding: 0 var(--gap); /* Сохраняем боковые отступы */
}

#about .grid-2 {
  grid-template-columns: 625px 687px; /* текст слева (первый в разметке), фотки справа */
  gap: 48px; /* Фиксированный отступ */
  max-width: none; /* Убираем ограничение максимальной ширины */
  width: fit-content; /* Ширина по содержимому */
}

#about .media-tilted-group {
  width: 687px;
  height: 420px;
  flex-shrink: 0; /* Запрещаем сжатие */
  min-width: 687px; /* Минимальная ширина */
  max-width: 687px; /* Максимальная ширина */
}

#about .content {
  width: 625px;
  height: 420px;
  flex-shrink: 0; /* Запрещаем сжатие */
  overflow: visible; /* Рамка не обрезает содержимое */
  min-width: 625px; /* Минимальная ширина */
  max-width: 625px; /* Максимальная ширина */
  display: flex;
  flex-direction: column;
  position: relative; /* для фоновой иконки */
}

/* Фоновая иконка Icon_Filming по центру блока с текстом, тёмно-серый, наклон как у рамок фото в «Кто мы» */
#about .content::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) skew(-8deg, 0deg); /* тот же угол, что у рамок фоток в секции */
  width: min(280px, 55%);
  height: min(280px, 55%);
  background-color: #3d3d3d; /* тёмно-серый */
  -webkit-mask-image: url("./assets/images/icons/Icon_Filming.webp");
  -webkit-mask-size: contain;
  -webkit-mask-position: center;
  -webkit-mask-repeat: no-repeat;
  mask-image: url("./assets/images/icons/Icon_Filming.webp");
  mask-size: contain;
  mask-position: center;
  mask-repeat: no-repeat;
  pointer-events: none;
  z-index: 0;
  opacity: 0.25;
}

#about .content h2,
#about .content .text-scroll {
  position: relative;
  z-index: 1;
}

/* Заголовок и параграф секции «Кто мы» начинаются слева */
#about .content h2,
#about .content .text-scroll,
#about .content .text-scroll p {
  text-align: left;
}

/* Уменьшенные отступы сверху у заголовка */
#about .content h2 {
  margin-top: 0;
  margin-bottom: 12px;
}

/* Контейнер для прокрутки текста (без заголовка) */
#about .text-scroll {
  flex: 1; /* Занимает оставшееся место после заголовка */
  overflow-y: auto; /* Вертикальная прокрутка для текста */
  overflow-x: hidden; /* Горизонтальное переполнение скрываем */
  padding-right: 8px; /* Отступ для scrollbar */
}

/* Обертка для медиа-слайдов (по умолчанию не нужна) */
#about .media-wrapper {
  display: contents; /* На десктопе ведет себя как будто её нет */
}

/* Вертикальное расположение для секции "Кто мы" на планшете и ноутбуке (фото под текстом) */
@media (max-width: 1024px) {
  #about {
    overflow-x: visible; /* Разрешаем внутренним элементам управлять прокруткой */
  }
  
  #about .container {
    max-width: 100%; /* Полная ширина на мобильных */
    width: 100%;
    padding: 0; /* Убираем боковые отступы у контейнера */
  }
  
  #about .grid-2 {
    display: flex; /* Используем flexbox вместо grid */
    flex-direction: column; /* Вертикальное расположение */
    gap: 16px; /* меньше отступ между текстом и блоком с фото */
    width: 100%;
    align-items: stretch; /* Растягиваем элементы */
  }
  
  /* Обёртка: высота = высоте масштабированного блока (420×scale); отступы чтобы углы фото не заходили за край экрана */
  #about .media-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    overflow: hidden;
    padding: 0 calc(var(--gap) + 12px); /* отступы от краёв экрана для наклонных углов */
    height: 370px; /* 420 × 0.88 — соответствует высоте масштабированного .media-tilted-group */
    margin-top: 4px;
    margin-bottom: -12px;
  }
  
  /* Медиа-блок: масштаб чуть уменьшен, чтобы наклонные углы не выходили за экран */
  #about .media-tilted-group {
    width: 687px;
    height: 420px;
    flex-shrink: 0;
    transform-origin: center center;
    transform: scale(0.88);
  }
  
  /* Текстовый блок становится адаптивным */
  #about .content {
    width: 100%; /* Занимает всю доступную ширину */
    max-width: 100%; /* Убираем ограничение на мобильных */
    min-width: 0; /* Убираем минимальную ширину */
    height: auto; /* Автоматическая высота */
    min-height: 0; /* Убираем минимальную высоту для flex */
    flex-shrink: 1; /* Разрешаем сжатие на мобильных */
    padding: 0 var(--gap); /* Боковые отступы для текста */
  }
  
  /* Текстовый контейнер также становится адаптивным */
  #about .text-scroll {
    max-height: none; /* Убираем ограничение высоты */
    overflow-y: visible; /* Отключаем прокрутку */
    padding-right: 0; /* Убираем отступ для scrollbar */
  }
}

/* Масштаб секции «Кто мы» под узкие экраны; высота обёртки = 420×scale, углы не заходят за экран */
@media (max-width: 768px) {
  #about .media-wrapper { height: 311px; } /* 420 × 0.74 */
  #about .media-tilted-group { transform: scale(0.74); }
}
@media (max-width: 600px) {
  #about .media-wrapper { height: 260px; } /* 420 × 0.62 */
  #about .media-tilted-group { transform: scale(0.62); }
}
@media (max-width: 480px) {
  #about .media-wrapper { height: 218px; } /* 420 × 0.52 */
  #about .media-tilted-group { transform: scale(0.52); }
}
@media (max-width: 380px) {
  #about .media-wrapper { height: 193px; } /* 420 × 0.46 */
  #about .media-tilted-group { transform: scale(0.46); }
}

.media {
  border-radius: var(--radius);
  overflow: hidden;
  position: relative;
  isolation: isolate;
}
.media::after {
  content: "";
  position: absolute; inset: 0;
  background: linear-gradient(180deg, transparent 60%, rgba(0,0,0,.25));
  pointer-events: none;
}
.media img {
  width: 100%; height: auto; display: block;
  transform: scale(1);
  transition: transform 1s cubic-bezier(.2,.6,.2,1);
}
@media (hover: hover) {
  .media:hover img { transform: scale(1.05); }
}

/* Наклонные рамки для секции "Кто мы" */
.media-tilted-group {
  display: flex;
  gap: 20px; /* Одинаковое расстояние между фотками */
  align-items: stretch;
  height: 100%;
  min-height: 100%; /* Минимальная высота соответствует контенту */
}

.media-tilted-frame {
  flex: 1;
  overflow: hidden;
  position: relative;
  border: none;
  background: var(--card);
  transform: skew(-8deg, 0deg);
}

/* Убираем индивидуальные наклоны - все рамки одинаковые */
.media-tilted-frame:nth-child(1),
.media-tilted-frame:nth-child(2),
.media-tilted-frame:nth-child(3) {
  transform: skew(-8deg, 0deg);
}

@media (hover: hover) {
  .media-tilted-frame:hover {
    z-index: 1;
  }
}

@media (hover: hover) {
  .media-tilted-frame:nth-child(1):hover,
  .media-tilted-frame:nth-child(2):hover,
  .media-tilted-frame:nth-child(3):hover {
    transform: skew(-8deg, 0deg);
  }
}

.media-tilted-frame img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  transform: skew(8deg, 0deg) scale(1.28); /* Чуть больше приближение, без зума при наведении */
  transition: transform 0.5s cubic-bezier(.2,.6,.2,1);
  transform-origin: center center; /* Масштабирование от центра */
}

/* Все изображения используют одинаковый наклон */
.media-tilted-frame:nth-child(1) img,
.media-tilted-frame:nth-child(2) img,
.media-tilted-frame:nth-child(3) img {
  transform: skew(8deg, 0deg) scale(1.28);
}

/* Первое изображение: показываем самую левую часть фотографии с анимацией */
.media-tilted-frame:nth-child(1) img {
  object-position: left center; /* Начальная позиция - левая часть (0%) */
  animation: slidePhotoPan 10s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  /* Без задержки - сразу начинается */
}

/* Второе изображение (Slide_Green): такая же анимация с задержкой 0.2 секунды */
.media-tilted-frame:nth-child(2) img {
  object-position: left center; /* Начальная позиция - левая часть (0%) */
  animation: slidePhotoPan 10s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation-delay: 0.2s; /* Фриз на 0.2 секунды после загрузки */
}

/* Третье изображение (Slide_Red): такая же анимация с задержкой 0.4 секунды */
.media-tilted-frame:nth-child(3) img {
  object-position: left center; /* Начальная позиция - левая часть (0%) */
  animation: slidePhotoPan 10s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  animation-delay: 0.4s; /* Фриз на 0.4 секунды после загрузки */
}

/* Анимация панорамирования фотографии: движение только вперед, конец цикла */
@keyframes slidePhotoPan {
  /* Начало: левая часть (0%) - пауза 2.5 секунды */
  0%, 25% {
    object-position: 0% center;
  }
  /* Сдвиг вперед на половину длины фотографии (50%) - переход 2.5 секунды */
  50% {
    object-position: 50% center;
  }
  /* Пауза 2.5 секунды на позиции 50% */
  50%, 75% {
    object-position: 50% center;
  }
  /* Сдвиг еще на почти половину вперед (95.75%) - переход 2.5 секунды - КОНЕЦ цикла */
  100% {
    object-position: 95.75% center;
  }
}

@media (hover: hover) {
  .media-tilted-frame:hover img {
    transform: skew(8deg, 0deg) scale(1.28);
  }
}

/* Убираем индивидуальные hover трансформации для изображений */
.media-tilted-frame:nth-child(1):hover img,
.media-tilted-frame:nth-child(2):hover img,
.media-tilted-frame:nth-child(3):hover img {
  transform: skew(8deg, 0deg) scale(1.28);
}

.content .bullets { padding: 0; margin: 18px 0 0; list-style: none; }
.content .bullets li {
  padding-left: 28px; position: relative; margin: 10px 0; color: var(--muted);
}
.content .bullets li::before {
  content: "•"; position: absolute; left: 8px; color: var(--primary-2);
}

/* Карточки услуг */
.cards {
  display: grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap: 16px;
  align-items: stretch; /* все карточки одинаковой высоты */
}

/*
  СПРАВКА: как выглядели карточки услуг ДО перехода на стиль media-tilted.
  Это не лишний/мёртвый код — комментарий оставлен намеренно как документация
  предыдущего вида для быстрого отката или сравнения.

  Было (прямоугольные карточки с закруглёнными углами):
  — #services .cards: gap: 16px, без padding, без сдвигов рядов
  — #services .cards .card: border-radius: 20px, transform: none (только scale на hover/active)
  — h3, p, ::after: без skew (transform не задавался)
  — ::before (пятно за курсором): transform: skew(8deg, 0deg) — круглое пятно в прямоугольной карточке
  — первый и последний ряд: без translateX
  — волна: animation: press-bounce (без skew)

  Сейчас: острые углы (border-radius: 0), наклон -8°, сдвиги рядов, пятно следует наклону карточки.

  СПРАВКА: смешанный вариант («туда‑сюда») — сохранён в комментарий, на сайте включён «все в одну сторону».
  Это не лишний код — комментарий для отката к варианту «второй ряд в другую сторону».
  Смешанный вариант:
  — первый и третий ряд: skew(-8deg) translateX(22px) / translateX(-22px); второй ряд: skew(8deg) translateX(22px)
  — h3, p: у 1–3 skew(8deg), у второго ряда skew(-8deg); ::after так же
  — волна: r1/r3 как сейчас, у второго ряда animation-name: press-bounce-skew-v-r2 (skew 8deg, translateX 22px)
  — иконка: у второго ряда icon-hover-skew-r2 / icon-hover-out-skew-r2 с skew(-8deg)
*/
/* Секция услуг: все карточки наклонены в одну сторону (skew -8°), первый ряд вправо 22px, третий влево -22px; сетка на всю ширину; все ряды одной высоты */
#services .cards {
  gap: 12px;
  padding-left: 0;
  padding-right: 0;
  box-sizing: border-box;
  grid-template-rows: repeat(3, 1fr);
  min-height: 320px;
  height: min(420px, 52vh);
  align-items: stretch;
}
/* Ноутбук 769–1024px: меньше высота блока карточек — убрать лишнее пространство снизу */
@media (min-width: 769px) and (max-width: 1024px) {
  #services .cards {
    height: min(340px, 44vh);
    min-height: 280px;
  }
}
/* Десктоп: отступы слева и справа у блока с карточками (чуть меньше — карточки шире) */
@media (min-width: 901px) {
  #services .cards {
    margin-left: 48px;
    margin-right: 48px;
  }
}
#services .cards .card {
  border-radius: 0;
  transform: skew(-8deg, 0deg); /* наклон границ как в media-tilted */
  transition: transform 0.25s ease-in-out, box-shadow 0.25s ease-in-out; /* загорание/потухание — 0.25s (250ms) */
  min-height: 0; /* чтобы карточка могла сжиматься в grid и показывать overflow */
  overflow-y: auto; /* при длинном тексте — прокрутка внутри карточки */
}
/* Класс .card-scale-on добавляется/снимается из JS в такт с загоранием границы; размер карточки не меняется (без scale), только подсветка */
#services .cards .card.card-scale-on {
  transition: transform 0.25s ease-in-out, box-shadow 0.25s ease-in-out;
  transform: skew(-8deg, 0deg);
}
#services .cards .card.card-scale-on:nth-child(-n+3) {
  transform: skew(-8deg, 0deg) translateX(22px);
}
#services .cards .card.card-scale-on:nth-child(n+7) {
  transform: skew(-8deg, 0deg) translateX(-22px);
}

/* Тёмная тема: границы карточек услуг только при hover/focus/анимации; во время волны — без цветной границы */
[data-theme="dark"] #services .cards .card {
  border: 1px solid transparent; /* фиксированная граница — при ховере меняется только цвет, ширина не прыгает */
  transition: background 0.25s ease-in-out, transform 0.25s ease-in-out, box-shadow 0.25s ease-in-out, border-color 0.25s ease-in-out;
}
[data-theme="dark"] #services .cards .card:hover,
[data-theme="dark"] #services .cards .card:focus-within,
[data-theme="dark"] #services .cards .card.icon-animating:not(.wave-active) {
  background: #000; /* при наведении — идеально чёрный фон */
  border-color: var(--service-border-color, transparent); /* только цветная граница, без светло-серой */
}
[data-theme="dark"] #services .cards .card.wave-active,
[data-theme="dark"] #services .cards .card.wave-active.icon-animating {
  border-width: 1px;
  border-color: transparent; /* без светло-серой границы после ховера/волны */
  box-shadow: none;
}
/* Первый ряд — вправо 22px, третий — влево -22px, второй без сдвига (как на скриншоте) */
#services .cards .card:nth-child(-n+3) {
  transform: skew(-8deg, 0deg) translateX(22px);
}
#services .cards .card:nth-child(n+7) {
  transform: skew(-8deg, 0deg) translateX(-22px);
}
#services .cards .card h3,
#services .cards .card p {
  transform: skew(8deg, 0deg); /* контр-наклон под карточку skew(-8deg) */
}
/* Пятно за курсором без распрямления — ::before внутри карточки, границы совпадают с наклоном */
#services .cards .card::after {
  transform: translateY(-50%) skew(8deg, 0deg);
}
/* Ховер только на десктопе (есть курсор); на планшете/мобильном — только по тапу (.hover-tap-active) */
@media (hover: hover) and (min-width: 1025px) {
  #services .cards .card:hover:not(.wave-active),
  #services .cards .card:focus-within:not(.wave-active) {
    transform: skew(-8deg, 0deg); /* без scale — размер карточки не меняется */
  }
  #services .cards .card:nth-child(-n+3):hover:not(.wave-active),
  #services .cards .card:nth-child(-n+3):focus-within:not(.wave-active) {
    transform: skew(-8deg, 0deg) translateX(22px);
  }
  #services .cards .card:nth-child(n+7):hover:not(.wave-active),
  #services .cards .card:nth-child(n+7):focus-within:not(.wave-active) {
    transform: skew(-8deg, 0deg) translateX(-22px);
  }
}
/* Вдавливание на -2% от исходного размера при зажатии */
#services .cards .card:active,
#services .cards .card:hover:active,
#services .cards .card:focus-within:active {
  transform: skew(-8deg, 0deg) scale(0.98) !important;
}
#services .cards .card:nth-child(-n+3):active,
#services .cards .card:nth-child(-n+3):hover:active,
#services .cards .card:nth-child(-n+3):focus-within:active {
  transform: skew(-8deg, 0deg) translateX(22px) scale(0.98) !important;
}
#services .cards .card:nth-child(n+7):active,
#services .cards .card:nth-child(n+7):hover:active,
#services .cards .card:nth-child(n+7):focus-within:active {
  transform: skew(-8deg, 0deg) translateX(-22px) scale(0.98) !important;
}

/* Заголовок и параграф: visibility исключает артефакт «два текста» при лагах/подвисаниях */
.cards h3 {
  font-size: clamp(14px, 1.4vw, 17px);
  margin: 0;
  max-height: 100px;
  opacity: 1;
  overflow: hidden;
  visibility: visible;
  transition: max-height .18s ease, opacity .18s ease, margin .18s ease, visibility 0s 0s;
}

/* Анимация волны: размер пика = hover (--wave-scale). Один подъём и один плавный возврат */
@keyframes press-bounce {
  0%   { transform: translateY(0) scale(1); }
  40%  { transform: translateY(-3px) scale(var(--wave-scale, 1.02)); }
  100% { transform: translateY(0) scale(1); }
}
@keyframes press-bounce-skew-v {
  0%   { transform: skew(-8deg, 0deg) translateY(0) scale(1); }
  40%  { transform: skew(-8deg, 0deg) translateY(-3px) scale(var(--wave-scale, 1.05)); }
  100% { transform: skew(-8deg, 0deg) translateY(0) scale(1); }
}
/* Услуги: первый ряд, сдвиг вправо (22px) */
@keyframes press-bounce-skew-v-r1 {
  0%   { transform: skew(-8deg, 0deg) translateX(22px) translateY(0) scale(1); }
  40%  { transform: skew(-8deg, 0deg) translateX(22px) translateY(-3px) scale(var(--wave-scale, 1.02)); }
  100% { transform: skew(-8deg, 0deg) translateX(22px) translateY(0) scale(1); }
}
/* Наши клиенты: первый ряд, сдвиг вправо (2px) — меньше чем у Услуг для выравнивания */
@keyframes press-bounce-skew-v-r1-partners {
  0%   { transform: skew(-8deg, 0deg) translateX(2px) translateY(0) scale(1); }
  40%  { transform: skew(-8deg, 0deg) translateX(2px) translateY(-3px) scale(var(--wave-scale, 1.02)); }
  100% { transform: skew(-8deg, 0deg) translateX(2px) translateY(0) scale(1); }
}
/* Услуги: последний ряд, сдвиг влево (-22px) */
@keyframes press-bounce-skew-v-r3 {
  0%   { transform: skew(-8deg, 0deg) translateX(-22px) translateY(0) scale(1); }
  40%  { transform: skew(-8deg, 0deg) translateX(-22px) translateY(-3px) scale(var(--wave-scale, 1.02)); }
  100% { transform: skew(-8deg, 0deg) translateX(-22px) translateY(0) scale(1); }
}
/* Услуги: при ширине ≤900px — первый ряд чуть влево (-2px), третий чуть вправо (+2px); для волны */
@keyframes press-bounce-skew-v-r1-left {
  0%   { transform: skew(-8deg, 0deg) translateX(-2px) translateY(0) scale(1); }
  40%  { transform: skew(-8deg, 0deg) translateX(-2px) translateY(-3px) scale(var(--wave-scale, 1.02)); }
  100% { transform: skew(-8deg, 0deg) translateX(-2px) translateY(0) scale(1); }
}
@keyframes press-bounce-skew-v-r3-right {
  0%   { transform: skew(-8deg, 0deg) translateX(2px) translateY(0) scale(1); }
  40%  { transform: skew(-8deg, 0deg) translateX(2px) translateY(-3px) scale(var(--wave-scale, 1.02)); }
  100% { transform: skew(-8deg, 0deg) translateX(2px) translateY(0) scale(1); }
}
/* Услуги: второй ряд */
@keyframes press-bounce-skew-v-r2 {
  0%   { transform: skew(8deg, 0deg) translateX(22px) translateY(0) scale(1); }
  40%  { transform: skew(8deg, 0deg) translateX(22px) translateY(-3px) scale(var(--wave-scale, 1.02)); }
  100% { transform: skew(8deg, 0deg) translateX(22px) translateY(0) scale(1); }
}
@keyframes press-bounce-skew-h {
  0%   { transform: skew(8deg, 0deg) translateY(0) scale(1); }
  40%  { transform: skew(8deg, 0deg) translateY(-3px) scale(var(--wave-scale, 1.05)); }
  100% { transform: skew(8deg, 0deg) translateY(0) scale(1); }
}

/* Анимация загорания границы и цветной подсветки вокруг карточки (один плавный переход без промежуточного кадра) */
@keyframes border-glow {
  0% {
    border-color: transparent; /* без светло-серой границы до/после */
    box-shadow: none;
  }
  100% {
    border-color: var(--service-border-color, transparent);
    box-shadow: 0 0 10px var(--service-border-color, transparent),
                0 0 24px var(--service-border-color, transparent);
  }
}

/* Анимация потухания при уходе курсора */
@keyframes border-glow-out {
  0% {
    border-color: var(--service-border-color, transparent);
    box-shadow: 0 0 10px var(--service-border-color, transparent),
                0 0 24px var(--service-border-color, transparent);
  }
  100% {
    border-color: transparent; /* без светло-серой границы после ховера */
    box-shadow: none;
  }
}

/* Анимация иконки при наведении - увеличение и поворот (8° как у рамок в «Кто мы») */
@keyframes icon-hover {
  0% {
    transform: translateY(-50%) scale(1) rotate(0deg);
  }
  100% {
    transform: translateY(-50%) scale(1.111) rotate(8deg);
  }
}

@keyframes icon-hover-out {
  0% {
    transform: translateY(-50%) scale(1.111) rotate(8deg);
  }
  100% {
    transform: translateY(-50%) scale(1) rotate(0deg);
  }
}

/* Иконка в карточках услуг: контр-наклон skew(8deg) под карточку skew(-8deg) */
@keyframes icon-hover-skew {
  0% {
    transform: translateY(-50%) skew(8deg, 0deg) scale(1) rotate(0deg);
  }
  100% {
    transform: translateY(-50%) skew(8deg, 0deg) scale(1.111) rotate(8deg);
  }
}
@keyframes icon-hover-out-skew {
  0% {
    transform: translateY(-50%) skew(8deg, 0deg) scale(1.111) rotate(8deg);
  }
  100% {
    transform: translateY(-50%) skew(8deg, 0deg) scale(1) rotate(0deg);
  }
}
/* Иконка во втором ряду услуг: контр-наклон skew(-8deg) под карточку skew(8deg) */
@keyframes icon-hover-skew-r2 {
  0% {
    transform: translateY(-50%) skew(-8deg, 0deg) scale(1) rotate(0deg);
  }
  100% {
    transform: translateY(-50%) skew(-8deg, 0deg) scale(1.111) rotate(8deg);
  }
}
@keyframes icon-hover-out-skew-r2 {
  0% {
    transform: translateY(-50%) skew(-8deg, 0deg) scale(1.111) rotate(8deg);
  }
  100% {
    transform: translateY(-50%) skew(-8deg, 0deg) scale(1) rotate(0deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  #services .cards .card[data-wave-ready="true"] {
    --wave-scale: 1.02;
    animation: press-bounce-skew-v 1s cubic-bezier(0.33, 1, 0.68, 1) 1 both;
    animation-delay: var(--wave-delay, 0.2s);
    animation-play-state: paused;
    will-change: transform;
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3) {
    animation-name: press-bounce-skew-v-r1;
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7) {
    animation-name: press-bounce-skew-v-r3;
  }

  #services.in-view .cards .card[data-wave-ready="true"] {
    animation-play-state: running;
  }

  /* Хавер только на десктопе: под курсором — наклон и сдвиг ряда, без изменения размера карточки */
}
@media (hover: hover) and (min-width: 1025px) and (prefers-reduced-motion: no-preference) {
  #services .cards .card[data-wave-ready="true"]:hover,
  #services .cards .card[data-wave-ready="true"]:focus-within {
    animation: none;
    transform: skew(-8deg, 0deg);
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):hover,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):focus-within {
    animation: none;
    transform: skew(-8deg, 0deg) translateX(22px);
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):hover,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):focus-within {
    animation: none;
    transform: skew(-8deg, 0deg) translateX(-22px);
  }
}
@media (prefers-reduced-motion: no-preference) {
  /* Вдавливание на -2% при зажатии (перебивает волну и hover) */
  #services .cards .card[data-wave-ready="true"]:active,
  #services .cards .card[data-wave-ready="true"]:hover:active,
  #services .cards .card[data-wave-ready="true"]:focus-within:active {
    animation: none !important;
    transform: skew(-8deg, 0deg) scale(0.98) !important;
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):hover:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):focus-within:active {
    animation: none !important;
    transform: skew(-8deg, 0deg) translateX(22px) scale(0.98) !important;
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):hover:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):focus-within:active {
    animation: none !important;
    transform: skew(-8deg, 0deg) translateX(-22px) scale(0.98) !important;
  }

  /* Волна в Наши клиенты — в стиле Услуг: skew -8°, первый ряд +22px, последний -22px */
  #partners .client-item[data-wave-ready="true"]:not(.wave-done) {
    --wave-scale: 1.05;
    animation: press-bounce-skew-v 1s cubic-bezier(0.33, 1, 0.68, 1) 1 both;
    animation-delay: var(--wave-delay, 0.2s);
    animation-play-state: paused;
    will-change: transform;
    transition: transform 0.25s ease;
  }
  #partners .client-pair .client-item[data-wave-ready="true"]:not(.wave-done):first-child {
    animation-name: press-bounce-skew-v-r1-partners;
  }
  #partners .client-pair .client-item[data-wave-ready="true"]:not(.wave-done):last-child {
    animation-name: press-bounce-skew-v-r3;
  }
  #partners.in-view .client-item[data-wave-ready="true"]:not(.wave-done) {
    animation-play-state: running;
  }
  /* После волны или после первого hover — transition для плавного возврата при снятии .hover-scale-on */
  #partners .client-item[data-wave-ready="true"].wave-done {
    animation: none !important;
    transform: skew(-8deg, 0deg) translateZ(0);
    transition: transform 0.25s ease-in-out;
  }
  #partners .client-pair .client-item[data-wave-ready="true"].wave-done:first-child {
    transform: skew(-8deg, 0deg) translateX(2px) translateZ(0);
  }
  #partners .client-pair .client-item[data-wave-ready="true"].wave-done:last-child {
    transform: skew(-8deg, 0deg) translateX(-22px) translateZ(0);
  }
  /* При наведении волна отменяется (без изменения transform — только остановка анимации) */
  #partners .client-item[data-wave-ready="true"]:hover,
  #partners .client-item[data-wave-ready="true"]:focus-within {
    animation: none !important;
  }
  /* Масштаб при наведении задаётся только классом .hover-scale-on (добавляется JS по mouseenter), а не псевдоклассом :hover.
     Так после пробега волны первый hover по каждому элементу даёт плавную анимацию: «начальное» состояние transition
     всегда — статичный transform (.wave-done), а не слой анимации, от которого браузер мог бы взять неправильный «from». */
  #partners .client-item[data-wave-ready="true"].hover-scale-on {
    animation: none !important;
    transform: skew(-8deg, 0deg) scale(1.08) translateZ(0) !important;
    transition: transform 0.25s ease-in-out;
  }
  #partners .client-pair .client-item[data-wave-ready="true"]:first-child.hover-scale-on {
    transform: skew(-8deg, 0deg) translateX(2px) scale(1.08) translateZ(0) !important;
  }
  #partners .client-pair .client-item[data-wave-ready="true"]:last-child.hover-scale-on {
    transform: skew(-8deg, 0deg) translateX(-22px) scale(1.08) translateZ(0) !important;
  }
  #partners .client-item[data-wave-ready="true"]:active,
  #partners .client-item[data-wave-ready="true"]:hover:active {
    animation: none !important;
    transform: skew(-8deg, 0deg) scale(0.98) !important;
    transition: transform 0.25s ease;
  }
  #partners .client-pair .client-item[data-wave-ready="true"]:first-child:active,
  #partners .client-pair .client-item[data-wave-ready="true"]:first-child:hover:active {
    transform: skew(-8deg, 0deg) translateX(2px) scale(0.98) !important;
  }
  #partners .client-pair .client-item[data-wave-ready="true"]:last-child:active,
  #partners .client-pair .client-item[data-wave-ready="true"]:last-child:hover:active {
    transform: skew(-8deg, 0deg) translateX(-22px) scale(0.98) !important;
  }

  /* Волна в Наши работы — только при загрузке; после наведения или окончания волны не перезапускать */
  #works .ig-item[data-wave-ready="true"]:not(.wave-done):not(.ig-item-horizontal) {
    --wave-scale: 1.05;
    animation: press-bounce-skew-v 1s cubic-bezier(0.33, 1, 0.68, 1) 1 both;
    animation-delay: var(--wave-delay, 0.2s);
    animation-play-state: paused;
    will-change: transform;
  }
  #works .ig-item-horizontal[data-wave-ready="true"]:not(.wave-done) {
    --wave-scale: 1.05;
    animation: press-bounce-skew-v 1s cubic-bezier(0.33, 1, 0.68, 1) 1 both;
    animation-delay: var(--wave-delay, 0.2s);
    animation-play-state: paused;
    will-change: transform;
  }
  #works.in-view .ig-item[data-wave-ready="true"]:not(.wave-done) { animation-play-state: running; }
  /* После волны или наведения — финальное состояние, без анимации */
  #works .ig-item[data-wave-ready="true"].wave-done:not(.ig-item-horizontal) {
    animation: none !important;
    transform: skew(-8deg, 0deg);
  }
  #works .ig-item[data-wave-ready="true"].wave-done.ig-item-horizontal {
    animation: none !important;
    transform: skew(-8deg, 0deg);
  }
  #works .ig-item[data-wave-ready="true"]:hover,
  #works .ig-item[data-wave-ready="true"]:focus-within { animation: none; }
  #works .ig-item[data-wave-ready="true"]:not(.ig-item-horizontal):hover,
  #works .ig-item[data-wave-ready="true"]:not(.ig-item-horizontal).hover-scale-on { transform: skew(-8deg, 0deg) scale(1.08); z-index: 1; box-shadow: none; }
  /* Горизонтальная лента: увеличенный масштаб при hover */
  #works .ig-item-horizontal[data-wave-ready="true"]:hover,
  #works .ig-item-horizontal[data-wave-ready="true"]:focus-within,
  #works .ig-item-horizontal[data-wave-ready="true"].hover-scale-on { transform: skew(-8deg, 0deg) scale(1.08); z-index: 1; }
  #works .ig-item-horizontal[data-wave-ready="true"]:hover video,
  #works .ig-item-horizontal[data-wave-ready="true"]:focus-within video,
  #works .ig-item-horizontal[data-wave-ready="true"].hover-scale-on video { transform: skew(8deg, 0deg) scale(1.4); }
  /* После волны (.wave-done) */
  #works .ig-item-horizontal[data-wave-ready="true"].wave-done:hover,
  #works .ig-item-horizontal[data-wave-ready="true"].wave-done:focus-within,
  #works .ig-item-horizontal[data-wave-ready="true"].wave-done.hover-scale-on { transform: skew(-8deg, 0deg) scale(1.08); z-index: 1; }
  #works .ig-item-horizontal[data-wave-ready="true"].wave-done:hover video,
  #works .ig-item-horizontal[data-wave-ready="true"].wave-done:focus-within video,
  #works .ig-item-horizontal[data-wave-ready="true"].wave-done.hover-scale-on video { transform: skew(8deg, 0deg) scale(1.4); }
  #works .ig-item-horizontal[data-wave-ready="true"].wave-done:active,
  #works .ig-item-horizontal[data-wave-ready="true"].wave-done:hover:active { transform: skew(-8deg, 0deg) scale(0.98); }
  #works .ig-item[data-wave-ready="true"]:active { animation: none; }
  #works .ig-item[data-wave-ready="true"]:not(.ig-item-horizontal):active,
  #works .ig-item[data-wave-ready="true"]:not(.ig-item-horizontal):hover:active { transform: skew(-8deg, 0deg) scale(0.98); }
  #works .ig-item-horizontal[data-wave-ready="true"]:active,
  #works .ig-item-horizontal[data-wave-ready="true"]:hover:active { transform: skew(-8deg, 0deg) scale(0.98); }
}
@media (max-width: 900px) {
  .cards { grid-template-columns: repeat(2, minmax(0,1fr)); }
  /* Секция услуг: до мобильной версии всегда 3×3, без перехода в 2 колонки */
  #services .cards { grid-template-columns: repeat(3, minmax(0,1fr)); }
}
/* Планшет: масштабирование только блока карточек (h2 не трогаем); опорная ширина 940px */
#services .services-cards-scalable {
  display: block;
}
/*
  Планшет (601–900px): визуально как на десктопе.
  1) Сужаем блок карточек (padding-left/right 28px) — освобождаем место по краям.
  2) Первый ряд сдвиг вправо +14px (капельку левее, чем на десктопе), третий влево -14px (капельку правее).
  3) Второй ряд без сдвига — «ёлочка». Без scale на hover — размер карточки не меняется, только подсветка (как в комментарии 1787).
*/
@media (max-width: 900px) and (min-width: 601px) {
  #services .cards {
    padding-left: 28px;
    padding-right: 28px;
  }
  /* Первый ряд — сдвиг вправо (капельку левее, чем на десктопе) */
  #services .cards .card:nth-child(-n+3) {
    transform: skew(-8deg, 0deg) translateX(14px);
  }
  /* Третий ряд — сдвиг влево (капельку правее) */
  #services .cards .card:nth-child(n+7) {
    transform: skew(-8deg, 0deg) translateX(-14px);
  }
  #services .cards .card.card-scale-on:nth-child(-n+3) {
    transform: skew(-8deg, 0deg) translateX(14px);
  }
  #services .cards .card.card-scale-on:nth-child(n+7) {
    transform: skew(-8deg, 0deg) translateX(-14px);
  }
  #services .cards .card:nth-child(-n+3):hover:not(.wave-active),
  #services .cards .card:nth-child(-n+3):focus-within:not(.wave-active) {
    transform: skew(-8deg, 0deg) translateX(14px);
  }
  #services .cards .card:nth-child(n+7):hover:not(.wave-active),
  #services .cards .card:nth-child(n+7):focus-within:not(.wave-active) {
    transform: skew(-8deg, 0deg) translateX(-14px);
  }
  #services .cards .card:nth-child(-n+3):active,
  #services .cards .card:nth-child(-n+3):hover:active,
  #services .cards .card:nth-child(-n+3):focus-within:active {
    transform: skew(-8deg, 0deg) translateX(14px) scale(0.98) !important;
  }
  #services .cards .card:nth-child(n+7):active,
  #services .cards .card:nth-child(n+7):hover:active,
  #services .cards .card:nth-child(n+7):focus-within:active {
    transform: skew(-8deg, 0deg) translateX(-14px) scale(0.98) !important;
  }
  #services .cards .card:nth-child(-n+3).hover-tap-active:not(.wave-active) {
    transform: skew(-8deg, 0deg) translateX(14px);
  }
  #services .cards .card:nth-child(n+7).hover-tap-active:not(.wave-active) {
    transform: skew(-8deg, 0deg) translateX(-14px);
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):hover,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):focus-within {
    transform: skew(-8deg, 0deg) translateX(14px);
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):hover,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):focus-within {
    transform: skew(-8deg, 0deg) translateX(-14px);
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):hover:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):focus-within:active {
    transform: skew(-8deg, 0deg) translateX(14px) scale(0.98) !important;
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):hover:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):focus-within:active {
    transform: skew(-8deg, 0deg) translateX(-14px) scale(0.98) !important;
  }
  /* Волна на планшете: первый ряд +14px, третий -14px */
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3) {
    animation-name: press-bounce-skew-v-r1-left;
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7) {
    animation-name: press-bounce-skew-v-r3-right;
  }
  @keyframes press-bounce-skew-v-r1-left {
    0%   { transform: skew(-8deg, 0deg) translateX(14px) translateY(0) scale(1); }
    40%  { transform: skew(-8deg, 0deg) translateX(14px) translateY(-3px) scale(var(--wave-scale, 1.02)); }
    100% { transform: skew(-8deg, 0deg) translateX(14px) translateY(0) scale(1); }
  }
  @keyframes press-bounce-skew-v-r3-right {
    0%   { transform: skew(-8deg, 0deg) translateX(-14px) translateY(0) scale(1); }
    40%  { transform: skew(-8deg, 0deg) translateX(-14px) translateY(-3px) scale(var(--wave-scale, 1.02)); }
    100% { transform: skew(-8deg, 0deg) translateX(-14px) translateY(0) scale(1); }
  }
  /* Фиксированный размер иконок на планшете — одинаковый у всех карточек */
  #services .cards .card::after {
    width: 72px !important;
    height: 72px !important;
    min-width: 72px;
    min-height: 72px;
    max-width: 72px;
    max-height: 72px;
  }
}
@media (max-width: 601px) {
  #services .services-cards-scalable {
    width: auto;
    max-width: none;
    transform: none;
  }
}
@media (max-width: 600px) {
  .cards {
    grid-template-columns: repeat(2, minmax(0,1fr));
    align-items: stretch; /* на мобилке карточки держим одной высоты */
    gap: 12px; /* уменьшаем отступы на мобильных */
  }
  /* Услуги: одна карта на всю ширину, одинаковые отступы у всех элементов и рядов; высота по контенту */
  #services .cards {
    grid-template-columns: 1fr;
    grid-template-rows: unset;
    height: auto;
    min-height: 0;
    padding-left: var(--gap);
    padding-right: var(--gap);
    justify-items: stretch;
    gap: 16px; /* единый отступ между карточками */
  }
  #services .cards .card {
    max-width: 100%;
    /* без сдвигов рядов — одинаковые отступы у всех */
    transform: skew(-8deg, 0deg);
  }
  #services .cards .card:nth-child(-n+3),
  #services .cards .card:nth-child(n+7) {
    transform: skew(-8deg, 0deg);
  }
  #services .cards .card:hover:not(.wave-active),
  #services .cards .card:focus-within:not(.wave-active),
  #services .cards .card:nth-child(-n+3):hover:not(.wave-active),
  #services .cards .card:nth-child(-n+3):focus-within:not(.wave-active),
  #services .cards .card:nth-child(n+7):hover:not(.wave-active),
  #services .cards .card:nth-child(n+7):focus-within:not(.wave-active) {
    transform: skew(-8deg, 0deg); /* без scale — размер карточки не меняется */
  }
  #services .cards .card:active,
  #services .cards .card:nth-child(-n+3):active,
  #services .cards .card:nth-child(n+7):active {
    transform: skew(-8deg, 0deg) scale(0.98) !important;
  }

  .cards .card {
    min-height: 120px; /* минимальная высота для мобильных */
    height: 120px; /* фиксированная высота на мобильных */
    padding: 16px; /* уменьшаем padding на мобильных */
  }

  /* Фиксированный размер иконок на мобильных — 64px для всех карточек одинаково */
  .cards .card::after {
    width: 64px !important;
    height: 64px !important;
    min-width: 64px !important;
    min-height: 64px !important;
    max-width: 64px !important;
    max-height: 64px !important;
    right: 14px;
    transform: translateY(-50%);
    opacity: 0.25;
  }

  /* Секция услуг: skew у иконок на мобильных, без разницы по рядам */
  #services .cards .card::after {
    transform: translateY(-50%) skew(8deg, 0deg);
  }
  /* Заголовки карточек услуг на мобильной крупнее для читаемости */
  #services .cards .card h3 {
    font-size: clamp(16px, 4vw, 19px);
  }
}

@media (max-width: 600px) and (prefers-reduced-motion: no-preference) {
  #services .cards .card[data-wave-ready="true"],
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3),
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7) {
    animation-name: press-bounce-skew-v;
  }
  #services .cards .card[data-wave-ready="true"]:hover,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):hover,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):hover,
  #services .cards .card[data-wave-ready="true"]:focus-within,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):focus-within,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):focus-within {
    animation: none;
    transform: skew(-8deg, 0deg); /* без scale на мобильной */
  }
  #services .cards .card[data-wave-ready="true"]:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):active {
    animation: none !important;
    transform: skew(-8deg, 0deg) scale(0.98) !important;
  }
}
.card {
  position: relative;
  z-index: 0;
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: 20px;
  padding: 20px;
  transition: box-shadow .25s ease, transform .2s ease;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 0;
  animation: none;
  text-align: left;
}

@media (hover: hover) {
  .card:hover:not(.wave-active),
  .card:focus-within:not(.wave-active) {
    box-shadow: 0 0 12px var(--service-border-color, transparent);
    border-color: var(--service-border-color, var(--card-border));
    transform: scale(1.02);
  }
}

/* Вдавливание на -2% при зажатии (перебивает hover) */
.card:active,
.card:hover:active:not(.wave-active),
.card:focus-within:active:not(.wave-active) {
  transform: scale(0.98);
}

.card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--service-color, rgba(138, 88, 255, 0.5)); /* цвет круговой подсветки - используем цвет услуги */
  -webkit-mask: radial-gradient(25rem 25rem at var(--x) var(--y), #000 1%, transparent 50%);
  mask: radial-gradient(25rem 25rem at var(--x) var(--y), #000 1%, transparent 50%);
  opacity: var(--opacity, 0);
  pointer-events: none;
  transition: opacity 0.25s ease-in-out; /* синхронно с border-glow — 250ms */
  z-index: -1; /* подсветка лежит под контентом */
}

/* Усиливаем цвет подсветки для карточек услуг */
.cards .card::before {
  background: var(--service-color, rgba(138, 88, 255, 0.5));
  opacity: calc(var(--opacity, 0) * 2); /* увеличиваем интенсивность подсветки при наведении */
}

.card * {
  position: relative;
  z-index: 1; /* контент поверх подсветки */
}

/* Фоновые иконки для карточек услуг: фиксированный размер — все иконки одинаковые на всех масштабах */
.cards .card::after {
  content: '';
  position: absolute;
  right: 18px;
  top: 50%;
  transform: translateY(-50%);
  width: 99px;
  height: 99px;
  min-width: 99px;
  min-height: 99px;
  max-width: 99px;
  max-height: 99px;
  opacity: 0.25;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  pointer-events: none;
  z-index: 0; /* иконка за текстом */
  transition: none; /* Отключаем transition для управления через animation */
}

/* Применяем анимацию иконки через классы — синхронно с загоранием/потуханием границы (250ms) */
.cards .card.icon-animating::after {
  animation: icon-hover 0.25s ease-in-out forwards;
}

.cards .card.icon-animating-out::after {
  animation: icon-hover-out 0.25s ease-in-out forwards;
}

/* В секции услуг иконка учитывает skew карточки */
#services .cards .card.icon-animating::after {
  animation: icon-hover-skew 0.25s ease-in-out forwards;
}
#services .cards .card.icon-animating-out::after {
  animation: icon-hover-out-skew 0.25s ease-in-out forwards;
}

/* Цвета для каждой услуги - по столбикам: фиолетовый, зеленый, красный/оранжевый */
/* Столбик 1: фиолетовые оттенки */
.cards .card[data-service-icon="analysis"] {
  --service-color: rgba(106, 17, 203, 0.4); /* основной фиолетовый #6a11cb */
  --service-border-color: rgba(106, 17, 203, 0.8); /* Яркий фиолетовый для границы */
}

.cards .card[data-service-icon="strategy"] {
  --service-color: rgba(139, 92, 246, 0.4); /* фиолетовый #8b5cf6 */
  --service-border-color: rgba(139, 92, 246, 0.8); /* Яркий фиолетовый для границы */
}

.cards .card[data-service-icon="ads"] {
  --service-color: rgba(176, 134, 249, 0.4); /* сиреневый #b086f9 */
  --service-border-color: rgba(176, 134, 249, 0.8); /* Яркий сиреневый для границы */
}

/* Столбик 2: зеленые оттенки */
.cards .card[data-service-icon="content"] {
  --service-color: rgba(34, 197, 94, 0.4); /* зеленый #22c55e */
  --service-border-color: rgba(34, 197, 94, 0.8); /* Яркий зеленый для границы */
}

.cards .card[data-service-icon="social"] {
  --service-color: rgba(101, 217, 79, 0.4); /* переходный зеленый между content и community #65d94f */
  --service-border-color: rgba(101, 217, 79, 0.8); /* Яркий переходный зеленый для границы */
}

.cards .card[data-service-icon="community"] {
  --service-color: rgba(163, 230, 53, 0.4); /* светлый зеленый с желтоватым оттенком #a3e635 */
  --service-border-color: rgba(163, 230, 53, 0.8); /* Яркий светлый зеленый с желтоватым оттенком для границы */
}

/* Столбик 3: красные/оранжевые оттенки */
.cards .card[data-service-icon="video"] {
  --service-color: rgba(158, 26, 71, 0.4); /* ярко бордовый, слегка фиолетовый #9e1a47 */
  --service-border-color: rgba(158, 26, 71, 0.85); /* граница и подсветка */
}

.cards .card[data-service-icon="design"] {
  --service-color: rgba(220, 38, 38, 0.4); /* красный #dc2626 */
  --service-border-color: rgba(220, 38, 38, 0.8); /* Яркий красный для границы */
}

.cards .card[data-service-icon="web"] {
  --service-color: rgba(251, 146, 60, 0.4); /* оранжевый #fb923c */
  --service-border-color: rgba(251, 146, 60, 0.8); /* Яркий оранжевый для границы */
}

/* Иконки для каждого типа услуги с цветами по столбикам */
/* Столбик 1: фиолетовые оттенки */
.cards .card[data-service-icon="analysis"]::after {
  background-image: url("./assets/images/icons/Icon_Analysis.webp");
  filter: brightness(0) saturate(100%) invert(30%) sepia(95%) saturate(2000%) hue-rotate(240deg) brightness(0.8) contrast(1.1); /* основной фиолетовый #6a11cb */
}

.cards .card[data-service-icon="strategy"]::after {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%238b5cf6'%3E%3Cpath d='M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z'/%3E%3C/svg%3E");
}

.cards .card[data-service-icon="ads"]::after {
  background-image: url("./assets/images/icons/Icon_Target.webp");
  filter: brightness(0) saturate(100%) invert(42%) sepia(95%) saturate(2000%) hue-rotate(250deg) brightness(0.85) contrast(1.1); /* сиреневый #b086f9 */
}

/* Столбик 2: зеленые оттенки */
.cards .card[data-service-icon="content"]::after {
  background-image: url("./assets/images/icons/Icon_Content.webp");
  filter: brightness(0) saturate(100%) invert(60%) sepia(90%) saturate(2000%) hue-rotate(100deg) brightness(0.9) contrast(1.1); /* зеленый #22c55e */
}

.cards .card[data-service-icon="social"]::after {
  background-image: url("./assets/images/icons/Icon_SocialNetworks.webp");
  filter: brightness(0) saturate(100%) invert(63%) sepia(93%) saturate(2000%) hue-rotate(72deg) brightness(1.05) contrast(1.08); /* переходный зеленый между content и community #65d94f */
}

.cards .card[data-service-icon="community"]::after {
  background-image: url("./assets/images/icons/Icon_ComunityDev.webp");
  filter: brightness(0) saturate(100%) invert(65%) sepia(95%) saturate(2000%) hue-rotate(75deg) brightness(1.1) contrast(1.05); /* светлый зеленый с желтоватым оттенком #a3e635 */
  width: 117px; /* Уменьшено на 10% (было 130px) */
  height: 117px; /* Уменьшено на 10% (было 130px) */
}

/* Столбик 3: красные/оранжевые оттенки */
.cards .card[data-service-icon="video"]::after {
  background-image: url("./assets/images/icons/Icon_clapper.webp");
  filter: brightness(0) saturate(100%) invert(22%) sepia(95%) saturate(2000%) hue-rotate(328deg) brightness(0.9) contrast(1.1); /* ярко бордовый, слегка фиолетовый #9e1a47 */
}

.cards .card[data-service-icon="design"]::after {
  background-image: url("./assets/images/icons/Icon_Design.webp");
  filter: brightness(0) saturate(100%) invert(25%) sepia(95%) saturate(2000%) hue-rotate(350deg) brightness(0.85) contrast(1.1); /* красный #dc2626 */
}

.cards .card[data-service-icon="web"]::after {
  background-image: url("./assets/images/icons/Icon_SoftwareDev.webp");
  filter: brightness(0) saturate(100%) invert(60%) sepia(95%) saturate(2000%) hue-rotate(-15deg) brightness(1.1) contrast(1.05); /* оранжевый #fb923c */
}

/* Скрываем описание по умолчанию; раскрытие только при hover */
.cards .card p {
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  margin-top: 0;
  margin-bottom: 0;
  visibility: hidden;
  transition: max-height .18s ease, opacity .18s ease, margin-top .18s ease, visibility 0s linear .18s;
}

@media (min-width: 901px) {
  .cards h3 {
    font-size: 20px;
  }

  .cards .card {
    min-height: 140px;
    height: 140px;
  }
}

@media (max-width: 600px) {
  .cards h3 {
    font-size: 13px;
    line-height: 1.3;
    margin-bottom: 4px;
  }

  .cards .card p {
    font-size: 11px;
    line-height: 1.4;
    display: none; /* На мобильных описание в popup */
  }
}

/* Попап «Сделано Александром Захаровым» по клику на «:» в футере */
.author-popup {
  position: fixed;
  inset: 0;
  z-index: 10001;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  box-sizing: border-box;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.25s ease;
}
.author-popup:not([hidden]) {
  pointer-events: auto;
  opacity: 1;
}
.author-popup[hidden] {
  display: none !important;
}
.author-popup-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
  cursor: pointer;
}
.author-popup-wrapper {
  position: relative;
  z-index: 1;
  width: 100%;
  max-width: min(90vw, 720px);
}
.author-popup-container {
  position: relative;
  background: var(--bg-2);
  border: 1px solid var(--card-border);
  border-radius: 20px;
  padding: 32px 28px 28px;
  box-sizing: border-box;
}
.author-popup-close {
  position: absolute;
  right: 12px;
  top: 12px;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 1px solid var(--card-border);
  background: var(--card);
  color: var(--text);
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s ease, border-color 0.2s ease, transform 0.2s ease;
}
.author-popup-close:hover {
  background: rgba(255, 255, 255, 0.12);
  transform: scale(1.08);
}
.author-popup-text {
  margin: 0;
  padding-right: 40px;
  font-family: var(--secondary-font);
  font-size: 15px;
  line-height: 1.55;
  max-height: 70vh;
  overflow-y: auto;
  color: var(--text);
}
.footer-author-colon {
  cursor: pointer;
  text-decoration: none;
  opacity: 0.9;
  transition: opacity 0.2s ease;
}
.footer-author-colon:hover {
  opacity: 1;
}
[data-theme="light"] .author-popup-overlay {
  background: rgba(255, 255, 255, 0.75);
}
[data-theme="light"] .author-popup-container {
  background: #ffffff;
  border-color: rgba(0, 0, 0, 0.12);
}
[data-theme="light"] .author-popup-close {
  background: rgba(255, 255, 255, 0.95);
  border-color: rgba(0, 0, 0, 0.2);
  color: #1d1d1f;
}
[data-theme="light"] .author-popup-close:hover {
  background: #fff;
  border-color: rgba(0, 0, 0, 0.35);
}
[data-theme="light"] .author-popup-text {
  color: #1d1d1f;
}

/* Popup для описания услуг на мобильных */
.service-popup {
  position: fixed;
  inset: 0;
  z-index: 10000;
  display: none;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

.service-popup.active {
  display: flex;
  opacity: 1;
  pointer-events: auto;
}

.service-popup-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
}

.service-popup-wrapper {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  width: fit-content;
  max-width: 100%;
}

/* Обёртка контейнера + стрелок: контейнер по центру, стрелки позиционируются относительно inner (как modal-arrow) */
.service-popup-inner {
  position: relative;
  width: fit-content;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.service-popup-container {
  position: relative;
  width: 90%;
  max-width: 400px;
  background: #121214;
  border: 2px solid var(--card-border);
  border-radius: 20px;
  padding: 24px 24px 24px;
  transform: scale(0.9);
  transition: transform 0.3s ease;
  max-height: 90vh;
  overflow-y: auto;
  overflow-x: hidden;
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
}

/* Обёртка текста и видео: на мобильных просто блок, на десктопе/планшете — один прокручиваемый див */
.service-popup-scroll {
  display: flex;
  flex-direction: column;
  min-height: 0;
}
/* Планшет и десктоп: попап увеличенной высоты (строго не заходит за края экрана), прокрутка текста и видео в одном диве */
@media (min-width: 601px) {
  .service-popup-container {
    width: 900px;
    max-width: 900px;
    height: min(960px, 94vh);
    max-height: 94vh;
    min-height: 600px;
    padding: 48px 48px 0;
    overflow: hidden;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    gap: 0;
  }
  /* Один прокручиваемый блок: текст + видео вместе */
  .service-popup-scroll {
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto;
    overflow-x: hidden;
    display: flex;
    flex-direction: column;
  }
  .service-popup-wrapper {
    margin: 24px 0;
  }
  .service-popup-inner {
    width: 900px;
    position: relative;
  }
  /* body, content и text-block растягиваются до нижней границы контейнера */
  .service-popup-body {
    flex: 1 1 auto;
    min-height: 0;
    display: flex;
    flex-direction: column;
  }
  .service-popup-content {
    flex: 1 1 auto;
    min-height: 0;
    display: flex;
    flex-direction: column;
  }
  .service-popup-text-block {
    flex: 1 1 auto;
    min-height: 0;
    position: relative;
    display: flex;
    flex-direction: column;
    padding-bottom: 32px; /* запас снизу после видео на десктопе/планшете */
  }
  /* Стрелки: фиксированная позиция как у modal-arrow (left/right -112px, top 50%) */
  .service-popup-navigation {
    position: absolute;
    left: -112px;
    right: -112px;
    top: 50%;
    transform: translateY(-50%);
    margin-top: 0;
    display: flex;
    justify-content: space-between;
    pointer-events: none;
    gap: 0;
    width: auto;
    height: 0;
    overflow: visible;
  }
  .service-popup-navigation .service-popup-arrow {
    pointer-events: auto;
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
  }
  .service-popup-navigation .service-popup-prev {
    left: 0;
    right: auto;
  }
  .service-popup-navigation .service-popup-next {
    left: auto;
    right: 0;
  }
  /* Размер и стиль как у modal-arrow: 64px круг */
  .service-popup-arrow {
    position: absolute;
    width: 64px;
    height: 64px;
    min-width: 64px;
    min-height: 64px;
    border: none;
    border-radius: 50%;
    background: transparent;
    color: transparent;
    font-size: 0;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    transition: all 0.2s ease;
    -webkit-tap-highlight-color: transparent;
  }
  .service-popup-arrow::before {
    content: '';
    position: absolute;
    left: 50%;
    top: 50%;
    width: 22px;
    height: 22px;
    margin: -11px 0 0 -11px;
    background-image: url("./assets/images/icons/icon_arrow.png");
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    filter: brightness(0) invert(1);
    transition: transform 0.2s ease;
  }
  .service-popup-prev::before { transform: rotate(-90deg); }
  .service-popup-next::before { transform: rotate(90deg); }
  .service-popup-arrow:hover {
    background: transparent;
    border-color: transparent;
    transform: translateY(-50%) scale(var(--arrow-hover-scale));
  }
  .service-popup-arrow:active {
    background: transparent;
    border-color: transparent;
    transform: translateY(-50%) scale(var(--arrow-active-scale));
  }
  .service-popup-navigation .service-popup-prev:hover {
    transform: translateY(-50%) scale(var(--arrow-hover-scale));
  }
  .service-popup-navigation .service-popup-next:hover {
    transform: translateY(-50%) scale(var(--arrow-hover-scale));
  }
  .service-popup-navigation .service-popup-prev:active {
    transform: translateY(-50%) scale(var(--arrow-active-scale));
  }
  .service-popup-navigation .service-popup-next:active {
    transform: translateY(-50%) scale(var(--arrow-active-scale));
  }
}

/* Планшет: увеличенная высота, строго не заходит за края экрана */
@media (min-width: 601px) and (max-width: 900px) {
  .service-popup-container {
    width: min(900px, 94vw);
    max-width: min(900px, 94vw);
    height: min(920px, 94vh);
    max-height: 94vh;
    min-height: 560px;
    overflow-y: auto;
    overflow-x: hidden;
  }
  .service-popup-wrapper {
    margin: 24px 0;
    align-items: flex-start;
  }
  .service-popup-inner {
    width: min(900px, 94vw);
  }
  .service-popup-navigation {
    left: -90px;
    right: -90px;
  }
  .service-popup-navigation .service-popup-prev {
    left: 0;
  }
  .service-popup-navigation .service-popup-next {
    right: 0;
  }
  .service-popup-arrow {
    width: 56px;
    height: 56px;
    min-width: 56px;
    min-height: 56px;
  }
}

/* Мобильная версия попапа: ширина под экран, расположение как до большого сдвига */
@media (max-width: 600px) {
  .service-popup-wrapper {
    width: 100%;
    max-width: none;
    margin: 0;
    padding: 0 12px;
    box-sizing: border-box;
    align-items: center;
  }

  .service-popup-inner {
    width: 100%;
    max-width: none;
  }

  /* Кнопка закрытия — ровно над верхней границей попапа (32px кнопка + 8px зазор) */
  .service-popup-close {
    width: 32px !important;
    height: 32px !important;
    min-width: 32px !important;
    min-height: 32px !important;
    max-width: 32px !important;
    max-height: 32px !important;
    box-sizing: border-box !important;
    border-radius: 50% !important;
    border-width: 1px !important;
    top: -40px; /* ровно над границей верхней попапа */
    font-size: 16px;
  }

  /* Стрелки — абсолютно под окном попапа, не в потоке, чтобы не сдвигать попап */
  .service-popup-navigation {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    margin-top: 8px;
    flex-shrink: 0;
    display: flex;
    justify-content: center;
    gap: 32px;
  }

  .service-popup-container {
    width: 100%;
    max-width: none;
    max-height: 85vh;
    padding: 24px 20px 24px;
    overflow-y: auto;
    box-sizing: border-box;
  }

  .service-popup-body {
    flex: 1;
    min-height: 100px;
  }
  
  .service-popup-content {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0;
    margin-bottom: 24px; /* отступ снизу */
    padding-bottom: 24px; /* падинг снизу */
    min-height: 50vh; /* увеличиваем высоту дива с контентом */
  }
  
  .service-popup-text-block {
    position: relative;
    flex: 0 1 auto;
    min-height: 0;
    height: auto;
    padding-bottom: 24px; /* запас снизу после видео на мобильной */
  }
  
  .service-popup-icon {
    position: absolute;
    left: 50%;
    top: 24px;
    transform: translate(-50%, 0);
  }
  
  .service-popup-title {
    flex-shrink: 0;
  }
  
  .service-popup-text {
    flex: 1 1 auto;
    min-height: 0;
    margin: 0;
  }
  .service-popup-text-content {
    padding-right: 8px;
  }
  
}


.service-popup.active .service-popup-container {
  transform: scale(1);
}

/* Крестик закрытия — привязан над правым верхним углом контейнера */
.service-popup-close {
  position: absolute;
  right: 0;
  top: -48px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 1px solid rgba(255, 255, 255, 0.25);
  background: rgba(20, 20, 22, 0.95);
  color: #fff;
  font-size: 22px;
  line-height: 1;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  z-index: 2;
}

.service-popup-close:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: scale(1.1);
}

/* Блок текста: иконка по центру именно блока .service-popup-text */
.service-popup-body {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
}
.service-popup-content {
  position: relative;
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
}
.service-popup-text-block {
  position: relative;
  flex: 0 1 auto;
  min-height: 0;
  height: auto;
  padding-bottom: 24px; /* запас снизу после видео */
}

.service-popup-text {
  position: relative;
  margin: 0;
}

/* Иконка услуги: фиксированное расстояние от нижней границы заголовка (h3.service-popup-title).
   Блок .service-popup-text идёт сразу под заголовком, поэтому top в px задаёт отступ от низа хедера. */
.service-popup-icon {
  position: absolute;
  left: 50%;
  top: 24px;
  transform: translate(-50%, 0);
  width: 128px;
  height: 128px;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  opacity: 0.3;
  pointer-events: none;
}

.service-popup-title {
  font-family: var(--primary-font);
  font-size: 18px;
  margin: 0 0 12px;
  padding-right: 24px;
  line-height: 1.3;
  text-align: center;
}

.service-popup-text-content {
  font-size: 14px;
  line-height: 1.5;
  color: var(--muted);
  margin: 0;
  text-align: center;
}

/* Развёрнутый текст в попапе: параграфы, списки, выделения */
.service-popup-text-content p {
  margin: 0 0 0.75em;
  text-align: left;
}
.service-popup-text-content p:first-child {
  min-height: 3em; /* минимум 2 строки при line-height 1.5; при большем контенте блок расширяется */
}
.service-popup-text-content p:last-child {
  margin-bottom: 0;
  min-height: 3em; /* минимум 2 строки; при большем контенте блок расширяется */
}
.service-popup-text-content ul {
  margin: 0.5em 0 0.75em;
  padding-left: 1.25em;
  text-align: left;
  min-height: 9em; /* минимум 6 строк; при большем контенте блок расширяется */
}
.service-popup-text-content li {
  margin-bottom: 0.35em;
}
.service-popup-text-content strong {
  color: inherit;
  font-weight: 600;
}
.service-popup-text-content em {
  font-style: italic;
}

/* Десктоп: текст попапа как в параграфах и хедерах сайта — крупнее и читаемее */
@media (min-width: 901px) {
  .service-popup-title {
    font-size: clamp(22px, 2.2vw, 26px);
    line-height: 1.35;
    margin-bottom: 16px;
  }
  .service-popup-text-content,
  .service-popup-text-content p,
  .service-popup-text-content ul,
  .service-popup-text-content li {
    font-size: 18px;
    line-height: 1.6;
  }
  .service-popup-text-content ul {
    margin: 0.6em 0 0.9em;
    padding-left: 1.35em;
    min-height: 9.6em; /* минимум 6 строк на десктопе; при большем контенте расширяется */
  }
  .service-popup-text-content li {
    margin-bottom: 0.45em;
  }
  .service-popup-text-content p {
    margin-bottom: 0.9em;
  }
  .service-popup-text-content p:first-child {
    min-height: 3.2em; /* минимум 2 строки на десктопе; при большем контенте расширяется */
  }
  .service-popup-text-content p:last-child {
    min-height: 3.2em; /* минимум 2 строки на десктопе; при большем контенте расширяется */
  }
}

/* Инлайн-видео под текстом в попапе: тот же AdviralPlayer, что в «Наши работы» (класс video-modal-content) */
.service-popup-inline-video {
  flex-shrink: 0;
  width: 100%;
  max-width: 640px;
  margin: 20px auto 0;
  border-radius: 12px;
  overflow: hidden;
  background: rgba(0,0,0,.4);
  position: relative;
  aspect-ratio: 16 / 9;
}
.service-popup-inline-video.video-modal-content {
  max-width: 640px;
  width: 100%;
  padding-bottom: 0;
}
.service-popup-inline-video-el {
  display: block;
  width: 100%;
  height: auto;
  aspect-ratio: 16 / 9;
  object-fit: contain;
  background: #000;
}

/* Плейсхолдер: видео загружается только по клику */
.service-popup-inline-video-placeholder {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,.5);
  cursor: pointer;
  z-index: 2;
  transition: background 0.2s ease;
}
.service-popup-inline-video-placeholder:hover {
  background: rgba(0,0,0,.35);
}
.service-popup-inline-video-play-icon {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: 2px solid rgba(255,255,255,.5);
  background: rgba(255,255,255,.15);
  color: #fff;
  font-size: 18px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding-left: 4px;
  transition: transform 0.2s ease;
}
.service-popup-inline-video-placeholder:hover .service-popup-inline-video-play-icon {
  background: rgba(255,255,255,.25);
  transform: scale(1.05);
}
.service-popup-inline-video-placeholder[hidden] {
  display: none !important;
}

/* Навигационные стрелки под окном попапа */
.service-popup-navigation {
  flex-shrink: 0;
  margin-top: 20px;
  display: flex;
  gap: 32px;
  align-items: center;
  justify-content: center;
}

.service-popup-arrow {
  width: 32px;
  height: 32px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  background: transparent;
  color: transparent;
  font-size: 0;
  line-height: 1;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  -webkit-tap-highlight-color: transparent;
  position: relative;
}
.service-popup-arrow::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  width: 14px;
  height: 14px;
  margin: -7px 0 0 -7px;
  background-image: url("./assets/images/icons/icon_arrow.png");
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  filter: brightness(0) invert(1);
  transition: transform 0.2s ease;
}
.service-popup-prev::before { transform: rotate(-90deg); }
.service-popup-next::before { transform: rotate(90deg); }
/* Та же анимация вдавливания, что у ig-arrow и modal-arrow (--arrow-hover-scale / --arrow-active-scale) */
.service-popup-arrow:hover {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.4);
  transform: scale(var(--arrow-hover-scale));
}
.service-popup-arrow:active {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.4);
  transform: scale(var(--arrow-active-scale));
}

/* Цветная обводка для popup в зависимости от типа услуги */
.service-popup-container[data-service-type] {
  border-color: var(--service-border-color, var(--card-border));
  box-shadow: none;
}

/* Раскрытие текста по ховеру только на десктопе; на планшете/мобильном — по тапу (.hover-tap-active) */
@media (hover: hover) and (pointer: fine) and (min-width: 1025px) {
  .cards .card:hover h3 {
    max-height: 0;
    opacity: 0;
    margin: 0;
    overflow: hidden;
    visibility: hidden;
    transition: max-height .18s ease, opacity .18s ease, margin .18s ease, visibility 0s linear .18s;
  }

  .cards .card:hover p {
    max-height: 120px;
    opacity: 1;
    margin-top: 0;
    visibility: visible;
    transition: max-height .18s ease, opacity .18s ease, margin-top .18s ease, visibility 0s 0s;
  }
}

/* =========================
  Работы: лента как в Instagram
========================= */
.ig-slider {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  max-width: calc(240px * 5 + 64px); /* даем видимой области чуть большей ширины */
  margin: 0 auto; /* центрируем слайдер */
}

/* При наведении элемент увеличивается — верх/низ не обрезать, не скрывать за границами секции */
#works {
  overflow: visible;
}
#works .ig-slider {
  overflow: visible;
}

/* Обёртка лент: уменьшенная высота во всех версиях.
   z-index: 1 — чтобы нижняя (горизонтальная) лента не перекрывалась следующей секцией и клики доходили до видео. */
.feeds-vert-horis-wrapper {
  width: 100%;
  aspect-ratio: 505 / 1360;
  max-height: min(240px, 38vw);
  position: relative;
  z-index: 1;
  overflow: visible; /* стрелки и hover не обрезать */
  container-type: inline-size;
  margin-top: 24px;
}

/* Планшет: высота блока лент уменьшена */
@media (min-width: 769px) and (max-width: 1024px) {
  #works .container {
    min-height: 360px;
  }
  .feeds-vert-horis-wrapper {
    min-height: 300px;
    max-height: min(380px, 50vw);
    aspect-ratio: 505 / 1360;
  }
}
.FeedsVertHoris {
  position: absolute;
  left: 0;
  top: 0;
  width: 1360px;
  height: 505px;
  transform-origin: left top;
  transform: scale(min(1, 100cqw / 1360px));
  overflow: visible;
}
/* Одинаковая видимая зона для обеих лент: ширина контента между стрелками */
.FeedsVertHoris .ig-slider {
  max-width: 1200px;
  margin: 0 auto;
}
.FeedsVertHoris .works-vertical-row .ig-slider {
  overflow: visible;
}
.FeedsVertHoris .container-horizontal .ig-slider {
  overflow: visible; /* при наведении и увеличении карточки края не обрезаются */
}
.FeedsVertHoris .ig-strip {
  max-width: 1200px;
  margin: 0 auto;
}

/* Мобильная версия: без даунскейла, ленты прокручиваются горизонтально, масштаб 50%.
   Фикс обрезания низа секции «Наши работы» при ширине 545–768px:
   — max-height: none у обёртки (раньше 65vh), чтобы низ не обрезался;
   — margin-bottom: -8vw у FeedsVertHoris (раньше -30vw), чтобы следующий блок не перекрывал низ;
   — увеличен padding-bottom у #works.section и min-height у обёртки. */
@media (max-width: 768px) {
  .feeds-vert-horis-wrapper {
    aspect-ratio: auto;
    max-height: none; /* не ограничиваем высоту — низ секции не обрезается (545–768px) */
    min-height: 200px;
    height: auto;
    container-type: normal;
    overflow-x: hidden;
    overflow-y: visible;
    display: flex;
    justify-content: center;
  }
  .FeedsVertHoris {
    position: relative;
    width: calc(100% / 0.7);
    max-width: calc(100vw / 0.7);
    height: auto;
    transform: scale(0.7);
    transform-origin: top center;
    /* небольшой отрицательный margin, чтобы следующий блок не перекрывал низ секции */
    margin-bottom: -8vw;
  }
  .FeedsVertHoris .ig-slider {
    max-width: 100%;
    overflow: visible;
  }
  .FeedsVertHoris .container-horizontal .ig-slider {
    overflow: visible;
  }
  .FeedsVertHoris .ig-strip {
    max-width: 100%;
    margin: 0;
    overflow-x: auto;
    scroll-snap-type: x proximity;
    scroll-padding-inline: var(--gap);
  }
  .FeedsVertHoris .ig-strip .ig-item {
    scroll-snap-align: center;
  }
  /* отступ снизу секции, чтобы низ был виден и не перекрывался */
  #works.section {
    padding-bottom: clamp(32px, 5vw, 56px);
  }
}

@media (max-width: 1024px) {
  .ig-slider {
    max-width: 100%;
  }

  .ig-arrow.prev {
    left: -76px; /* Симметрично правой стрелке */
  }

  .ig-arrow.next {
    right: -76px; /* Симметрично левой стрелке */
  }
}

@media (max-width: 768px) {
  .ig-arrow {
    display: none;
  }

  .ig-slider {
    padding-inline: 0;
  }
}

/* Фейд убран - псевдоэлементы скрыты */
.ig-slider::before,
.ig-slider::after {
  display: none;
}

/* Выносим стрелки вне внутреннего контейнера */
#works > div.container {
  position: relative;
  overflow: visible; /* при наведении увеличенные элементы не обрезать */
}

@media (max-width: 768px) {
  /* Стрелки лент не показываем в мобильной версии */
  #works .ig-arrow {
    display: none !important;
  }
}

/* Только на маленьких экранах прячем лишнее пространство под лентой; на планшете лента видна на полную высоту */
@media (max-width: 480px) {
  #works > div {
    overflow: hidden;
  }
}

/* Общий базовый стиль для всех стрелок (ленты и плеер) */
.ig-arrow,
.modal-arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 64px; /* Фиксированная ширина для зоны клика */
  height: 64px; /* Фиксированная высота для зоны клика */
  border: none;
  border-radius: 50%; /* Круглая зона клика */
  background: transparent; /* Прозрачный фон */
  -webkit-backdrop-filter: none;
  backdrop-filter: none;
  color: #fff;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  z-index: 10;
  font-size: 3em;
  padding: 0;
  line-height: 1;
  text-align: center;
}
/* Стрелка — icon_arrow.png по центру круга (иконка по умолчанию чёрная, смотрит вверх) */
#works .ig-arrow {
  font-size: 0;
}
#works .ig-arrow::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  width: 22px;
  height: 22px;
  margin: -11px 0 0 -11px;
  background-image: url("./assets/images/icons/icon_arrow.png");
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  filter: brightness(0) invert(1);
  transition: transform 0.2s ease;
}
#works .ig-arrow.next::before {
  transform: rotate(90deg);
}
#works .ig-arrow.prev::before {
  transform: rotate(-90deg);
}

/* Специфичное позиционирование для стрелок лент */
.ig-arrow {
  transform: translateY(-50%) translateY(40px); /* смещаем чуть ниже центра */
}

@media (hover: hover) {
  .ig-arrow:hover {
    transform: translateY(-50%) translateY(40px) scale(var(--arrow-hover-scale));
  }
}

.ig-arrow:active {
  transform: translateY(-50%) translateY(40px) scale(var(--arrow-active-scale));
}

/* Убеждаемся, что все стрелки в секции works имеют контекст позиционирования */
#works .container {
  position: relative;
}

/* Вертикальная лента: стрелки центрируются по своей ленте (контекст — works-vertical-row) */
#works .works-vertical-row {
  position: relative;
  overflow: visible; /* при наведении края карточек не обрезать */
}

/* Стрелки вертикальной ленты — по центру по оси Y относительно works-vertical-row, ось X не трогаем */
#works .works-vertical-row .ig-arrow {
  top: 50%;
  transform: translateY(-50%);
}
@media (hover: hover) {
  #works .works-vertical-row .ig-arrow:hover {
    transform: translateY(-50%) scale(var(--arrow-hover-scale));
  }
}
#works .works-vertical-row .ig-arrow:active {
  transform: translateY(-50%) scale(var(--arrow-active-scale));
}

/* Стрелки должны быть на одном уровне относительно ленты */
#works .ig-slider {
  position: relative;
}

.ig-arrow.prev {
  left: -40px; /* Симметрично правой стрелке */
}

.ig-arrow.next {
  right: -40px; /* Симметрично левой стрелке */
}

/* Стрелки для горизонтальной ленты: по центру горизонтальной ig-strip по оси Y, ось X без изменений */
/* Границы лент пересекаются по одной линии (margin 0), а не накладываются; визуальный зазор 18px — за счёт паддинга 9+9 */
#works .container:not(.container-horizontal) .ig-strip {
  padding-bottom: 0;
}
#works .works-vertical-row > .ig-slider > .ig-strip {
  padding-top: 18px;
  padding-bottom: 9px;  /* нижняя граница ленты идёт до линии пересечения с горизонтальной */
  padding-left: 56px;   /* внутренний отступ слева */
}
/* Вертикальная лента — высота карточек уменьшена (340px), чтобы уравнять с горизонтальной по сумме высот */
#works .works-vertical-row .ig-item {
  width: calc(340px * 9 / 16);
  height: 340px;
  flex: 0 0 auto;
  min-width: 0;
  min-height: 0;
}
#works .container-horizontal {
  margin-top: 0; /* границы соприкасаются, без наложения */
  position: relative;
  display: flex;
  align-items: stretch;
  justify-content: center;
  overflow: visible;
  min-height: 178px; /* под высоту горизонтальных карточек 159px + отступы */
  padding-left: 0px;
}
#works .container-horizontal .ig-arrow {
  align-self: center;
}
#works .container-horizontal .ig-slider {
  display: flex;
  align-items: stretch;
  flex: 1;
  min-height: 0;
}
#works .container-horizontal .ig-strip-scroll {
  display: flex;
  align-items: stretch;
  flex: 1;
  min-height: 0;
}
#works .container-horizontal .ig-strip {
  padding: 0;
  padding-left: 16px;
  min-height: 175px; /* под высоту карточек 159px, чтобы края не обрезались */
  align-self: stretch;
  align-items: center;
  box-sizing: border-box;
}

/* Горизонтальные стрелки: посередине горизонтальной ленты по оси Y, ось X как у остальных */
#works .ig-arrow-horizontal,
.container-horizontal .ig-arrow {
  transform: translateY(-50%); /* строго по центру высоты своей ленты */
  top: 50%;
}

@media (hover: hover) {
  .container-horizontal .ig-arrow:hover,
  #works .ig-arrow-horizontal:hover {
    transform: translateY(-50%) scale(var(--arrow-hover-scale));
  }
}

.container-horizontal .ig-arrow:active,
#works .ig-arrow-horizontal:active {
  transform: translateY(-50%) scale(var(--arrow-active-scale));
}

/* Настраиваем контейнер под горизонтальный скролл */
.ig-strip {
  display: flex;
  gap: 18px; /* Увеличено расстояние между элементами */
  overflow-x: auto; /* включаем горизонтальную прокрутку */
  overflow-y: hidden;
  padding: 18px 32px 12px; /* Уменьшен нижний паддинг для меньшего расстояния между лентами */
  scroll-snap-type: none; /* отключено - стрелки просто прокручивают ленту */
  scroll-padding: 0 24px;
  max-width: 100%;
  margin: 0 auto;
  cursor: grab;
  -webkit-user-select: none;
  user-select: none;
  will-change: scroll-position;
}
.ig-strip::-webkit-scrollbar { display: none; }
@supports (scrollbar-width: none) {
  .ig-strip { scrollbar-width: none; }
}

/* При наведении верх/низ не обрезать; overflow-x: auto сохраняем для горизонтальной прокрутки */
#works .ig-strip {
  overflow-y: visible;
}

/* Горизонтальная лента: скролл на обёртке, лента с overflow: visible — при scale(1.05) рамки не обрезаются */
.ig-strip-scroll {
  overflow-x: auto;
  overflow-y: visible;
  scroll-padding: 0 24px;
  max-width: 100%;
  margin: 0 auto;
  cursor: grab;
  -webkit-user-select: none;
  user-select: none;
  will-change: scroll-position;
}
.ig-strip-scroll::-webkit-scrollbar { display: none; }
@supports (scrollbar-width: none) {
  .ig-strip-scroll { scrollbar-width: none; }
}
#works .ig-strip-scroll > .ig-strip {
  overflow: visible;
  overflow-x: visible;
  cursor: grab;
}

@media (max-width: 900px) {
  .ig-strip {
    padding: 16px 24px 10px; /* Уменьшен нижний паддинг */
    scroll-padding: 0 18px;
  }
}

@media (max-width: 768px) {
  .ig-strip {
    padding: 14px 16px 10px; /* Уменьшен нижний паддинг */
    scroll-padding: 0 14px;
  }

  .ig-item {
    width: calc(240px * 9 / 16);
    height: 240px;
  }
}

.ig-strip[data-dragging="true"],
.ig-strip-scroll[data-dragging="true"] {
  cursor: grabbing;
}

/* Скрываем элементы после 10-го, чтобы лента оставалась компактной */
.ig-strip > .ig-item:nth-child(n+11) {
  display: none;
}

.ig-item {
  position: relative;
  flex: 0 0 auto;
  width: calc(240px * 9 / 16); /* портрет 9:16, высота ленты 240px */
  height: 240px;
  border-radius: 0; /* Убираем закругление для острых углов */
  overflow: hidden;
  scroll-snap-align: center; /* карточки прилипают центру */
  background: var(--card); /* Используем тот же фон, что и в секции "Кто мы" */
  border: none; /* Убираем рамку */
  transform: skew(-8deg, 0deg); /* Наклон рамки как в секции "Кто мы" */
  transition: transform 0.25s ease-in-out, z-index 0.25s ease-in-out;
}
@media (hover: hover) {
  .ig-item:hover,
  .ig-item.hover-scale-on {
    transform: skew(-8deg, 0deg) scale(1.08); /* Увеличенный масштаб при наведении */
    z-index: 1;
    box-shadow: none;
  }
  .ig-item:hover video,
  .ig-item.hover-scale-on video {
    transform: skew(8deg, 0deg) scale(1.4);
  }
}

.ig-item:active {
  transform: skew(-8deg, 0deg) scale(0.98); /* Эффект вминания при зажатии мышки */
}
.ig-item video {
  width: 100%; 
  height: 100%;
  object-fit: cover;
  display: block;
  transform: skew(8deg, 0deg) scale(1.25); /* Компенсируем наклон и приближаем видео */
  transition: transform 0.25s ease;
  transform-origin: center center;
}

/* Горизонтальные видео — высота увеличена (159px), зазор 18px сохранён.
   Hover/active только через волну (#works .ig-item-horizontal[data-wave-ready="true"]) — см. блок prefers-reduced-motion. */
.ig-item-horizontal {
  width: calc(159px * 16 / 9);
  height: 159px;
  transform: skew(-8deg, 0deg);
  transition: transform 0.25s ease-in-out, z-index 0.25s ease-in-out;
}

@media (hover: hover) {
  .ig-item-horizontal:hover,
  .ig-item-horizontal.hover-scale-on {
    transform: skew(-8deg, 0deg) scale(1.08);
    z-index: 1;
  }
  .ig-item-horizontal:hover video,
  .ig-item-horizontal.hover-scale-on video {
    transform: skew(8deg, 0deg) scale(1.4);
  }
  .ig-item-horizontal:active {
    transform: skew(-8deg, 0deg) scale(0.98);
  }
}
.ig-item-horizontal video {
  transform: skew(8deg, 0deg) scale(1.25); /* компенсация под рамку */
  transition: transform 0.25s ease;
}

/* Фиксируем размеры: вертикальная лента в #works — 340px, горизонтальная — 159px (сумма высот и зазор между лентами сохранены) */
/* Наши работы: только волна при загрузке; при мыши — преувеличение при наведении и вдавливание при зажатии */
#works .ig-item {
  width: calc(240px * 9 / 16);
  height: 240px;
  flex: 0 0 auto;
  min-width: 0;
  min-height: 0;
  transition: transform 0.25s ease-in-out, z-index 0.25s ease-in-out;
}
#works .ig-item-horizontal {
  width: calc(159px * 16 / 9);
  height: 159px;
  transition: transform 0.25s ease-in-out, z-index 0.25s ease-in-out;
}
/* Класс .hover-scale-on: доигрывание анимации увеличения/уменьшения до конца при уходе курсора */
#works .ig-item.hover-scale-on,
#works .ig-item-horizontal.hover-scale-on {
  z-index: 1;
}
#works .ig-item video,
#works .ig-item-horizontal video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  max-width: 100%;
  transition: transform 0.25s ease;
  box-sizing: border-box;
}

@media (max-width: 768px) {
  #works .ig-item {
    width: calc(240px * 9 / 16);
    height: 240px;
  }
  #works .ig-item-horizontal {
    width: calc(159px * 16 / 9);
    height: 159px;
  }
}

/* Убраны подписи и иконка плей с видео в ленте */
.ig-item .play {
  display: none;
}

.ig-item .video-title {
  display: none;
}

/* Отключаем snap, когда лентой управляет скрипт */
.ig-strip.no-snap { scroll-snap-type: none; }

/* =========================
  Клиенты: фиксированный размер секции (1360×308), масштаб уменьшается при сужении,
  чтобы визуально ничего не смещалось — только размер. Сетка 5×2, skew, рамка, 16:9.

  БЫЛО ДО ИЗМЕНЕНИЙ (квадратные карточки с закруглёнными углами):
  — Разметка: .clients-grid с вложенными .client-pair (в каждой паре 2 .client-item).
  — Сетка: grid-template-columns: repeat(5, 1fr); gap: 24px; 5 колонок, по 2 карточки в столбце.
  — Карточка .client-item: width/height 180px, min/max 180px, квадрат; border-radius: 20px;
    background: transparent; border: none; padding: 24px.
  — Без skew, без translateX, без рамки. Hover: scale(1.05), active: scale(0.98).
  — Логотип .client-logo: transform: scale(1.44) без skew; у BFM/Estee/ERR/Dodo свои scale.
========================= */

/* Обёртка ленты клиентов: стрелки по оси X как у #works (left/right -40px), по Y — по центру высоты ленты. Скрыты по умолчанию; для режима ленты на десктопе добавить на #partners класс .clients-strip-mode и показать стрелки. */
#partners .clients-strip-row {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: visible;
}
#partners .clients-strip-row .clients-grid-scale-wrapper {
  flex: 1;
  min-width: 0;
}
#partners .clients-strip-row .clients-arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: -40px;
  width: 64px;
  height: 64px;
  font-size: 0;
  visibility: hidden;
  pointer-events: none;
}
#partners .clients-strip-row .clients-arrow.next {
  left: auto;
  right: -40px;
}
#partners .clients-strip-row .clients-arrow::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  width: 22px;
  height: 22px;
  margin: -11px 0 0 -11px;
  background-image: url("./assets/images/icons/icon_arrow.png");
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  filter: brightness(0) invert(1);
}
#partners .clients-strip-row .clients-arrow.next::before {
  transform: rotate(90deg);
}
#partners .clients-strip-row .clients-arrow.prev::before {
  transform: rotate(-90deg);
}
/* Включение стрелок и режима ленты на десктопе при добавлении класса: #partners.clients-strip-mode .clients-arrow { visibility: visible; pointer-events: auto; } и при необходимости overflow-x: auto у обёртки. */

/* Обёртка для масштабирования: занимает 100% ширины, высота по aspect-ratio. max-height ограничивает высоту блока */
.clients-grid-scale-wrapper {
  width: 100%;
  aspect-ratio: 308 / 1360;
  max-height: 260px; /* уменьшенная высота блока на десктопе/планшете */
  position: relative;
  overflow: visible;
  container-type: inline-size;
  margin-top: 32px;
}

/* Внутренняя обёртка: на мобильной задаёт ширину прокручиваемой области (1360×2/3). overflow: visible — элементы могут выходить за края */
.clients-grid-inner {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: visible;
}

.clients-grid {
  display: grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  grid-template-rows: repeat(2, auto);
  gap: 20px;
  margin-top: 32px;
  padding-left: 20px;
  padding-right: 20px;
  box-sizing: border-box;
}

/* Секция клиентов: на десктопе — сетка из пар (столбиков по 2 элемента); на моб — лента из тех же пар. Фиксированный размер 1360×308, масштаб от левого верхнего угла. */
#partners .clients-grid {
  position: absolute;
  left: 0;
  top: 0;
  width: 1360px;
  height: 308px;
  margin: 0;
  padding: 20px;
  grid-template-columns: repeat(5, 256px);
  grid-template-rows: 308px;
  gap: 20px;
  box-sizing: border-box;
  transform: scale(min(1, 100cqw / 1360px));
  transform-origin: left top;
  max-width: none;
  overflow: visible;
}

/* Пара клиентов = столбик из двух карточек (на моб лента собирается из этих пар; при увеличении числа клиентов десктоп может перейти в режим ленты со стрелками) */
#partners .client-pair {
  display: flex;
  flex-direction: column;
  gap: 20px;
  width: 256px;
  height: 308px;
  min-width: 0;
  min-height: 0;
}
#partners .client-pair .client-item {
  flex: 0 0 144px;
  min-height: 144px;
}

/* Карточки клиентов: ячейка 256×144 (16:9), skew -8°, первый ряд +2px, последний -22px */
#partners .client-item {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: 0;
  text-decoration: none;
  transition: box-shadow 0.25s ease, transform 0.25s ease-in-out, border-color 0.25s ease;
  position: relative;
  overflow: hidden;
  width: 100%;
  height: 100%;
  min-width: 0;
  min-height: 0;
  max-width: none;
  max-height: none;
  aspect-ratio: 16 / 9;
  transform: skew(-8deg, 0deg) translateZ(0);
  box-sizing: border-box;
  will-change: transform; /* слой с самого начала — анимация без подлагивания при первой загрузке */
}

/* Первый элемент в паре = верхний ряд (сдвиг +2px); второй = нижний ряд (-22px) */
#partners .client-pair .client-item:first-child {
  transform: skew(-8deg, 0deg) translateX(2px) translateZ(0);
}

#partners .client-pair .client-item:last-child {
  transform: skew(-8deg, 0deg) translateX(-22px) translateZ(0);
}

@media (hover: hover) {
  #partners .client-item:hover {
    border-color: var(--service-border-color, var(--card-border));
  }
  /* Масштаб только по классу .hover-scale-on (JS) — плавная анимация после волны */
  #partners .client-item.hover-scale-on {
    border-color: var(--service-border-color, var(--card-border));
    transform: skew(-8deg, 0deg) scale(1.08) translateZ(0);
  }
  #partners .client-pair .client-item:first-child.hover-scale-on {
    transform: skew(-8deg, 0deg) translateX(2px) scale(1.08) translateZ(0);
  }
  #partners .client-pair .client-item:last-child.hover-scale-on {
    transform: skew(-8deg, 0deg) translateX(-22px) scale(1.08) translateZ(0);
  }
}

#partners .client-item:active,
#partners .client-item:hover:active {
  transform: skew(-8deg, 0deg) scale(0.98) translateZ(0) !important;
}
#partners .client-pair .client-item:first-child:active,
#partners .client-pair .client-item:first-child:hover:active {
  transform: skew(-8deg, 0deg) translateX(2px) scale(0.98) translateZ(0) !important;
}
#partners .client-pair .client-item:last-child:active,
#partners .client-pair .client-item:last-child:hover:active {
  transform: skew(-8deg, 0deg) translateX(-22px) scale(0.98) translateZ(0) !important;
}

/* Подсветка границы при наведении (как у карточек Услуги) */
#partners .client-item {
  --service-border-color: rgba(255, 255, 255, 0.22);
}

/* Базовые стили для .client-item вне секции partners (если появятся) */
.client-item {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
  background: transparent;
  border: none;
  border-radius: 20px;
  text-decoration: none;
  transition: transform 0.25s ease;
  position: relative;
  overflow: hidden;
  width: 180px;
  height: 180px;
  min-width: 180px;
  min-height: 180px;
  max-width: 180px;
  max-height: 180px;
}

@media (hover: hover) {
  .client-item:hover {
    transform: scale(1.05);
  }
}

.client-item:active {
  transform: scale(0.98);
}

@media (hover: hover) {
  .client-item:hover:active {
    transform: scale(0.98);
  }
}

/* Разрешаем логотипам выходить за рамки с обрезкой - заполняют контейнер полностью */
.client-logo {
  width: 100%;
  height: 100%;
  max-width: none;
  max-height: none;
  object-fit: cover;
  position: relative;
  z-index: 1;
  filter: none;
  opacity: 1;
  transition: opacity 0.25s ease, transform 0.25s ease;
  border-radius: 0; /* Убираем закругление у картинки, оно будет у контейнера */
  transform: scale(1.44); /* Увеличиваем все логотипы на 20% (1.2 * 1.2 = 1.44), чтобы они заполняли бокс и обрезались */
}

/* В секции Наши клиенты — картинка логотипа на всю высоту и ширину рамки; масштаб иконок уменьшен внутри рамок */
#partners .client-item .client-logo {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  transform: skew(8deg, 0deg) scale(1.34);
  object-fit: cover;
}

#partners .client-item[data-client="eeste"] .client-logo {
  transform: skew(8deg, 0deg) scale(1.94);
}

#partners .client-item[data-client="bfm"] .client-logo {
  transform: skew(8deg, 0deg) translateY(14px) scale(2.5);
}

#partners .client-item[data-client="err"] .client-logo {
  transform: skew(8deg, 0deg) scale(1.10);
}

#partners .client-item[data-client="dodo"] .client-logo {
  transform: skew(8deg, 0deg) scale(1.13);
}

#partners .client-item[data-client="stockmann"] .client-logo {
  transform: skew(8deg, 0deg) scale(1.14);
}

#partners .client-item[data-client="moto24"] .client-logo {
  transform: skew(8deg, 0deg) scale(1.14);
}

#partners .client-item[data-client="expert"] .client-logo {
  transform: skew(8deg, 0deg) scale(1.14);
}

#partners .client-item[data-client="roses"] .client-logo {
  transform: skew(8deg, 0deg) scale(1.14);
}

#partners .client-item[data-client="kaitsevagi"] .client-logo {
  transform: skew(8deg, 0deg) scale(1.14);
}

/* Estee — увеличен (базовые стили вне #partners) */
.client-item[data-client="eeste"] .client-logo {
  transform: scale(2.05);
}

/* BFM — увеличен, чуть вниз */
.client-item[data-client="bfm"] .client-logo {
  transform: translateY(8px) scale(2);
}

/* ERR — высота как у карточки (базовые стили вне #partners) */
.client-item[data-client="err"] .client-logo {
  transform: scale(1.44);
}

/* Dodo Pizza — чуть уменьшен */
.client-item[data-client="dodo"] .client-logo {
  transform: scale(1.24);
}

@media (hover: hover) {
  .client-item:hover .client-logo {
    opacity: 1;
  }
}

/* BFM увеличен в два раза - может выходить за рамки и обрезается контейнером */
.client-item[data-client="bfm"] .client-logo {
  width: 200%;
  height: 200%;
  border-radius: 0; /* Убираем закругление у картинки, оно будет у контейнера */
  /* transform задан выше для всех BFM вместе с ERR и Dodo */
}

/* Названия клиентов убраны, используются только логотипы */

@media (max-width: 768px) {
  .clients-grid {
    gap: 16px;
    padding-left: 16px;
    padding-right: 16px;
  }

  /* Мобильная секция клиентов: фиксированный масштаб 66.67% (2/3), горизонтальная прокрутка влево‑вправо, отступ слева */
  #partners .clients-grid-scale-wrapper {
    padding-left: 16px;
    box-sizing: border-box;
    aspect-ratio: auto;
    height: calc(308px * 2 / 3 + 26px); /* высота секции при scale(2/3) + запас снизу, чтобы низ ленты (skew) не обрезался */
    overflow-x: auto;
    overflow-y: hidden;
  }
  @supports (scrollbar-width: thin) {
    #partners .clients-grid-scale-wrapper {
      scrollbar-width: thin;
      scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
    }
  }
  #partners .clients-grid-scale-wrapper::-webkit-scrollbar {
    height: 6px;
  }
  #partners .clients-grid-scale-wrapper::-webkit-scrollbar-track {
    background: transparent;
  }
  #partners .clients-grid-scale-wrapper::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 20px;
  }
  #partners .clients-grid-scale-wrapper::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
  }

  /* Ширина прокручиваемой области = визуальная ширина секции (1360×2/3) */
  #partners .clients-grid-inner {
    width: calc(1360px * 2 / 3);
    height: calc(308px * 2 / 3);
    min-width: calc(1360px * 2 / 3);
  }

  #partners .clients-grid {
    transform: scale(0.6667);
    transform-origin: left top;
  }
}

@media (max-width: 600px) {
  .clients-grid {
    gap: 12px;
    padding-left: 12px;
    padding-right: 12px;
  }
}

/* =========================
  Форма контактов и тарифы
========================= */
/* Секция контактов: размер экрана (1920×1080 на десктопе), видео на всю секцию, футер внизу поверх */
.contact-section {
  position: relative;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  min-height: 100dvh; /* учёт UI браузера на мобильных */
  padding: 0;
  overflow: hidden;
}

.contact-video {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 0;
  filter: saturate(0.9) contrast(1.05) brightness(.7);
  will-change: transform;
}

.contact-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.5));
  z-index: 1;
  will-change: opacity, transform;
  transition: background 0.3s ease, backdrop-filter 0.3s ease;
  -webkit-backdrop-filter: blur(0px);
  backdrop-filter: blur(0px);
}

/* Контейнер формы — растёт, оставляем сверху место под хедер */
.contact-section > .container {
  position: relative;
  z-index: 2;
  flex: 1 1 auto;
  min-height: 0;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
}

.contact-content {
  position: relative;
  flex: 1;
  padding: calc(var(--header-h) + 12px) 0 12px; /* сверху место под хедер */
  display: flex;
  flex-direction: column;
  min-height: 0;
}

/* Убираем глобальное затемнение при фокусе - эффект применяется только к полю */
.contact-section:has(input:focus, textarea:focus) .contact-overlay,
.contact-section.has-focus .contact-overlay {
  opacity: 1; /* без глобального затемнения — индивидуальный overlay у поля */
}

/* Поле «Коротко опишите задачу» — высота чуть увеличена */
.contact-section .contact-form .textarea-wrapper textarea,
.contact-section #message {
  min-height: 140px !important;
}

.contact-section-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: clamp(20px, 3vw, 40px);
  margin-top: 16px;
  align-items: start;
  flex: 1;
  min-height: 0;
}

.contact-section .contact-content h2 {
  margin-bottom: 8px;
  flex-shrink: 0;
}

.contact-form-wrapper {
  display: flex;
  flex-direction: column;
  max-width: 600px;
  position: relative;
}

.contact-right-column {
  min-height: 0; /* пустая правая колонка */
}

/* Одноколоночная форма только на мобильной; на планшете — две колонки: форма слева, справа место под дропдаун «Интересующие услуги» */
@media (max-width: 600px) {
  .contact-section-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }
  
  .contact-form-wrapper {
    max-width: 100%;
  }
  
  .contact-content {
    padding: calc(var(--header-h) + 8px) 0 8px;
  }
}

@media (max-width: 600px) {
  .contact-section .contact-form .textarea-wrapper textarea,
  .contact-section #message {
    min-height: 112px !important;
  }
  
  .contact-section .contact-form {
    gap: 8px;
  }
  
  .contact-section .contact-content h2 {
    margin-bottom: 6px;
  }
}

.contact-form {
  display: grid;
  gap: 14px;
}

/* В секции контактов форма компактнее, чтобы всё влезало на экран */
.contact-section .contact-form {
  gap: 10px;
}

.input-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
}

.packages-wrapper {
  display: flex;
  flex-direction: column;
  overflow: visible; /* Разрешаем эффекту выходить за границы */
  align-items: stretch;
}

.input-wrapper {
  position: relative;
  overflow: hidden;
}

.input-wrapper::before {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(255, 255, 255, 0.5);
  -webkit-mask: radial-gradient(25rem 25rem at var(--x, 50%) var(--y, 50%), #000 1%, transparent 50%);
  mask: radial-gradient(25rem 25rem at var(--x, 50%) var(--y, 50%), #000 1%, transparent 50%);
  opacity: var(--opacity, 0);
  pointer-events: none;
  transition: opacity 0.3s ease;
  z-index: 3; /* Поверх затемненного фона поля */
  border-radius: 20px; /* Скругление для обычных input полей */
}

/* Такое же скругление для textarea */
.input-wrapper.textarea-wrapper::before {
  border-radius: 20px;
}

/* Дропдаун «Интересующие Услуги» — мультивыбор с иконками, раскрывается справа */
.contact-services-dropdown-wrapper {
  overflow: visible;
  position: relative;
}
.contact-services-dropdown-wrapper .services-dropdown-label {
  display: block;
  margin-bottom: 6px;
  font-size: 0.9rem;
  color: var(--muted);
}
.services-dropdown-trigger {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 6px;
  min-height: 44px;
  max-height: 96px;
  overflow-y: auto;
  padding: 0 36px 0 18px;
  box-sizing: border-box;
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  color: #fff;
  cursor: pointer;
  outline: none;
  transition: border-color .2s ease, background .2s ease, box-shadow .2s ease;
  font-family: var(--secondary-font);
  font-size: 16px;
  line-height: 1.55;
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
  position: relative;
  z-index: 2;
}
@media (hover: hover) {
  .services-dropdown-trigger:hover {
    border-color: rgba(255,255,255,.24);
    background: rgba(255,255,255,.07);
  }
}
.services-dropdown-trigger:focus-visible {
  border-color: rgba(176, 134, 249, 0.8);
  border-width: 2px;
  box-shadow: 0 0 0 2px rgba(176, 134, 249, 0.3);
}
.services-dropdown-trigger[aria-expanded="true"] {
  border-color: rgba(176, 134, 249, 0.8);
}
.services-dropdown-placeholder {
  color: rgba(255,255,255,.55);
}
.services-dropdown-selected:not(:empty) ~ .services-dropdown-placeholder {
  display: none;
}
.services-dropdown-chevron {
  position: absolute;
  right: 14px;
  top: 50%;
  transform: translateY(-50%);
  width: 0;
  height: 0;
  border-top: 5px solid transparent;
  border-bottom: 5px solid transparent;
  border-left: 6px solid rgba(255,255,255,.7);
  transition: transform .2s ease;
}
.services-dropdown-trigger[aria-expanded="true"] .services-dropdown-chevron {
  transform: translateY(-50%) rotate(180deg);
}
.services-dropdown-panel {
  position: absolute;
  left: calc(100% + 8px);
  top: 0;
  bottom: 0;
  width: min(360px, 42vw) !important;
  max-width: 42vw !important;
  min-width: min(240px, calc(42vw - 24px));
  box-sizing: border-box;
  z-index: 20;
  overflow-y: auto;
  border: 1px solid rgba(255,255,255,.1);
  border-radius: 20px;
  background: rgba(28, 28, 32, 0.45);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  box-shadow: none;
  padding: 10px;
}
.services-dropdown-panel[hidden] {
  display: none !important;
}

/* В секции контактов панель «Интересующие услуги» — уже на планшете */
section#contact .services-dropdown-panel {
  width: min(360px, 42vw) !important;
  max-width: 42vw !important;
}

/* Планшет, ноутбук и десктоп: ширина панели = ширине поля «Интересующие услуги», не выходить за край экрана */
@media (min-width: 641px) {
  section#contact .services-dropdown-panel {
    width: 100% !important;
    max-width: min(100%, calc(100vw - 2*var(--gap) - 8px)) !important;
    min-width: 0;
  }
}

/* Планшет: панель дропдауна не больше половины экрана, ограничена по высоте, список прокручивается */
@media (min-width: 641px) and (max-width: 1024px) {
  .services-dropdown-panel {
    max-height: 70vh;
    width: min(360px, 42vw) !important;
    max-width: 42vw !important;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  .services-dropdown-options-scroll {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    overflow-x: hidden;
  }
}

/* Заголовок попапа «Выберите услуги» — скрыт на десктопе */
.services-dropdown-popup-title {
  display: none;
}
/* Футер с кнопкой «Сохранить выбор» — только в мобильном попапе */
.services-dropdown-popup-footer {
  display: none;
}
/* Контейнер списка — все пункты одной высоты (только grid-auto-rows) */
.services-dropdown-options-scroll {
  display: grid;
  grid-auto-rows: minmax(44px, 1fr);
  gap: 2px;
}
.services-dropdown-option {
  box-sizing: border-box;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  margin-bottom: 0;
  cursor: pointer;
  border-radius: 20px;
  border-bottom: 1px solid rgba(255,255,255,.06);
  transition: background .15s ease, box-shadow .2s ease;
}
.services-dropdown-option > span {
  white-space: normal;
  overflow-wrap: break-word;
  word-wrap: break-word;
  min-width: 0;
}
.services-dropdown-option:last-child {
  border-bottom: none;
  margin-bottom: 0; /* без отступа после последнего пункта */
}
/* Выделенные пункты — усветление, не затемнение */
.services-dropdown-option.selected {
  background: rgba(255,255,255,.16);
  box-shadow: none;
}
.services-dropdown-option.selected img {
  transform: scale(1.111) rotate(8deg);
}
.services-dropdown-option img {
  flex-shrink: 0;
  width: 24px;
  height: 24px;
  object-fit: contain;
  transition: transform .35s cubic-bezier(0.34, 1.56, 0.64, 1);
}
@media (hover: hover) {
  .services-dropdown-option:hover {
    box-shadow: inset 0 0 0 1px var(--option-hover-border);
  }
  .services-dropdown-option.selected:hover {
    box-shadow: inset 0 0 0 1px var(--option-hover-border);
  }
  .services-dropdown-option:hover img {
    transform: scale(1.111) rotate(8deg);
  }
  .services-dropdown-option.selected:hover img {
    transform: scale(1.111) rotate(8deg);
  }
  .services-dropdown-option[data-value="analysis"]:hover { --option-hover-border: #6a11cb; }
  .services-dropdown-option[data-value="strategy"]:hover { --option-hover-border: #8b5cf6; }
  .services-dropdown-option[data-value="ads"]:hover { --option-hover-border: #b086f9; }
  .services-dropdown-option[data-value="content"]:hover { --option-hover-border: #22c55e; }
  .services-dropdown-option[data-value="social"]:hover { --option-hover-border: #65d94f; }
  .services-dropdown-option[data-value="community"]:hover { --option-hover-border: #a3e635; }
  .services-dropdown-option[data-value="video"]:hover { --option-hover-border: #9e1a47; }
  .services-dropdown-option[data-value="design"]:hover { --option-hover-border: #dc2626; }
  .services-dropdown-option[data-value="web"]:hover { --option-hover-border: #fb923c; }
}
/* Цвет и яркость иконок в дропдауне — как в карточках услуг (.cards .card[data-service-icon]::after) */
.services-dropdown-option[data-value="analysis"] img {
  filter: brightness(0) saturate(100%) invert(30%) sepia(95%) saturate(2000%) hue-rotate(240deg) brightness(0.8) contrast(1.1); /* #6a11cb */
}
.services-dropdown-option[data-value="strategy"] img {
  filter: brightness(0) saturate(100%) invert(52%) sepia(90%) saturate(1800%) hue-rotate(250deg) brightness(0.95) contrast(1.05); /* #8b5cf6 */
}
.services-dropdown-option[data-value="ads"] img {
  filter: brightness(0) saturate(100%) invert(42%) sepia(95%) saturate(2000%) hue-rotate(250deg) brightness(0.85) contrast(1.1); /* #b086f9 */
}
.services-dropdown-option[data-value="content"] img {
  filter: brightness(0) saturate(100%) invert(60%) sepia(90%) saturate(2000%) hue-rotate(100deg) brightness(0.9) contrast(1.1); /* #22c55e */
}
.services-dropdown-option[data-value="social"] img {
  filter: brightness(0) saturate(100%) invert(63%) sepia(93%) saturate(2000%) hue-rotate(72deg) brightness(1.05) contrast(1.08); /* #65d94f */
}
.services-dropdown-option[data-value="community"] img {
  filter: brightness(0) saturate(100%) invert(65%) sepia(95%) saturate(2000%) hue-rotate(75deg) brightness(1.1) contrast(1.05); /* #a3e635 */
}
.services-dropdown-option[data-value="video"] img {
  filter: brightness(0) saturate(100%) invert(22%) sepia(95%) saturate(2000%) hue-rotate(328deg) brightness(0.9) contrast(1.1); /* #9e1a47 */
}
.services-dropdown-option[data-value="design"] img {
  filter: brightness(0) saturate(100%) invert(25%) sepia(95%) saturate(2000%) hue-rotate(350deg) brightness(0.85) contrast(1.1); /* #dc2626 */
}
.services-dropdown-option[data-value="web"] img {
  filter: brightness(0) saturate(100%) invert(60%) sepia(95%) saturate(2000%) hue-rotate(-15deg) brightness(1.1) contrast(1.05); /* #fb923c */
}
/* Контакты: затемнение иконок до того же оттенка, что в секции Услуги */
section#contact .services-dropdown-option[data-value="analysis"] img { filter: brightness(0) saturate(100%) invert(30%) sepia(95%) saturate(2000%) hue-rotate(240deg) brightness(0.65) contrast(1.1); }
section#contact .services-dropdown-option[data-value="strategy"] img { filter: brightness(0) saturate(100%) invert(52%) sepia(90%) saturate(1800%) hue-rotate(250deg) brightness(0.75) contrast(1.05); }
section#contact .services-dropdown-option[data-value="ads"] img { filter: brightness(0) saturate(100%) invert(42%) sepia(95%) saturate(2000%) hue-rotate(250deg) brightness(0.68) contrast(1.1); }
section#contact .services-dropdown-option[data-value="content"] img { filter: brightness(0) saturate(100%) invert(60%) sepia(90%) saturate(2000%) hue-rotate(100deg) brightness(0.72) contrast(1.1); }
section#contact .services-dropdown-option[data-value="social"] img { filter: brightness(0) saturate(100%) invert(63%) sepia(93%) saturate(2000%) hue-rotate(72deg) brightness(0.82) contrast(1.08); }
section#contact .services-dropdown-option[data-value="community"] img { filter: brightness(0) saturate(100%) invert(65%) sepia(95%) saturate(2000%) hue-rotate(75deg) brightness(0.88) contrast(1.05); }
section#contact .services-dropdown-option[data-value="video"] img { filter: brightness(0) saturate(100%) invert(22%) sepia(95%) saturate(2000%) hue-rotate(328deg) brightness(0.75) contrast(1.1); }
section#contact .services-dropdown-option[data-value="design"] img { filter: brightness(0) saturate(100%) invert(25%) sepia(95%) saturate(2000%) hue-rotate(350deg) brightness(0.68) contrast(1.1); }
section#contact .services-dropdown-option[data-value="web"] img { filter: brightness(0) saturate(100%) invert(60%) sepia(95%) saturate(2000%) hue-rotate(-15deg) brightness(0.88) contrast(1.05); }
.services-dropdown-selected {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 6px;
  min-width: 0;
}
.services-dropdown-selected .service-tag-icon {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  width: 28px;
  height: 28px;
  padding: 0;
  border-radius: 8px;
  background: rgba(255,255,255,.08);
  cursor: pointer;
  transform: scale(1.111) rotate(8deg);
  transition: background .15s ease, transform .35s cubic-bezier(0.34, 1.56, 0.64, 1);
}
/* Белый крестик поверх тега при наведении */
.services-dropdown-selected .service-tag-icon::after {
  content: "";
  position: absolute;
  inset: 0;
  background: url("assets/images/icons/Icon_cross.png") center / 14px 14px no-repeat;
  filter: brightness(0) invert(1);
  opacity: 0;
  transition: opacity .2s ease;
  pointer-events: none;
}
.services-dropdown-selected .service-tag-icon:hover::after {
  opacity: 1;
}
.services-dropdown-selected .service-tag-icon:hover {
  background: rgba(0,0,0,0.7);
  transform: scale(1) rotate(0deg);
}
.services-dropdown-selected .service-tag-icon:active {
  transform: scale(0.92) rotate(0deg);
}
.services-dropdown-selected .service-tag-icon:active::after {
  opacity: 1;
}
.services-dropdown-selected .service-tag-icon img {
  width: 20px;
  height: 20px;
  object-fit: contain;
  transition: filter .2s ease;
}
.services-dropdown-selected .service-tag-icon:hover img {
  filter: var(--tag-icon-filter) brightness(0.35);
}
/* Цвет иконок в триггере — как в пунктах меню */
.services-dropdown-selected .service-tag-icon[data-value="analysis"] { --tag-icon-filter: brightness(0) saturate(100%) invert(30%) sepia(95%) saturate(2000%) hue-rotate(240deg) brightness(0.8) contrast(1.1); }
.services-dropdown-selected .service-tag-icon[data-value="analysis"] img { filter: var(--tag-icon-filter); }
.services-dropdown-selected .service-tag-icon[data-value="strategy"] { --tag-icon-filter: brightness(0) saturate(100%) invert(52%) sepia(90%) saturate(1800%) hue-rotate(250deg) brightness(0.95) contrast(1.05); }
.services-dropdown-selected .service-tag-icon[data-value="strategy"] img { filter: var(--tag-icon-filter); }
.services-dropdown-selected .service-tag-icon[data-value="ads"] { --tag-icon-filter: brightness(0) saturate(100%) invert(42%) sepia(95%) saturate(2000%) hue-rotate(250deg) brightness(0.85) contrast(1.1); }
.services-dropdown-selected .service-tag-icon[data-value="ads"] img { filter: var(--tag-icon-filter); }
.services-dropdown-selected .service-tag-icon[data-value="content"] { --tag-icon-filter: brightness(0) saturate(100%) invert(60%) sepia(90%) saturate(2000%) hue-rotate(100deg) brightness(0.9) contrast(1.1); }
.services-dropdown-selected .service-tag-icon[data-value="content"] img { filter: var(--tag-icon-filter); }
.services-dropdown-selected .service-tag-icon[data-value="social"] { --tag-icon-filter: brightness(0) saturate(100%) invert(63%) sepia(93%) saturate(2000%) hue-rotate(72deg) brightness(1.05) contrast(1.08); }
.services-dropdown-selected .service-tag-icon[data-value="social"] img { filter: var(--tag-icon-filter); }
.services-dropdown-selected .service-tag-icon[data-value="community"] { --tag-icon-filter: brightness(0) saturate(100%) invert(65%) sepia(95%) saturate(2000%) hue-rotate(75deg) brightness(1.1) contrast(1.05); }
.services-dropdown-selected .service-tag-icon[data-value="community"] img { filter: var(--tag-icon-filter); }
.services-dropdown-selected .service-tag-icon[data-value="video"] { --tag-icon-filter: brightness(0) saturate(100%) invert(22%) sepia(95%) saturate(2000%) hue-rotate(328deg) brightness(0.9) contrast(1.1); }
.services-dropdown-selected .service-tag-icon[data-value="video"] img { filter: var(--tag-icon-filter); }
.services-dropdown-selected .service-tag-icon[data-value="design"] { --tag-icon-filter: brightness(0) saturate(100%) invert(25%) sepia(95%) saturate(2000%) hue-rotate(350deg) brightness(0.85) contrast(1.1); }
.services-dropdown-selected .service-tag-icon[data-value="design"] img { filter: var(--tag-icon-filter); }
.services-dropdown-selected .service-tag-icon[data-value="web"] { --tag-icon-filter: brightness(0) saturate(100%) invert(60%) sepia(95%) saturate(2000%) hue-rotate(-15deg) brightness(1.1) contrast(1.05); }
.services-dropdown-selected .service-tag-icon[data-value="web"] img { filter: var(--tag-icon-filter); }
/* Контакты: затемнение иконок в триггере до того же оттенка, что в Услуги */
section#contact .services-dropdown-selected .service-tag-icon img {
  filter: var(--tag-icon-filter) brightness(0.82);
}
section#contact .services-dropdown-selected .service-tag-icon:hover img {
  filter: var(--tag-icon-filter) brightness(0.35);
}

/* Мобильная версия: дропдаун открывается поверх формы (overlay), best practices */
@media (max-width: 640px) {
  .contact-services-dropdown-wrapper {
    position: relative;
    z-index: 1;
  }
  .contact-form-wrapper:has(.services-dropdown-trigger[aria-expanded="true"]) {
    overflow: visible;
  }
  .services-dropdown-trigger[aria-expanded="true"] {
    border-top-right-radius: 20px;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }
  /* Когда попап открыт — контейнер поднимаем выше хедера и футера (попап поверх них) */
  .contact-section > .container:has(.services-dropdown-panel:not([hidden])) {
    z-index: 100001;
  }
  /* Заголовок попапа сверху */
  .services-dropdown-popup-title {
    display: block;
    margin: 0;
    padding: 20px calc(var(--gap) + env(safe-area-inset-left)) 12px calc(var(--gap) + env(safe-area-inset-right));
    padding-top: calc(20px + env(safe-area-inset-top));
    font-family: var(--primary-font);
    font-size: 1.25rem;
    font-weight: 700;
    color: #fff;
    flex-shrink: 0;
  }
  /* Полноэкранный попап: на всю ширину и высоту экрана */
  .services-dropdown-panel,
  section#contact .services-dropdown-panel {
    position: fixed;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    width: 100% !important;
    max-width: 100vw !important;
    min-width: 100%;
    max-height: 100dvh;
    margin: 0;
    padding: 0;
    border-radius: 0;
    box-sizing: border-box;
    z-index: 100000;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  .services-dropdown-options-scroll {
    flex: 1;
    min-height: 0;
    width: 100%;
    max-width: 100vw;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 14px;
    padding-left: calc(14px + env(safe-area-inset-left));
    padding-right: calc(14px + env(safe-area-inset-right));
    padding-bottom: 100px;
    overscroll-behavior: contain;
    box-sizing: border-box;
  }
  .services-dropdown-popup-footer {
    display: flex;
    justify-content: center;
    align-items: center;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    max-width: 100vw;
    box-sizing: border-box;
    padding: 16px calc(var(--gap) + env(safe-area-inset-left)) calc(16px + env(safe-area-inset-bottom)) calc(var(--gap) + env(safe-area-inset-right));
    background: rgba(18, 18, 20, 0.98);
    border-top: 1px solid rgba(255,255,255,.08);
    z-index: 1;
  }
  .services-dropdown-popup-footer .btn {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
  }
  /* Затемнённый фон под попапом; клик «сквозь» закрывает */
  .services-dropdown-panel:not([hidden])::before {
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: -1;
    pointer-events: none;
  }
  .services-dropdown-option {
    width: 100%;
    max-width: 100%;
    min-width: 0;
    box-sizing: border-box;
  }
  .services-dropdown-option > span {
    display: block;
    width: 100%;
    max-width: 100%;
    white-space: normal;
    overflow-wrap: break-word;
    word-wrap: break-word;
    box-sizing: border-box;
  }
  /* Стрелка вниз/вверх как на десктопе (симметричный треугольник), не наискось */
  .services-dropdown-chevron {
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 6px solid rgba(255,255,255,.7);
    border-bottom: none;
    width: 0;
    height: 0;
  }
  .services-dropdown-trigger[aria-expanded="true"] .services-dropdown-chevron {
    transform: translateY(-50%) rotate(180deg);
  }
}

.textarea-wrapper {
  overflow: hidden; /* Ограничиваем свечение снизу */
}

input[type="text"],
input[type="email"] {
  width: 100%;
  display: block; /* Убираем отступ снизу (ghost space) */
  height: 44px;
  padding: 0 18px;
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  color: #fff;
  outline: none;
  transition: border-color .2s ease, background .2s ease, box-shadow .2s ease, backdrop-filter .3s ease;
  position: relative;
  z-index: 2; /* Поле ввода поверх wrapper, но под свечением */
  font-family: var(--secondary-font); /* Общий шрифт сайта */
  font-size: 16px;
  line-height: 1.55;
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
}

textarea {
  width: 100%;
  display: block; /* Убираем отступ снизу (ghost space) */
  padding: 10px 18px;
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  color: #fff;
  outline: none;
  transition: border-color .2s ease, background .2s ease, box-shadow .2s ease, backdrop-filter .3s ease;
  position: relative;
  z-index: 2; /* Поле ввода поверх wrapper, но под свечением */
  font-family: var(--secondary-font); /* Общий шрифт сайта */
  font-size: 16px;
  line-height: 1.55;
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
}

/* Затемнение для активного поля ввода, блюр 6px */
input[type="text"]:focus,
input[type="email"]:focus,
textarea:focus {
  background: rgba(30, 30, 35, 0.9); /* Темно-серый цвет для инфила */
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
  border-color: rgba(176, 134, 249, 0.8); /* Фиолетовая граница */
  border-width: 2px; /* Утолщаем границу для подчеркивания */
  box-shadow: 0 0 0 2px rgba(176, 134, 249, 0.3);
}

textarea {
  min-height: 240px; /* Увеличена высота textarea */
  resize: none;
  line-height: 1.45;
  overflow-y: auto;
}

input::placeholder, textarea::placeholder { 
  color: rgba(255,255,255,.55); 
}

/* Подсветка при фокусе - эффект уже применен выше */

/* Эффект белого пятна остается видимым даже при фокусе */

@media (hover: none) and (pointer: coarse) {
  .input-wrapper::before {
    content: none;
  }
}

.btn-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-right: 8px;
  width: 20px;
  height: 20px;
  flex-shrink: 0;
}

.btn-icon img {
  width: 100%;
  height: 100%;
  display: block;
  object-fit: contain;
  filter: brightness(0) invert(1); /* Перекрашиваем черное изображение в белое */
}

@media (max-width: 600px) {
  .contact-form {
    gap: 18px;
  }

  .input-row {
    grid-template-columns: 1fr; /* На мобильных в одну колонку */
  }

  .contact-form .btn.full {
    width: 100%;
  }

  textarea {
    min-height: 200px;
  }
}

.packages {
  display: grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap: 12px;
}
@media (max-width: 600px) {
  .packages { grid-template-columns: 1fr; }
}

.pkg { display: block; cursor: pointer; }
.pkg input { display: none; }

.pkg-body {
  height: 100%;
  background: var(--card);
  border: 1px solid var(--card-border);
  border-radius: 20px;
  padding: 16px;
  transition: border-color .2s ease, box-shadow .2s ease, transform .2s ease, background .2s ease;
  position: relative;
  overflow: hidden;
  will-change: transform;
}
.pkg-body .price.custom {
  font-weight: 700;
  background: linear-gradient(135deg, var(--primary-1), var(--primary-2));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}
@media (hover: hover) {
  .pkg:hover .pkg-body {
    box-shadow: 0 0 20px rgba(138, 88, 255, 0.5); /* добавляем светящийся контур при ховере */
    transform: translateY(-2px);
  }
  .pkg input:checked + .pkg-body:hover {
    box-shadow: 0 0 20px rgba(138, 88, 255, 0.5); /* возвращаем свечение при ховере на выбранном тарифе */
    transform: translateY(-2px);
  }
}
.pkg input:checked + .pkg-body {
  border-color: rgba(176,134,249, .65);
  box-shadow: none; /* убираем свечение у выбранного тарифа */
  background: linear-gradient(180deg, rgba(176,134,249,.10), rgba(255,255,255,0));
}

.pkg-top {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 6px;
}

.pkg-top h3 {
  margin: 0;
}

.pkg-top .price {
  margin-left: auto;
  text-align: right;
  font-weight: 600;
}

/* Эффект прожектора при наведении на карточку тарифа */
.pkg-body::before {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(255, 255, 255, 0.5); /* белое пятно подсветки */
  -webkit-mask: radial-gradient(25rem 25rem at var(--x, 50%) var(--y, 50%), #000 1%, transparent 50%);
  mask: radial-gradient(25rem 25rem at var(--x, 50%) var(--y, 50%), #000 1%, transparent 50%);
  opacity: var(--opacity, 0);
  pointer-events: none;
  transition: opacity 0.3s ease;
  z-index: -1; /* подсветка уходит под контент */
}

@media (hover: none) and (pointer: coarse) {
  .pkg-body::before {
    content: none;
  }
}

.pkg-body * {
  position: relative;
  z-index: 1; /* контент всегда выше подсветки */
}

.pkg-body ul {
  list-style: none;
  margin: 12px 0 0;
  padding: 0;
}

.pkg-body ul li {
  position: relative;
  padding-left: 20px;
  margin-bottom: 8px;
}

.pkg-body ul li::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0.6em;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary-1), var(--primary-2));
  transform: translateY(-50%);
}

/* =========================
  Подвал
========================= */
.site-footer {
  position: relative;
  border-top: 1px solid rgba(255,255,255,.08);
  background: rgba(10,10,11,.5);
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
  color: var(--muted);
  padding: 16px 0;
  font-family: var(--secondary-font);
  z-index: 10;
  pointer-events: auto;
}

.footer-inner {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: start;
  gap: 20px;
}


.footer-left { 
  justify-self: end; 
  color: var(--muted); 
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 4px;
}

.footer-author {
  font-size: 12px;
  opacity: 0.7;
}

/* «Made by: » — не кликабельно, без подсветки при наведении */
.footer-author-label {
  pointer-events: none;
  color: var(--muted);
}

/* alexander.zahharov@gmail.com — кликабельно, светлая подсветка как в хедере */
.footer-left .author-email-link {
  color: var(--muted);
  text-decoration: none;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  position: relative;
}
@media (hover: hover) {
  .footer-left .author-email-link:hover {
    color: #fff;
  }
}
/* Подчёркивание при наведении (анимация слева направо) */
.footer-left .author-email-link::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -2px;
  width: 100%;
  height: 1px;
  background: currentColor;
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.25s ease;
}
@media (hover: hover) {
  .footer-left .author-email-link:hover::after {
    transform: scaleX(1);
  }
}

.footer-center { 
  justify-self: center; 
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}
.footer-center a { color: var(--muted); text-decoration: none; cursor: pointer; position: relative; }
@media (hover: hover) {
  .footer-center a:hover { color: #fff; }
}
.footer-center .phone-link { font-size: 14px; }
/* Подчёркивание при наведении (анимация слева направо) */
.footer-center a::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -2px;
  width: 100%;
  height: 1px;
  background: currentColor;
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.25s ease;
}
@media (hover: hover) {
  .footer-center a:hover::after {
    transform: scaleX(1);
  }
}

/* Уведомление о копировании email */
.email-copy-notification {
  position: fixed;
  top: calc(var(--header-h) + 20px);
  left: 50%;
  transform: translateX(-50%) translateY(-100px);
  background: #ffffff;
  border: none;
  color: #000000;
  padding: 12px 24px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 500;
  z-index: 10000;
  opacity: 0;
  transition: opacity 0.3s ease, transform 0.3s ease;
  pointer-events: none;
  box-shadow: none;
}

.email-copy-notification.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}
.footer-right { justify-self: start; display: flex; gap: 16px; }
.footer-right a { color: var(--muted); text-decoration: none; position: relative; }
@media (hover: hover) {
  .footer-right a:hover { color: #fff; }
}
/* Подчёркивание при наведении (анимация слева направо) */
.footer-right a::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -2px;
  width: 100%;
  height: 1px;
  background: currentColor;
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.25s ease;
}
@media (hover: hover) {
  .footer-right a:hover::after {
    transform: scaleX(1);
  }
}

/* Иконки соцсетей в футере */
.footer-right .social-icon {
  width: 24px;
  height: 24px;
  display: inline-block;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  opacity: 0.8;
  transition: opacity 0.3s ease;
  text-indent: -9999px; /* Скрываем текст */
  overflow: hidden;
}

@media (hover: hover) {
  .footer-right .social-icon:hover {
    opacity: 1;
  }
}

/* Единый стиль иконок футера: 24×24, тон #c9c9d1 в тёмной теме */
.footer-right .social-icon.instagram,
.footer-right .social-icon.facebook,
.footer-right .social-icon.tiktok {
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  filter: brightness(0) saturate(0%) invert(0.82);
}

.footer-right .social-icon.instagram {
  background-image: url("./assets/images/icons/Icon_Instagram.png");
}

.footer-right .social-icon.facebook {
  background-image: url("./assets/images/icons/Icon_Facebook.png");
  background-size: 88%;
}

.footer-right .social-icon.tiktok {
  background-image: url("./assets/images/icons/Icon_tiktok.svg");
}

.site-footer .footer-hours,
.site-footer .footer-email {
  margin: 0;
  font-size: 16px; /* немного увеличенный размер текста */
  color: var(--muted);
}

.site-footer .footer-social {
  display: flex;
  gap: 20px; /* широкий промежуток между иконками */
  margin-top: 16px;
}

.site-footer .footer-social a {
  color: #fff;
  font-size: 24px; /* крупный размер иконок */
  transition: color 0.3s ease;
}

@media (hover: hover) {
  .site-footer .footer-social a:hover {
    color: #fff; /* светлая подсветка как в хедере */
  }
}

@media (max-width: 700px) {
  .site-footer {
    padding: 0 0 calc(48px + env(safe-area-inset-bottom));
  }

  .footer-inner {
    grid-template-columns: 1fr;
    text-align: center;
    gap: 16px;
    padding: 0 var(--gap);
    margin-top: 16px;
    margin-bottom: 24px;
  }

  .footer-left {
    justify-self: center;
    align-items: center;
  }
  
  .footer-right {
    justify-self: center;
  }
  
  .footer-center {
    justify-self: center;
  }

  .site-footer .footer-social {
    justify-content: center;
  }
}

/* Фиксированный блок: переключатель темы (сверху) и кнопка «Вверх» (снизу) */
.fixed-actions {
  position: fixed;
  bottom: 24px;
  right: 24px;
  z-index: 50;
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
}
.fixed-actions .scroll-to-top {
  position: static;
  bottom: auto;
  right: auto;
}

/* Кнопка «Вверх»: над футером (z-index 50), но под попапами (10000) */
.scroll-to-top {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--fixed-btn-color);
  text-decoration: none;
  background-color: var(--fixed-btn-bg);
  border: 1px solid var(--fixed-btn-border);
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
  box-shadow: var(--fixed-btn-shadow);
  opacity: 0;
  visibility: hidden;
  transform: translateY(8px);
  transition: opacity .25s ease, visibility .25s ease, transform .25s ease, background-color .2s ease, border-color .2s ease;
}
/* Центр иконки совпадает с центром круга: inset + margin auto */
.scroll-to-top span {
  display: block;
  position: absolute;
  inset: 0;
  margin: auto;
  width: 22px;
  height: 22px;
  background-image: url("./assets/images/icons/icon_arrow.png");
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  filter: brightness(0) invert(1);
  transform: none; /* иконка icon_arrow.png по умолчанию смотрит вверх */
  font-size: 0;
  color: transparent;
  text-indent: -9999px;
  overflow: hidden;
}
.scroll-to-top.visible {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}
.scroll-to-top:hover {
  background-color: var(--fixed-btn-hover-bg);
  border-color: var(--fixed-btn-hover-border);
  transform: translateY(0) scale(1.1);
}
.scroll-to-top:active {
  transform: translateY(0) scale(0.95);
}
.scroll-to-top:focus-visible {
  box-shadow: 0 0 0 3px rgba(138,88,255,.25);
  outline: none;
}

/* Кнопка переключения темы: круглая, над scroll-to-top */
.theme-toggle {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: 1px solid var(--fixed-btn-border);
  background-color: var(--fixed-btn-bg);
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
  box-shadow: var(--fixed-btn-shadow);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  -webkit-tap-highlight-color: transparent;
  transition: background-color .2s ease, border-color .2s ease, transform .2s ease;
}
.theme-toggle:hover {
  background-color: var(--fixed-btn-hover-bg);
  border-color: var(--fixed-btn-hover-border);
  transform: scale(1.1);
}
.theme-toggle:active {
  transform: scale(0.95);
}
.theme-toggle:focus-visible {
  box-shadow: 0 0 0 3px rgba(138,88,255,.25);
  outline: none;
}
.theme-toggle-icon {
  position: absolute;
  inset: 0;
  margin: auto;
  width: 24px;
  height: 24px;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s ease;
}
/* Тёмная тема: показываем солнце (переход на светлую) */
[data-theme="dark"] .theme-toggle-icon--sun {
  opacity: 1;
  filter: brightness(0) invert(1);
}
[data-theme="dark"] .theme-toggle-icon--moon {
  opacity: 0;
}
/* Светлая тема: показываем луну (переход на тёмную) */
[data-theme="light"] .theme-toggle-icon--sun {
  opacity: 0;
}
[data-theme="light"] .theme-toggle-icon--moon {
  opacity: 1;
  filter: brightness(0) saturate(100%);
}
.theme-toggle-icon--sun {
  background-image: url("./assets/images/icons/Icon_sun.png");
}
.theme-toggle-icon--moon {
  background-image: url("./assets/images/icons/icon_moon.png");
}

@media (max-width: 600px) {
  .fixed-actions {
    bottom: 16px;
    right: 16px;
    gap: 10px;
  }
  .scroll-to-top,
  .theme-toggle {
    width: 48px;
    height: 48px;
  }
  .scroll-to-top span {
    width: 18px;
    height: 18px;
  }
  .theme-toggle-icon {
    width: 20px;
    height: 20px;
  }
}

/* =========================
  Утилиты
========================= */
.hidden { display: none !important; }
.center { text-align: center; }
.section { overflow-x: visible; }

/* Запрет горизонтального скролла, когда меню открыто */
.menu-open,
.menu-open body {
  overflow: hidden;
}

/* Мобильная версия: затемнение и блюр только на панели меню, чтобы backdrop-filter размывал контент страницы */
@media (max-width: 820px) {
  .menu-open body::before {
    content: "";
    position: fixed;
    inset: 0;
    background: transparent;
    -webkit-backdrop-filter: none;
    backdrop-filter: none;
    z-index: 0;
    pointer-events: none;
  }
}

/* =========================
  Блок «Кто мы»
========================= */


#about .media.reveal.in-view img {
  transform: scale(1.2); /* Zoom in by 20% when revealed */
}

.hero-content p[data-i18n="hero.subtitle"] {
  max-width: 580px; /* Default desktop width */
  margin: 0 auto; /* Center under the title */
  text-align: center;
}

@media (max-width: 768px) {
  .hero-content p[data-i18n="hero.subtitle"] {
    max-width: 300px; /* Mobile version width */
  }
}

@media (min-width: 769px) {
  .hero-content p[data-i18n="hero.subtitle"] {
    max-width: 550px; /* Desktop version width */
  }
}

/* =========================
  ADViralPlayer — единый дизайн плеера (модалка «Наши работы» и попап «Услуги»).
  Контейнер с классом .AdviralPlayer или .video-modal-content получает эти стили.
  Пройденный путь прогресс-бара — фиолетовый (#8B5CF6).

  Как починили прогресс-бар (пройденный путь слева от ползунка):
  1) В светлой теме переопределяли только трек и -moz-range-progress на фиолетовый,
     т.к. общий color: #ea580c для input перекрашивал заливку в оранжевый.
  2) WebKit: градиент трека использует var(--value, 0%) — Plyr задаёт --value уже
     с процентом ("50%"), поэтому в градиенте нужен именно 0%, а не 0)% (иначе 50%%).
  3) В светлой теме плеер оставлен полностью фиолетовым (без оранжевых элементов).
========================= */
.video-modal-content,
.AdviralPlayer {
  --plyr-color-main: #8B5CF6;
  --plyr-range-fill-background: #8B5CF6;
}
.video-modal {
  position: fixed;
  inset: 0;
  z-index: 100002;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  padding: 20px; /* Добавляем padding чтобы контент не прилипал к краям */
  overflow-y: auto; /* Добавляем прокрутку если контент не помещается */
}

/* Индикатор перемотки для мобильных устройств */
.video-seek-indicator {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0, 0, 0, 0.7);
  border-radius: 50%;
  width: 80px;
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  color: #fff;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.2s ease;
  z-index: 100;
}

.video-seek-indicator.show {
  opacity: 1;
  animation: seekPulse 0.4s ease;
}

@keyframes seekPulse {
  0% {
    transform: translate(-50%, -50%) scale(0.8);
  }
  50% {
    transform: translate(-50%, -50%) scale(1.1);
  }
  100% {
    transform: translate(-50%, -50%) scale(1);
  }
}

.video-modal[hidden] {
  display: none;
}

.video-modal:not([hidden]) {
  opacity: 1;
  pointer-events: auto;
}

.video-modal-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
}

.video-modal-container {
  position: relative;
  width: 85%;
  max-width: 1000px;
  max-height: 85vh;
  z-index: 1;
  transform: scale(0.95);
  transition: transform 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.video-modal:not([hidden]) .video-modal-container {
  transform: scale(1);
}

.video-modal-content {
  position: relative;
  width: 100%;
  padding-bottom: 56.25%; /* 16:9 aspect ratio */
  max-height: 80vh; /* Ограничиваем максимальную высоту */
  background: #000;
  border-radius: 20px;
  overflow: visible; /* Разрешаем меню выходить за границы если нужно */
  box-shadow: none;
}

.modal-video-player {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* Стили для Plyr плеера */
.video-modal-content .plyr {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  border-radius: 20px;
  background: #000;
}

/* Область видео на всю высоту плеера; панель контролов поверх низа */
.video-modal-content .plyr__video-wrapper {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100% !important;
  height: auto !important;
  border-radius: 20px;
  overflow: hidden;
}

/* Постер видео: прижат к левому верхнему углу области видео */
.video-modal-content .plyr__poster {
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  width: 100% !important;
  height: 100% !important;
  object-fit: contain;
  background-size: cover;
  background-position: center;
}

.video-modal-content .plyr__video-wrapper video {
  width: 100% !important;
  height: 100% !important;
  object-fit: contain;
  display: block;
}

.video-modal-content .plyr video {
  width: 100% !important;
  height: 100% !important;
  object-fit: contain;
  display: block;
}

/* Полноэкранный режим: видео на весь экран без пустых мест (все устройства).
   На мобильных при повороте экрана (ландшафт) 100vw/100vh пересчитываются — видео заполняет экран в любой ориентации. */
.plyr:fullscreen,
.plyr:-webkit-full-screen,
.plyr:-moz-full-screen,
.plyr:-ms-fullscreen {
  width: 100vw !important;
  height: 100vh !important;
  max-width: none !important;
  max-height: none !important;
  border-radius: 0 !important;
  background: #000 !important;
}

.plyr:fullscreen video,
.plyr:-webkit-full-screen video,
.plyr:-moz-full-screen video,
.plyr:-ms-fullscreen video {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
}

.plyr:fullscreen .plyr__video-wrapper,
.plyr:-webkit-full-screen .plyr__video-wrapper,
.plyr:-moz-full-screen .plyr__video-wrapper,
.plyr:-ms-fullscreen .plyr__video-wrapper {
  width: 100% !important;
  height: 100% !important;
}

/* На части устройств в fullscreen уходит сам video */
.video-modal-content video:fullscreen,
.video-modal-content video:-webkit-full-screen,
.video-modal-content video:-moz-full-screen,
.video-modal-content video:-ms-fullscreen {
  width: 100vw !important;
  height: 100vh !important;
  object-fit: cover !important;
}

/* Скрываем бейджи качества (HD/SD) в меню */
.video-modal-content .plyr__badge {
  display: none !important;
}

/* Настройка кнопки Play по центру видео (иконка и круг ровно по центру) */
.video-modal-content .plyr__control--overlaid,
.AdviralPlayer .plyr__control--overlaid {
  background: rgba(20, 20, 22, 0.6) !important;
  -webkit-backdrop-filter: blur(var(--blur)) !important;
  backdrop-filter: blur(var(--blur)) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  box-shadow: none !important;
  z-index: 15 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  color: #fff !important;
  transition: all 0.2s ease !important;
}
.AdviralPlayer .plyr__control--overlaid svg,
.video-modal-content .plyr__control--overlaid svg {
  display: block !important;
  margin: auto !important;
}

.video-modal-content .plyr__control--overlaid:hover,
.video-modal-content .plyr__control--overlaid:active,
.video-modal-content .plyr__control--overlaid:focus-visible {
  background: rgba(176, 134, 249, 0.2) !important; /* Фиолетовая подсветка при наведении как у стрелок */
  border-color: rgba(176, 134, 249, 0.4) !important;
  box-shadow: none !important; /* Убираем тень */
  transform: translate(-50%, -50%) scale(1.1) !important;
}

/* Скрываем кнопку Play, когда видео играет и нет ховера на плеере, или даем Plyr самому управлять классами */
.video-modal-content .plyr--playing .plyr__control--overlaid {
  opacity: 0 !important;
  visibility: hidden !important;
}

/* Настройка цветов Plyr */
.video-modal-content .plyr--full-ui input[type=range],
.AdviralPlayer .plyr--full-ui input[type=range] {
  color: var(--primary-1) !important; /* Основной фиолетовый для прогресса и громкости */
}

/* Фон меню настроек */
.video-modal-content .plyr__menu__container {
  background: rgba(20, 20, 22, 0.95) !important;
  -webkit-backdrop-filter: blur(var(--blur)) !important;
  backdrop-filter: blur(var(--blur)) !important;
  color: #fff !important;
  border-radius: 20px !important;
  border: 1px solid rgba(255, 255, 255, 0.1);
  max-height: 50vh !important; /* Ограничиваем высоту меню на всех устройствах */
  overflow-y: auto !important; /* Добавляем прокрутку */
}

.video-modal-content .plyr__menu__container .plyr__control {
  color: #c9c9d1 !important; /* Muted text */
  border-radius: 20px;
}

.video-modal-content .plyr__menu__container .plyr__control:hover {
  background: rgba(255, 255, 255, 0.1) !important;
  color: #fff !important;
}

.video-modal-content .plyr__menu__container .plyr__control[role="menuitemradio"][aria-checked="true"]::before {
  background: var(--primary-1) !important;
}

.video-modal-content .plyr__menu__container .plyr__control[role="menuitemradio"][aria-checked="true"] {
  color: var(--primary-1) !important;
}

/* Прозрачный фон для слайдера громкости */
.video-modal-content .plyr__volume input[type=range] {
  background: transparent !important;
}

/* Панель управления: высота только от верхней границы прогресс-бара (seek) до низа — тайм над панелью */
.video-modal-content .plyr__controls,
.AdviralPlayer .plyr__controls {
  position: absolute !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  flex-direction: row !important;
  flex-wrap: wrap !important;
  align-items: center !important;
  align-content: flex-start !important;
  justify-content: flex-start !important;
  gap: 0 !important;
  background: rgba(28, 28, 30, 0) !important;
  border-radius: 0 !important;
  z-index: 10 !important;
  display: flex !important;
  visibility: visible !important;
  opacity: 1 !important;
  padding: 0 !important;
  padding-top: 0 !important;
  box-sizing: border-box !important;
  transition: transform 0.25s ease, opacity 0.25s ease !important;
}

/* ADViralPlayer: панель уезжает вниз после 3 с без взаимодействия (класс выставляется из JS) */
.video-modal-content.adviral-controls-idle .plyr__controls,
.AdviralPlayer.adviral-controls-idle .plyr__controls {
  transform: translateY(100%) !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* Общий блок для текущего времени и длительности (обёртка из JS) */
.video-modal-content .plyr__time-group {
  position: absolute !important;
  bottom: calc(100% + 26px) !important;
  left: 12px !important;
  display: flex !important;
  align-items: center !important;
  gap: 0.5em !important;
  margin: 0 0 8px 0 !important;
  z-index: 2 !important;
}

/* Фиксированная ширина «окна» для времени: не прыгает при смене цифр, хватает для 99:59 */
.video-modal-content .plyr__time-group .plyr__time--current,
.video-modal-content .plyr__time-group .plyr__time--duration {
  position: relative !important;
  bottom: auto !important;
  left: auto !important;
  top: auto !important;
  margin: 0 !important;
  min-width: 2.8em !important;
  width: 2.8em !important;
  flex-shrink: 0 !important;
  box-sizing: border-box !important;
}

/* Разделитель "/" между текущим временем и длительностью — равные отступы за счёт gap */
.video-modal-content .plyr__time-separator {
  color: inherit !important;
  font-size: inherit !important;
  margin: 0 !important;
  padding: 0 0.25em !important;
  flex-shrink: 0 !important;
}

/* "/" удалён по запросу */
.video-modal-content .plyr__time--current::after {
  content: "" !important;
}

.video-modal-content .plyr__time--duration::before {
  content: "" !important;
}

/* Тайм вне обёртки (до выполнения JS) — позиция над прогресс-баром */
.video-modal-content .plyr__controls > .plyr__time--current,
.video-modal-content .plyr__controls > .plyr__time--duration {
  position: absolute !important;
  bottom: calc(100% + 26px) !important;
  margin: 0 0 8px 0 !important;
  top: auto !important;
  left: 12px !important;
  right: auto !important;
  z-index: 2 !important;
}

.video-modal-content .plyr__controls > .plyr__time--duration {
  left: 72px !important;
}

/* Прогресс-бар (seek + buffer) — над .plyr__controls, под таймом: общий ряд между таймом и кнопками */
.video-modal-content .plyr__progress__container,
.video-modal-content .plyr__controls .plyr__progress__container {
  position: absolute !important;
  bottom: 100% !important;
  top: auto !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  margin: 0 0 0 0 !important;
  padding: 0 !important;
  height: 26px !important;
  min-height: 26px !important;
  box-sizing: border-box !important;
  display: flex !important;
  align-items: flex-start !important;
  background: transparent !important;
  border-radius: 0 !important;
  order: unset !important;
  flex: none !important;
  overflow: visible !important;
}

.video-modal-content .plyr__progress {
  flex: 1 1 auto !important;
  width: 100% !important;
  min-width: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
  height: auto !important;
  min-height: 8px !important;
  box-sizing: border-box !important;
  position: relative !important;
}

.video-modal-content .plyr__progress__container .plyr__progress {
  flex: 1 1 auto !important;
}

/* Seek-инпут: полоска слева от ползунка — фиолетовая, справа — серая */
.video-modal-content .plyr__progress input[type=range],
.AdviralPlayer .plyr__progress input[type=range] {
  color: #8B5CF6 !important;
  accent-color: #8B5CF6 !important;
  height: 4px !important;
  margin: 0 !important;
  margin-left: -6.5px !important;
  margin-right: -6.5px !important;
  width: calc(100% + 13px) !important;
  min-width: 0 !important;
  display: block !important;
  box-sizing: content-box !important;
  position: absolute !important;
  left: 0 !important;
  top: 50% !important;
  transform: translateY(-50%) !important;
  z-index: 2 !important;
}

/* Трек WebKit: пройденный путь (слева от ползунка) — фиолетовый, справа — серая полоска. Plyr задаёт --value на инпуте как "50%" (уже с %). */
.video-modal-content .plyr__progress input[type=range]::-webkit-slider-runnable-track,
.AdviralPlayer .plyr__progress input[type=range]::-webkit-slider-runnable-track {
  background: linear-gradient(to right, #8B5CF6 0%, #8B5CF6 var(--value, 0%), rgba(255, 255, 255, 0.2) var(--value, 0%), rgba(255, 255, 255, 0.2) 100%) !important;
  height: 4px !important;
  border-radius: 2px !important;
}

/* Firefox: полоска слева от ползунка — фиолетовая */
.video-modal-content .plyr__progress input[type=range]::-moz-range-progress,
.AdviralPlayer .plyr__progress input[type=range]::-moz-range-progress {
  background: #8B5CF6 !important;
  height: 4px !important;
  border-radius: 2px 0 0 2px !important;
}

.video-modal-content .plyr__progress input[type=range]::-webkit-slider-thumb,
.AdviralPlayer .plyr__progress input[type=range]::-webkit-slider-thumb {
  background: #8B5CF6 !important; /* фиолетовый ползунок */
  width: 12px !important;
  height: 12px !important;
  border-radius: 50% !important;
  margin-top: -4px !important;
  border: none !important;
}

.video-modal-content .plyr__progress input[type=range]::-moz-range-track,
.AdviralPlayer .plyr__progress input[type=range]::-moz-range-track {
  background: rgba(255, 255, 255, 0.2) !important;
  height: 4px !important;
  border-radius: 2px !important;
}

.video-modal-content .plyr__progress input[type=range]::-moz-range-thumb,
.AdviralPlayer .plyr__progress input[type=range]::-moz-range-thumb {
  background: #8B5CF6 !important; /* фиолетовый ползунок */
  width: 12px !important;
  height: 12px !important;
  border-radius: 50% !important;
  border: none !important;
}

/* Второй ряд: кнопки плей, громкость, таймкод, настройки, на весь экран — в одну линию */
.video-modal-content .plyr__controls__item:not(.plyr__progress),
.video-modal-content .plyr__controls > .plyr__control {
  flex: 0 0 auto !important;
  flex-shrink: 0 !important;
  display: flex !important;
  align-items: center !important;
}

.video-modal-content .plyr__controls .plyr__progress ~ * {
  display: flex !important;
  align-items: center !important;
}

.video-modal-content .plyr__control {
  color: #fff !important;
  display: flex !important;
  visibility: visible !important;
  opacity: 1 !important;
  padding: 8px 10px !important;
}

.video-modal-content .plyr__control:hover {
  background: rgba(176, 134, 249, 0.2) !important;
}

.video-modal-content .plyr__control[aria-expanded="true"] {
  background: rgba(20, 20, 22, 0.8) !important; /* Темный фон для активной кнопки настроек */
  color: var(--primary-1) !important;
}

.video-modal-content .plyr__control[aria-expanded="true"]:hover {
  background: rgba(30, 30, 32, 0.9) !important;
}

/* Стрелки навигации в модальном окне — icon_arrow.png */
.modal-arrow {
  z-index: 20;
  font-size: 0;
  color: transparent;
}
.modal-arrow::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  width: 22px;
  height: 22px;
  margin: -11px 0 0 -11px;
  background-image: url("./assets/images/icons/icon_arrow.png");
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  filter: brightness(0) invert(1);
  transition: transform 0.2s ease;
}
.modal-arrow-left::before { transform: rotate(-90deg); }
.modal-arrow-right::before { transform: rotate(90deg); }
.modal-arrow:hover {
  transform: translateY(-50%) scale(var(--arrow-hover-scale));
}
.modal-arrow:active {
  transform: translateY(-50%) scale(var(--arrow-active-scale));
}
.modal-arrow-left {
  left: -112px;
}
.modal-arrow-right {
  right: -112px;
}

/* Адаптив для стрелок */
@media (max-width: 900px) {
  .ig-arrow,
  .modal-arrow {
    font-size: 2.5em; /* Немного меньше на средних экранах */
    width: 56px; /* Немного меньше зона клика на средних экранах */
    height: 56px;
  }
  .modal-arrow-left { left: -90px; /* Симметрично правой стрелке */ }
  .modal-arrow-right { right: -90px; /* Симметрично левой стрелке */ }
}

@media (max-width: 600px) {
  .modal-arrow {
    position: absolute;
    top: auto;
    bottom: -60px; /* Перемещаем под видео на мобильных */
    transform: none;
  }
  .modal-arrow:hover {
    transform: scale(var(--arrow-hover-scale));
  }
  .modal-arrow:active {
    transform: scale(var(--arrow-active-scale));
  }
  .modal-arrow-left {
    left: 20%;
  }
  .modal-arrow-right {
    right: 20%;
  }
  .ig-arrow,
  .modal-arrow {
    font-size: 2em; /* Еще меньше на мобильных */
    width: 48px; /* Зона клика на мобильных */
    height: 48px;
  }
}

.video-modal-close {
  position: absolute;
  top: -48px;
  right: 0;
  width: 44px;
  height: 44px;
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.3);
  background: rgba(20, 20, 22, 0.8);
  -webkit-backdrop-filter: blur(var(--blur));
  backdrop-filter: blur(var(--blur));
  color: #fff;
  font-size: 28px;
  line-height: 1;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  z-index: 2;
  -webkit-tap-highlight-color: transparent;
}

.video-modal-close:hover {
  border-color: rgba(255, 255, 255, 0.6);
  background: rgba(30, 30, 32, 0.9);
  transform: scale(1.1);
}

.video-modal-close:active {
  transform: scale(0.95);
}

/* Планшеты (481px - 1024px) */
@media (max-width: 1024px) and (min-width: 481px) {
  .video-modal-container {
    width: 90%;
    max-width: 800px;
    max-height: 85vh; /* Ограничиваем высоту видимой областью */
  }

  .video-modal-content {
    padding-bottom: 56.25%; /* 16:9 для горизонтальных видео */
    max-height: 75vh; /* Дополнительное ограничение */
    border-radius: 20px;
  }
  
  /* Для вертикальных видео на планшетах - адаптивная высота */
  .video-modal-content[data-orientation="vertical"] {
    padding-bottom: min(177.78%, 70vh); /* Ограничиваем высоту */
  }

  .video-modal-close {
    top: -40px;
    width: 40px;
    height: 40px;
    font-size: 24px;
  }
  
  /* Touch-friendly элементы для планшетов */
  .video-modal-content .plyr__controls {
    padding: 0 !important;
  }
  
  .video-modal-content .plyr__control {
    padding: 10px !important;
    min-width: 40px !important;
    min-height: 40px !important;
  }
  
  .video-modal-content .plyr__progress {
    flex: 0 0 100% !important;
    margin: 0 !important;
    padding: 8px 10px 4px !important;
    align-self: stretch !important;
    display: flex !important;
    align-items: center !important;
  }
  
  .video-modal-content .plyr__progress input[type=range] {
    height: 8px !important;
    margin-left: -6.5px !important;
    margin-right: -6.5px !important;
    width: calc(100% + 13px) !important;
    position: absolute !important;
    left: 0 !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
  }
  
  .video-modal-content .plyr__progress input[type=range]::-webkit-slider-thumb {
    background: #8B5CF6 !important;
    width: 14px !important;
    height: 14px !important;
    margin-top: -5px !important;
  }
  
  .video-modal-content .plyr__progress input[type=range]::-moz-range-thumb {
    background: #8B5CF6 !important;
    width: 14px !important;
    height: 14px !important;
  }
  
  /* Меню качества для планшетов */
  .video-modal-content .plyr__menu__container {
    max-height: 40vh !important; /* Уменьшаем для планшетов */
    font-size: 15px !important;
    overflow-y: auto !important; /* Добавляем прокрутку если меню не помещается */
  }
  
  .video-modal-content .plyr__menu__container .plyr__control {
    padding: 12px 14px !important;
    min-height: 44px !important;
  }
  
  /* Гарантируем что стрелки навигации на планшетах остаются видимыми */
  .modal-arrow-left {
    left: -60px;
  }
  
  .modal-arrow-right {
    right: -60px;
  }
}

/* Мобильная версия (до 768px): тот же плеер, громкость отключена, контролы выровнены, кнопка Play по центру */
@media (max-width: 768px) {
  .video-modal-content .plyr__volume,
  .video-modal-content .plyr__controls__item.plyr__volume,
  .video-modal-content .plyr__control[data-plyr="mute"] {
    display: none !important;
  }
  /* AdviralPlayer: иконка Play и круг ровно по центру экрана на мобильных */
  .AdviralPlayer .plyr__control--overlaid,
  .video-modal-content .plyr__control--overlaid {
    left: 50% !important;
    top: 50% !important;
    transform: translate(-50%, -50%) !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }
  .AdviralPlayer .plyr__control--overlaid svg,
  .video-modal-content .plyr__control--overlaid svg {
    position: relative !important;
    left: 0 !important;
    top: 0 !important;
    margin: 0 !important;
  }
  .AdviralPlayer .plyr__control--overlaid:hover,
  .AdviralPlayer .plyr__control--overlaid:active,
  .video-modal-content .plyr__control--overlaid:hover,
  .video-modal-content .plyr__control--overlaid:active {
    transform: translate(-50%, -50%) scale(1.1) !important;
  }

  .video-modal-content .plyr__controls {
    display: flex !important;
    flex-wrap: wrap !important;
    align-items: center !important;
    justify-content: flex-start !important;
    min-height: 44px !important;
  }

  .video-modal-content .plyr__controls > *,
  .video-modal-content .plyr__controls .plyr__time-group,
  .video-modal-content .plyr__controls .plyr__control {
    align-self: center !important;
    display: flex !important;
    align-items: center !important;
  }
}

/* Мобильные телефоны (до 480px): плеер по центру экрана */
@media (max-width: 480px) {
  .video-modal-container {
    width: 95%;
    max-height: 100vh;
    min-height: 100vh;
    align-items: center !important;
    justify-content: center;
  }

  .video-modal-content {
    padding-bottom: min(177.78%, 85vh);
    border-radius: 0;
    max-height: 95vh;
  }

  .video-modal-close {
    top: 8px;
    right: 8px;
    width: 36px;
    height: 36px;
    font-size: 20px;
    background: rgba(0, 0, 0, 0.7);
    z-index: 9999;
  }
  
  /* Мобильные оптимизации для Plyr */
  .video-modal-content .plyr__controls {
    padding: 0 !important;
  }
  
  .video-modal-content .plyr__control {
    padding: 12px !important;
    min-width: 44px !important;
    min-height: 44px !important;
  }
  
  .video-modal-content .plyr__progress {
    flex: 0 0 100% !important;
    margin: 0 !important;
    padding: 8px 12px 4px !important;
    align-self: stretch !important;
    display: flex !important;
    align-items: center !important;
  }
  
  .video-modal-content .plyr__progress input[type=range] {
    height: 8px !important;
    margin-left: -6.5px !important;
    margin-right: -6.5px !important;
    width: calc(100% + 13px) !important;
    position: absolute !important;
    left: 0 !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
  }
  
  .video-modal-content .plyr__progress input[type=range]::-webkit-slider-thumb {
    background: #8B5CF6 !important;
    width: 16px !important;
    height: 16px !important;
    margin-top: -6px !important;
  }
  
  .video-modal-content .plyr__progress input[type=range]::-moz-range-thumb {
    background: #8B5CF6 !important;
    width: 16px !important;
    height: 16px !important;
  }
  
  /* Скрываем элементы управления громкостью на мобильных */
  .video-modal-content .plyr__volume,
  .video-modal-content .plyr__controls__item.plyr__volume {
    display: none !important;
  }
  
  /* Меню настроек качества */
  .video-modal-content .plyr__menu__container {
    max-height: 50vh !important; /* Ограничиваем для мобильных */
    font-size: 16px !important;
    overflow-y: auto !important;
  }
  
  .video-modal-content .plyr__menu__container .plyr__control {
    padding: 14px 16px !important;
    min-height: 48px !important;
  }
  
  .video-modal-content .plyr__controls .plyr__control[data-plyr="settings"] {
    order: 10;
  }
  
  /* Стрелки навигации для мобильных */
  .modal-arrow {
    display: flex !important; /* Показываем стрелки */
  }
  
  .modal-arrow-left,
  .modal-arrow-right {
    position: absolute;
    bottom: -60px; /* Перемещаем под видео */
    top: auto;
    transform: none;
  }
  
  .modal-arrow-left {
    left: 30%;
  }
  
  .modal-arrow-right {
    right: 30%;
  }
}

/* Очень маленькие телефоны (до 375px): плеер по центру */
@media (max-width: 375px) {
  .video-modal-container {
    width: 100%;
    max-height: 100vh;
    min-height: 100vh;
    align-items: center !important;
    justify-content: center;
  }

  .video-modal-content {
    padding-bottom: min(177.78%, 90vh);
    border-radius: 0;
    max-height: 95vh;
  }

  .video-modal-close {
    top: 6px;
    right: 6px;
    width: 32px;
    height: 32px;
    font-size: 18px;
    background: rgba(0, 0, 0, 0.8);
    z-index: 9999;
  }
  
  .video-modal-content .plyr__controls {
    font-size: 13px !important;
    padding: 0 !important;
  }
  
  .video-modal-content .plyr__control {
    padding: 8px !important;
    min-height: 44px !important;
    min-width: 44px !important;
  }
  
  .video-modal-content .plyr__progress {
    flex: 0 0 100% !important;
    margin: 0 !important;
    padding: 6px 8px 4px !important;
    align-self: stretch !important;
    display: flex !important;
    align-items: center !important;
  }
  
  .video-modal-content .plyr__progress input[type=range] {
    height: 8px !important;
    margin-left: -6.5px !important;
    margin-right: -6.5px !important;
    width: calc(100% + 13px) !important;
    position: absolute !important;
    left: 0 !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
  }
  
  .video-modal-content .plyr__progress input[type=range]::-webkit-slider-thumb {
    background: #8B5CF6 !important;
    width: 18px !important;
    height: 18px !important;
    margin-top: -6px !important;
  }
  
  .video-modal-content .plyr__progress input[type=range]::-moz-range-thumb {
    background: #8B5CF6 !important;
    width: 18px !important;
    height: 18px !important;
  }
  
  .video-modal-content .plyr__time {
    font-size: 12px !important;
  }
  
  .video-modal-content .plyr__menu__container .plyr__control {
    padding: 14px 16px !important;
    min-height: 50px !important;
    font-size: 16px !important;
  }
}

/* Планшет и мобильная: при тапе воспроизводить hover-эффект (нет курсора — только по нажатию) */
@media (hover: none), (max-width: 1024px) {
  .btn-primary.hover-tap-active {
    background: linear-gradient(135deg, #7a21db, #c096f9);
  }
  .btn-ghost.hover-tap-active {
    background-color: rgba(255,255,255,.10);
    border-color: rgba(255,255,255,.28);
  }
  .header-nav a.hover-tap-active {
    opacity: 1;
  }
  .header-nav a:not(.btn).hover-tap-active::after {
    transform: scaleX(1);
  }
  .header-nav a[href="#contact"].btn.hover-tap-active,
  .header-nav a[href="#contact"].btn-primary.hover-tap-active {
    background: linear-gradient(135deg, #7a21db, #c096f9);
    -webkit-background-clip: text;
    background-clip: text;
    border: none;
  }
  .lang-switcher__toggle.hover-tap-active {
    border-color: rgba(255,255,255,.26);
    box-shadow: none;
  }
  .lang-switcher__option.hover-tap-active {
    background: transparent;
    color: #ffffff;
    transform: translateX(-2px);
  }
  .hero .btn-primary.hover-tap-active {
    background: linear-gradient(135deg, rgba(123, 33, 219, 0.5), rgba(191, 150, 249, 0.5));
    border-color: rgba(255,255,255,.28);
    box-shadow: none;
  }
  .contact-form .btn.full.btn-primary.hover-tap-active,
  .contact-form .btn-primary.full.hover-tap-active {
    background: linear-gradient(135deg, rgba(123, 33, 219, 0.5), rgba(191, 150, 249, 0.5));
    border-color: rgba(255,255,255,.28);
  }
  .media.hover-tap-active img {
    transform: scale(1.05);
  }
  .media-tilted-frame.hover-tap-active {
    z-index: 1;
  }
  .media-tilted-frame:nth-child(1).hover-tap-active,
  .media-tilted-frame:nth-child(2).hover-tap-active,
  .media-tilted-frame:nth-child(3).hover-tap-active {
    transform: skew(-8deg, 0deg);
  }
  .media-tilted-frame.hover-tap-active img {
    transform: skew(8deg, 0deg) scale(1.28);
  }
  /* Карточки услуг: при тапе — подсветка и раскрытие текста, без изменения размера карточки */
  #services .cards .card.hover-tap-active:not(.wave-active),
  #services .cards .card:nth-child(-n+3).hover-tap-active:not(.wave-active),
  #services .cards .card:nth-child(n+7).hover-tap-active:not(.wave-active) {
    transform: skew(-8deg, 0deg);
  }
  #services .cards .card:nth-child(-n+3).hover-tap-active:not(.wave-active) {
    transform: skew(-8deg, 0deg) translateX(22px);
  }
  #services .cards .card:nth-child(n+7).hover-tap-active:not(.wave-active) {
    transform: skew(-8deg, 0deg) translateX(-22px);
  }
  .card.hover-tap-active:not(.wave-active) {
    box-shadow: 0 0 12px var(--service-border-color, transparent);
    border-color: var(--service-border-color, var(--card-border));
    transform: scale(1.02);
  }
  .cards .card.hover-tap-active h3 {
    max-height: 0;
    opacity: 0;
    margin: 0;
    overflow: hidden;
    visibility: hidden;
    transition: max-height .18s ease, opacity .18s ease, margin .18s ease, visibility 0s linear .18s;
  }
  .cards .card.hover-tap-active p {
    max-height: 120px;
    opacity: 1;
    margin-top: 0;
    visibility: visible;
    transition: max-height .18s ease, opacity .18s ease, margin-top .18s ease, visibility 0s 0s;
  }
  .ig-arrow.hover-tap-active {
    transform: translateY(-50%) translateY(40px) scale(var(--arrow-hover-scale));
  }
  #works .works-vertical-row .ig-arrow.hover-tap-active {
    transform: translateY(-50%) scale(var(--arrow-hover-scale));
  }
  .container-horizontal .ig-arrow.hover-tap-active,
  #works .ig-arrow-horizontal.hover-tap-active {
    transform: translateY(-50%) scale(var(--arrow-hover-scale));
  }
  .ig-item.hover-tap-active {
    transform: skew(-8deg, 0deg) scale(1.08);
    z-index: 1;
    box-shadow: none;
  }
  .ig-item.hover-tap-active video {
    transform: skew(8deg, 0deg) scale(1.4);
  }
  .ig-item-horizontal.hover-tap-active {
    transform: skew(-8deg, 0deg) scale(1.08);
  }
  .ig-item-horizontal.hover-tap-active video {
    transform: skew(8deg, 0deg) scale(1.4);
  }
  .client-item.hover-tap-active {
    transform: scale(1.08);
    transition-duration: 0s;
  }
  #partners .client-item.hover-tap-active {
    transform: skew(-8deg, 0deg) scale(1.08);
  }
  #partners .client-pair .client-item:first-child.hover-tap-active {
    transform: skew(-8deg, 0deg) translateX(2px) scale(1.08);
  }
  #partners .client-pair .client-item:last-child.hover-tap-active {
    transform: skew(-8deg, 0deg) translateX(-22px) scale(1.08);
  }
  .client-item.hover-tap-active .client-logo {
    opacity: 1;
  }
  .services-dropdown-trigger.hover-tap-active {
    border-color: rgba(255,255,255,.24);
    background: rgba(255,255,255,.07);
  }
  .services-dropdown-option.hover-tap-active,
  .services-dropdown-option.selected.hover-tap-active {
    box-shadow: inset 0 0 0 1px var(--option-hover-border);
  }
  .services-dropdown-option.hover-tap-active img,
  .services-dropdown-option.selected.hover-tap-active img {
    transform: scale(1.111) rotate(8deg);
  }
  .services-dropdown-option[data-value="analysis"].hover-tap-active { --option-hover-border: #6a11cb; }
  .services-dropdown-option[data-value="strategy"].hover-tap-active { --option-hover-border: #8b5cf6; }
  .services-dropdown-option[data-value="ads"].hover-tap-active { --option-hover-border: #b086f9; }
  .services-dropdown-option[data-value="content"].hover-tap-active { --option-hover-border: #22c55e; }
  .services-dropdown-option[data-value="social"].hover-tap-active { --option-hover-border: #65d94f; }
  .services-dropdown-option[data-value="community"].hover-tap-active { --option-hover-border: #a3e635; }
  .services-dropdown-option[data-value="video"].hover-tap-active { --option-hover-border: #9e1a47; }
  .services-dropdown-option[data-value="design"].hover-tap-active { --option-hover-border: #dc2626; }
  .services-dropdown-option[data-value="web"].hover-tap-active { --option-hover-border: #fb923c; }
  .pkg.hover-tap-active .pkg-body,
  .pkg input:checked + .pkg-body.hover-tap-active {
    box-shadow: 0 0 20px rgba(138, 88, 255, 0.5);
    transform: translateY(-2px);
  }
  .footer-left .author-email-link.hover-tap-active {
    color: #fff;
  }
  .footer-left .author-email-link.hover-tap-active::after {
    transform: scaleX(1);
  }
  .footer-center a.hover-tap-active {
    color: #fff;
  }
  .footer-center a.hover-tap-active::after {
    transform: scaleX(1);
  }
  .footer-right a.hover-tap-active {
    color: #fff;
  }
  .footer-right a.hover-tap-active::after {
    transform: scaleX(1);
  }
  .footer-right .social-icon.hover-tap-active {
    opacity: 1;
  }
  .site-footer .footer-social a.hover-tap-active {
    color: #fff;
  }
  .scroll-to-top.hover-tap-active {
    background-color: rgba(255,255,255,.10);
    border-color: rgba(255,255,255,.28);
    transform: translateY(0) scale(1.1);
  }
  /* Волна: при тапе показывать hover-состояние карточек/клиентов/работ */
  #services .cards .card[data-wave-ready="true"].hover-tap-active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3).hover-tap-active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7).hover-tap-active {
    animation: none;
    transform: skew(-8deg, 0deg);
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3).hover-tap-active {
    transform: skew(-8deg, 0deg) translateX(22px);
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7).hover-tap-active {
    transform: skew(-8deg, 0deg) translateX(-22px);
  }
  #partners .client-item[data-wave-ready="true"].hover-tap-active {
    animation: none !important;
    transform: skew(-8deg, 0deg) scale(1.08) !important;
  }
  #partners .client-pair .client-item[data-wave-ready="true"]:first-child.hover-tap-active {
    transform: skew(-8deg, 0deg) translateX(2px) scale(1.08) !important;
  }
  #partners .client-pair .client-item[data-wave-ready="true"]:last-child.hover-tap-active {
    transform: skew(-8deg, 0deg) translateX(-22px) scale(1.08) !important;
  }
  #works .ig-item[data-wave-ready="true"].hover-tap-active:not(.ig-item-horizontal),
  #works .ig-item-horizontal[data-wave-ready="true"].hover-tap-active {
    animation: none;
    transform: skew(-8deg, 0deg) scale(1.08);
  }
  /* Попапы и модалки: hover при тапе */
  .service-popup-close.hover-tap-active {
    background: rgba(255, 255, 255, 0.1);
    transform: scale(1.1);
  }
  .service-popup-arrow.hover-tap-active {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.4);
    transform: scale(var(--arrow-hover-scale));
  }
  .cards .card.hover-tap-active h3 {
    max-height: 0;
    opacity: 0;
    margin: 0;
    overflow: hidden;
    visibility: hidden;
    transition: max-height .18s ease, opacity .18s ease, margin .18s ease, visibility 0s linear .18s;
  }
  .cards .card.hover-tap-active p {
    max-height: 120px;
    opacity: 1;
    margin-top: 0;
    visibility: visible;
    transition: max-height .18s ease, opacity .18s ease, margin-top .18s ease, visibility 0s 0s;
  }
  .services-dropdown-selected .service-tag-icon.hover-tap-active::after {
    opacity: 1;
  }
  .services-dropdown-selected .service-tag-icon.hover-tap-active {
    background: rgba(0,0,0,0.7);
    transform: scale(1) rotate(0deg);
  }
  .services-dropdown-selected .service-tag-icon.hover-tap-active img {
    filter: var(--tag-icon-filter) brightness(0.35);
  }
  section#contact .services-dropdown-selected .service-tag-icon.hover-tap-active img {
    filter: var(--tag-icon-filter) brightness(0.35);
  }
  .modal-arrow.hover-tap-active {
    transform: translateY(-50%) scale(var(--arrow-hover-scale));
  }
  @media (max-width: 600px) {
    .modal-arrow.hover-tap-active {
      transform: scale(var(--arrow-hover-scale));
    }
  }
  .video-modal-close.hover-tap-active {
    border-color: rgba(255, 255, 255, 0.6);
    background: rgba(30, 30, 32, 0.9);
    transform: scale(1.1);
  }

  /* Карточки услуг на мобильных: при зажатии никаких анимаций (только hover при клике) */
  #services .cards .card.hover-tap-active:not(.wave-active),
  #services .cards .card:nth-child(-n+3).hover-tap-active:not(.wave-active),
  #services .cards .card:nth-child(n+7).hover-tap-active:not(.wave-active) {
    transform: skew(-8deg, 0deg);
  }
  #services .cards .card:nth-child(-n+3).hover-tap-active:not(.wave-active) {
    transform: skew(-8deg, 0deg) translateX(22px);
  }
  #services .cards .card:nth-child(n+7).hover-tap-active:not(.wave-active) {
    transform: skew(-8deg, 0deg) translateX(-22px);
  }
  #services .cards .card:active,
  #services .cards .card:hover:active,
  #services .cards .card:focus-within:active,
  #services .cards .card[data-wave-ready="true"]:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):active {
    transform: skew(-8deg, 0deg) !important;
    animation: none !important;
  }
  #services .cards .card:nth-child(-n+3):active,
  #services .cards .card:nth-child(-n+3):hover:active,
  #services .cards .card:nth-child(-n+3):focus-within:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):active {
    transform: skew(-8deg, 0deg) translateX(22px) !important;
    animation: none !important;
  }
  #services .cards .card:nth-child(n+7):active,
  #services .cards .card:nth-child(n+7):hover:active,
  #services .cards .card:nth-child(n+7):focus-within:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):active {
    transform: skew(-8deg, 0deg) translateX(-22px) !important;
    animation: none !important;
  }
  #services .cards .card.hover-tap-active h3,
  #services .cards .card.hover-tap-active p {
    max-height: none;
    opacity: 1;
    visibility: visible;
    margin: 0;
    margin-top: 0;
  }
  #services .cards .card.hover-tap-active p {
    margin-top: 0.5em;
  }
}

/* При ширине 601–900px: первый ряд чуть влево (-5px), третий чуть вправо (+5px) — переопределяем hover-tap и :active */
@media (max-width: 900px) and (min-width: 601px) {
  #services .cards .card:nth-child(-n+3).hover-tap-active:not(.wave-active) {
    transform: skew(-8deg, 0deg) translateX(-5px);
  }
  #services .cards .card:nth-child(n+7).hover-tap-active:not(.wave-active) {
    transform: skew(-8deg, 0deg) translateX(5px);
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3).hover-tap-active {
    transform: skew(-8deg, 0deg) translateX(-5px);
  }
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7).hover-tap-active {
    transform: skew(-8deg, 0deg) translateX(5px);
  }
  #services .cards .card:nth-child(-n+3):active,
  #services .cards .card:nth-child(-n+3):hover:active,
  #services .cards .card:nth-child(-n+3):focus-within:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):active {
    transform: skew(-8deg, 0deg) translateX(-5px) scale(0.98) !important;
    animation: none !important;
  }
  #services .cards .card:nth-child(n+7):active,
  #services .cards .card:nth-child(n+7):hover:active,
  #services .cards .card:nth-child(n+7):focus-within:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):active {
    transform: skew(-8deg, 0deg) translateX(5px) scale(0.98) !important;
    animation: none !important;
  }
}

/* Планшет 901–1024px: при зажатии и при касании без клика — без анимаций; только .hover-tap-active (клик) даёт эффект хавера */
@media (max-width: 1024px) and (min-width: 901px) {
  #services .cards .card:hover:not(.hover-tap-active),
  #services .cards .card:nth-child(-n+3):hover:not(.hover-tap-active),
  #services .cards .card:nth-child(n+7):hover:not(.hover-tap-active),
  #services .cards .card[data-wave-ready="true"]:hover:not(.hover-tap-active),
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):hover:not(.hover-tap-active),
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):hover:not(.hover-tap-active) {
    transform: skew(-8deg, 0deg);
  }
  #services .cards .card:nth-child(-n+3):hover:not(.hover-tap-active),
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):hover:not(.hover-tap-active) {
    transform: skew(-8deg, 0deg) translateX(22px);
  }
  #services .cards .card:nth-child(n+7):hover:not(.hover-tap-active),
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):hover:not(.hover-tap-active) {
    transform: skew(-8deg, 0deg) translateX(-22px);
  }
  #services .cards .card:active,
  #services .cards .card:hover:active,
  #services .cards .card:focus-within:active,
  #services .cards .card[data-wave-ready="true"]:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):active {
    transform: skew(-8deg, 0deg) !important;
    animation: none !important;
  }
  #services .cards .card:nth-child(-n+3):active,
  #services .cards .card:nth-child(-n+3):hover:active,
  #services .cards .card:nth-child(-n+3):focus-within:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):active {
    transform: skew(-8deg, 0deg) translateX(22px) !important;
    animation: none !important;
  }
  #services .cards .card:nth-child(n+7):active,
  #services .cards .card:nth-child(n+7):hover:active,
  #services .cards .card:nth-child(n+7):focus-within:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):active {
    transform: skew(-8deg, 0deg) translateX(-22px) !important;
    animation: none !important;
  }
}

/* Планшет 601–900px: без анимаций при зажатии/касании, только hover по клику (.hover-tap-active).
   При hover — те же translateX(14px)/-14px, что и база: без scale и без сдвига (как в комментарии 1787 — размер карточки не меняется). */
@media (max-width: 900px) and (min-width: 601px) {
  #services .cards .card:hover:not(.hover-tap-active),
  #services .cards .card:nth-child(-n+3):hover:not(.hover-tap-active),
  #services .cards .card:nth-child(n+7):hover:not(.hover-tap-active),
  #services .cards .card[data-wave-ready="true"]:hover:not(.hover-tap-active),
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):hover:not(.hover-tap-active),
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):hover:not(.hover-tap-active) {
    transform: skew(-8deg, 0deg);
  }
  #services .cards .card:nth-child(-n+3):hover:not(.hover-tap-active),
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):hover:not(.hover-tap-active) {
    transform: skew(-8deg, 0deg) translateX(14px);
  }
  #services .cards .card:nth-child(n+7):hover:not(.hover-tap-active),
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):hover:not(.hover-tap-active) {
    transform: skew(-8deg, 0deg) translateX(-14px);
  }
  #services .cards .card:active,
  #services .cards .card:hover:active,
  #services .cards .card:focus-within:active,
  #services .cards .card[data-wave-ready="true"]:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):active {
    transform: skew(-8deg, 0deg) !important;
    animation: none !important;
  }
  #services .cards .card:nth-child(-n+3):active,
  #services .cards .card:nth-child(-n+3):hover:active,
  #services .cards .card:nth-child(-n+3):focus-within:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):active {
    transform: skew(-8deg, 0deg) translateX(14px) scale(0.98) !important;
    animation: none !important;
  }
  #services .cards .card:nth-child(n+7):active,
  #services .cards .card:nth-child(n+7):hover:active,
  #services .cards .card:nth-child(n+7):focus-within:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):active {
    transform: skew(-8deg, 0deg) translateX(-14px) scale(0.98) !important;
    animation: none !important;
  }
}

/* Планшет и мобильная: в секции Наши работы при зажатии/касании без клика — без анимаций; только .hover-scale-on (клик) даёт эффект */
@media (max-width: 1024px) {
  #works .ig-item[data-wave-ready="true"]:hover:not(.hover-scale-on),
  #works .ig-item[data-wave-ready="true"]:focus-within:not(.hover-scale-on),
  #works .ig-item[data-wave-ready="true"]:not(.ig-item-horizontal):hover:not(.hover-scale-on),
  #works .ig-item-horizontal[data-wave-ready="true"]:hover:not(.hover-scale-on),
  #works .ig-item-horizontal[data-wave-ready="true"]:focus-within:not(.hover-scale-on),
  #works .ig-item[data-wave-ready="true"].wave-done:hover:not(.hover-scale-on),
  #works .ig-item[data-wave-ready="true"].wave-done:focus-within:not(.hover-scale-on) {
    transform: skew(-8deg, 0deg);
  }
  #works .ig-item[data-wave-ready="true"]:hover:not(.hover-scale-on) video,
  #works .ig-item[data-wave-ready="true"]:focus-within:not(.hover-scale-on) video,
  #works .ig-item-horizontal[data-wave-ready="true"]:hover:not(.hover-scale-on) video,
  #works .ig-item-horizontal[data-wave-ready="true"]:focus-within:not(.hover-scale-on) video {
    transform: skew(8deg, 0deg);
  }
  #works .ig-item[data-wave-ready="true"]:active,
  #works .ig-item[data-wave-ready="true"]:not(.ig-item-horizontal):active,
  #works .ig-item[data-wave-ready="true"]:not(.ig-item-horizontal):hover:active,
  #works .ig-item-horizontal[data-wave-ready="true"]:active,
  #works .ig-item-horizontal[data-wave-ready="true"]:hover:active,
  #works .ig-item-horizontal[data-wave-ready="true"].wave-done:active,
  #works .ig-item-horizontal[data-wave-ready="true"].wave-done:hover:active {
    transform: skew(-8deg, 0deg) !important;
  }
  #works .ig-item[data-wave-ready="true"]:active video,
  #works .ig-item-horizontal[data-wave-ready="true"]:active video {
    transform: skew(8deg, 0deg) !important;
  }
  /* Меньше пустого пространства над и под секцией Наши работы на планшете */
  #works.section {
    padding-top: calc(var(--header-h) + 10px);
    padding-bottom: clamp(16px, 3vw, 32px);
  }
}

@media (max-width: 600px) {
  /* Ещё меньше отступов у секции Наши работы на мобильной */
  #works.section {
    padding-top: calc(var(--header-h) + 8px);
    padding-bottom: clamp(12px, 2.5vw, 24px);
  }
}

/* Мобильные (≤768px): при зажатии карточек услуг — никакого движения. База на моб — без translateX, :active тоже без сдвига. */
@media (max-width: 768px) {
  /* Отключаем transition — при смене состояния не будет анимации */
  #services .cards .card,
  #services .cards .card:nth-child(-n+3),
  #services .cards .card:nth-child(n+7) {
    transition: none !important;
  }
  /* При касании :hover — без scale и без сдвига (как база на моб) */
  #services .cards .card:hover:not(.hover-tap-active),
  #services .cards .card:nth-child(-n+3):hover:not(.hover-tap-active),
  #services .cards .card:nth-child(n+7):hover:not(.hover-tap-active),
  #services .cards .card[data-wave-ready="true"]:hover:not(.hover-tap-active),
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):hover:not(.hover-tap-active),
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):hover:not(.hover-tap-active) {
    transform: skew(-8deg, 0deg) !important;
  }
  /* При зажатии (:active) — тот же вид, что и база на моб: только skew, без translateX и без scale */
  #services .cards .card:active,
  #services .cards .card:hover:active,
  #services .cards .card:focus-within:active,
  #services .cards .card[data-wave-ready="true"]:active,
  #services .cards .card[data-wave-ready="true"]:hover:active,
  #services .cards .card[data-wave-ready="true"]:focus-within:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):active,
  #services .cards .card:nth-child(-n+3):active,
  #services .cards .card:nth-child(-n+3):hover:active,
  #services .cards .card:nth-child(-n+3):focus-within:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(-n+3):active,
  #services .cards .card:nth-child(n+7):active,
  #services .cards .card:nth-child(n+7):hover:active,
  #services .cards .card:nth-child(n+7):focus-within:active,
  #services .cards .card[data-wave-ready="true"]:nth-child(n+7):active {
    transform: skew(-8deg, 0deg) !important;
    animation: none !important;
    transition: none !important;
  }
}

/* Пустой элемент внизу попапа — создаёт место для прокрутки после видео */
.service-popup-spacer {
  height: 0;
  flex-shrink: 0;
}

/* Mobile S (320px): в конце файла с !important, чтобы перебить базовые правила */
@media (max-width: 375px) {
  #service-popup .service-popup-close {
    top: -40px !important;
  }
  #service-popup .service-popup-navigation {
    margin-top: 8px !important;
  }
  /* На мобильных даём спейсеру высоту — после видео можно докрутить вниз */
  #service-popup .service-popup-spacer {
    height: 1px;
  }
}